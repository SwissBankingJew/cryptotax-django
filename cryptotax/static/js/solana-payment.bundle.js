(()=>{var Th=Object.create;var ri=Object.defineProperty;var Lh=Object.getOwnPropertyDescriptor;var Ch=Object.getOwnPropertyNames;var Mh=Object.getPrototypeOf,Ph=Object.prototype.hasOwnProperty;var Uh=(r,e,t)=>e in r?ri(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Nt=(r,e)=>()=>(r&&(e=r(r=0)),e);var kt=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Dh=(r,e)=>{for(var t in e)ri(r,t,{get:e[t],enumerable:!0})},Wc=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ch(e))!Ph.call(r,i)&&i!==t&&ri(r,i,{get:()=>e[i],enumerable:!(n=Lh(e,i))||n.enumerable});return r};var ht=(r,e,t)=>(t=r!=null?Th(Mh(r)):{},Wc(e||!r||!r.__esModule?ri(t,"default",{value:r,enumerable:!0}):t,r)),Gc=r=>Wc(ri({},"__esModule",{value:!0}),r);var Oe=(r,e,t)=>Uh(r,typeof e!="symbol"?e+"":e,t);var Xc=kt(Mi=>{"use strict";Mi.byteLength=Fh;Mi.toByteArray=qh;Mi.fromByteArray=$h;var or=[],qt=[],zh=typeof Uint8Array<"u"?Uint8Array:Array,Ns="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(on=0,Yc=Ns.length;on<Yc;++on)or[on]=Ns[on],qt[Ns.charCodeAt(on)]=on;var on,Yc;qt[45]=62;qt[95]=63;function jc(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Fh(r){var e=jc(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Kh(r,e,t){return(e+t)*3/4-t}function qh(r){var e,t=jc(r),n=t[0],i=t[1],o=new zh(Kh(r,n,i)),s=0,u=i>0?n-4:n,f;for(f=0;f<u;f+=4)e=qt[r.charCodeAt(f)]<<18|qt[r.charCodeAt(f+1)]<<12|qt[r.charCodeAt(f+2)]<<6|qt[r.charCodeAt(f+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=qt[r.charCodeAt(f)]<<2|qt[r.charCodeAt(f+1)]>>4,o[s++]=e&255),i===1&&(e=qt[r.charCodeAt(f)]<<10|qt[r.charCodeAt(f+1)]<<4|qt[r.charCodeAt(f+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function Vh(r){return or[r>>18&63]+or[r>>12&63]+or[r>>6&63]+or[r&63]}function Hh(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(Vh(n));return i.join("")}function $h(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,u=t-n;s<u;s+=o)i.push(Hh(r,s,s+o>u?u:s+o));return n===1?(e=r[t-1],i.push(or[e>>2]+or[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(or[e>>10]+or[e>>4&63]+or[e<<2&63]+"=")),i.join("")}});var Zc=kt(ks=>{ks.read=function(r,e,t,n,i){var o,s,u=i*8-n-1,f=(1<<u)-1,_=f>>1,S=-7,A=t?i-1:0,I=t?-1:1,v=r[e+A];for(A+=I,o=v&(1<<-S)-1,v>>=-S,S+=u;S>0;o=o*256+r[e+A],A+=I,S-=8);for(s=o&(1<<-S)-1,o>>=-S,S+=n;S>0;s=s*256+r[e+A],A+=I,S-=8);if(o===0)o=1-_;else{if(o===f)return s?NaN:(v?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-_}return(v?-1:1)*s*Math.pow(2,o-n)};ks.write=function(r,e,t,n,i,o){var s,u,f,_=o*8-i-1,S=(1<<_)-1,A=S>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:o-1,B=n?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=S):(s=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-s))<1&&(s--,f*=2),s+A>=1?e+=I/f:e+=I*Math.pow(2,1-A),e*f>=2&&(s++,f/=2),s+A>=S?(u=0,s=S):s+A>=1?(u=(e*f-1)*Math.pow(2,i),s=s+A):(u=e*Math.pow(2,A-1)*Math.pow(2,i),s=0));i>=8;r[t+v]=u&255,v+=B,u/=256,i-=8);for(s=s<<i|u,_+=i;_>0;r[t+v]=s&255,v+=B,s/=256,_-=8);r[t+v-B]|=T*128}});var Bn=kt(kn=>{"use strict";var Bs=Xc(),On=Zc(),Jc=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;kn.Buffer=D;kn.SlowBuffer=Zh;kn.INSPECT_MAX_BYTES=50;var Pi=2147483647;kn.kMaxLength=Pi;D.TYPED_ARRAY_SUPPORT=Wh();!D.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Wh(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(D.prototype,"parent",{enumerable:!0,get:function(){if(D.isBuffer(this))return this.buffer}});Object.defineProperty(D.prototype,"offset",{enumerable:!0,get:function(){if(D.isBuffer(this))return this.byteOffset}});function hr(r){if(r>Pi)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,D.prototype),e}function D(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ms(r)}return ru(r,e,t)}D.poolSize=8192;function ru(r,e,t){if(typeof r=="string")return Yh(r,e);if(ArrayBuffer.isView(r))return jh(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(sr(r,ArrayBuffer)||r&&sr(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(sr(r,SharedArrayBuffer)||r&&sr(r.buffer,SharedArrayBuffer)))return Ls(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return D.from(n,e,t);let i=Xh(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return D.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}D.from=function(r,e,t){return ru(r,e,t)};Object.setPrototypeOf(D.prototype,Uint8Array.prototype);Object.setPrototypeOf(D,Uint8Array);function nu(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Gh(r,e,t){return nu(r),r<=0?hr(r):e!==void 0?typeof t=="string"?hr(r).fill(e,t):hr(r).fill(e):hr(r)}D.alloc=function(r,e,t){return Gh(r,e,t)};function Ms(r){return nu(r),hr(r<0?0:Ps(r)|0)}D.allocUnsafe=function(r){return Ms(r)};D.allocUnsafeSlow=function(r){return Ms(r)};function Yh(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!D.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=iu(r,e)|0,n=hr(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Ts(r){let e=r.length<0?0:Ps(r.length)|0,t=hr(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function jh(r){if(sr(r,Uint8Array)){let e=new Uint8Array(r);return Ls(e.buffer,e.byteOffset,e.byteLength)}return Ts(r)}function Ls(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,D.prototype),n}function Xh(r){if(D.isBuffer(r)){let e=Ps(r.length)|0,t=hr(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Ds(r.length)?hr(0):Ts(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Ts(r.data)}function Ps(r){if(r>=Pi)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Pi.toString(16)+" bytes");return r|0}function Zh(r){return+r!=r&&(r=0),D.alloc(+r)}D.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==D.prototype};D.compare=function(e,t){if(sr(e,Uint8Array)&&(e=D.from(e,e.offset,e.byteLength)),sr(t,Uint8Array)&&(t=D.from(t,t.offset,t.byteLength)),!D.isBuffer(e)||!D.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};D.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};D.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return D.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=D.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if(sr(s,Uint8Array))o+s.length>i.length?(D.isBuffer(s)||(s=D.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(D.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function iu(r,e){if(D.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||sr(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Cs(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return du(r).length;default:if(i)return n?-1:Cs(r).length;e=(""+e).toLowerCase(),i=!0}}D.byteLength=iu;function Jh(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return cd(this,e,t);case"utf8":case"utf-8":return su(this,e,t);case"ascii":return sd(this,e,t);case"latin1":case"binary":return ad(this,e,t);case"base64":return id(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ud(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}D.prototype._isBuffer=!0;function sn(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}D.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)sn(this,t,t+1);return this};D.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)sn(this,t,t+3),sn(this,t+1,t+2);return this};D.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)sn(this,t,t+7),sn(this,t+1,t+6),sn(this,t+2,t+5),sn(this,t+3,t+4);return this};D.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?su(this,0,e):Jh.apply(this,arguments)};D.prototype.toLocaleString=D.prototype.toString;D.prototype.equals=function(e){if(!D.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:D.compare(this,e)===0};D.prototype.inspect=function(){let e="",t=kn.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Jc&&(D.prototype[Jc]=D.prototype.inspect);D.prototype.compare=function(e,t,n,i,o){if(sr(e,Uint8Array)&&(e=D.from(e,e.offset,e.byteLength)),!D.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,u=n-t,f=Math.min(s,u),_=this.slice(i,o),S=e.slice(t,n);for(let A=0;A<f;++A)if(_[A]!==S[A]){s=_[A],u=S[A];break}return s<u?-1:u<s?1:0};function ou(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Ds(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=D.from(e,n)),D.isBuffer(e))return e.length===0?-1:Qc(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):Qc(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function Qc(r,e,t,n,i){let o=1,s=r.length,u=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,u/=2,t/=2}function f(S,A){return o===1?S[A]:S.readUInt16BE(A*o)}let _;if(i){let S=-1;for(_=t;_<s;_++)if(f(r,_)===f(e,S===-1?0:_-S)){if(S===-1&&(S=_),_-S+1===u)return S*o}else S!==-1&&(_-=_-S),S=-1}else for(t+u>s&&(t=s-u),_=t;_>=0;_--){let S=!0;for(let A=0;A<u;A++)if(f(r,_+A)!==f(e,A)){S=!1;break}if(S)return _}return-1}D.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};D.prototype.indexOf=function(e,t,n){return ou(this,e,t,n,!0)};D.prototype.lastIndexOf=function(e,t,n){return ou(this,e,t,n,!1)};function Qh(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let u=parseInt(e.substr(s*2,2),16);if(Ds(u))return s;r[t+s]=u}return s}function ed(r,e,t,n){return Ui(Cs(e,r.length-t),r,t,n)}function td(r,e,t,n){return Ui(dd(e),r,t,n)}function rd(r,e,t,n){return Ui(du(e),r,t,n)}function nd(r,e,t,n){return Ui(pd(e,r.length-t),r,t,n)}D.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return Qh(this,e,t,n);case"utf8":case"utf-8":return ed(this,e,t,n);case"ascii":case"latin1":case"binary":return td(this,e,t,n);case"base64":return rd(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nd(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};D.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function id(r,e,t){return e===0&&t===r.length?Bs.fromByteArray(r):Bs.fromByteArray(r.slice(e,t))}function su(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=t){let f,_,S,A;switch(u){case 1:o<128&&(s=o);break;case 2:f=r[i+1],(f&192)===128&&(A=(o&31)<<6|f&63,A>127&&(s=A));break;case 3:f=r[i+1],_=r[i+2],(f&192)===128&&(_&192)===128&&(A=(o&15)<<12|(f&63)<<6|_&63,A>2047&&(A<55296||A>57343)&&(s=A));break;case 4:f=r[i+1],_=r[i+2],S=r[i+3],(f&192)===128&&(_&192)===128&&(S&192)===128&&(A=(o&15)<<18|(f&63)<<12|(_&63)<<6|S&63,A>65535&&A<1114112&&(s=A))}}s===null?(s=65533,u=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=u}return od(n)}var eu=4096;function od(r){let e=r.length;if(e<=eu)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=eu));return t}function sd(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function ad(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function cd(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=gd[r[o]];return i}function ud(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}D.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,D.prototype),i};function dt(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}D.prototype.readUintLE=D.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||dt(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};D.prototype.readUintBE=D.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||dt(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};D.prototype.readUint8=D.prototype.readUInt8=function(e,t){return e=e>>>0,t||dt(e,1,this.length),this[e]};D.prototype.readUint16LE=D.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||dt(e,2,this.length),this[e]|this[e+1]<<8};D.prototype.readUint16BE=D.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||dt(e,2,this.length),this[e]<<8|this[e+1]};D.prototype.readUint32LE=D.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||dt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};D.prototype.readUint32BE=D.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||dt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};D.prototype.readBigUInt64LE=Lr(function(e){e=e>>>0,Nn(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&ni(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});D.prototype.readBigUInt64BE=Lr(function(e){e=e>>>0,Nn(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&ni(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});D.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||dt(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};D.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||dt(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};D.prototype.readInt8=function(e,t){return e=e>>>0,t||dt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};D.prototype.readInt16LE=function(e,t){e=e>>>0,t||dt(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};D.prototype.readInt16BE=function(e,t){e=e>>>0,t||dt(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};D.prototype.readInt32LE=function(e,t){return e=e>>>0,t||dt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};D.prototype.readInt32BE=function(e,t){return e=e>>>0,t||dt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};D.prototype.readBigInt64LE=Lr(function(e){e=e>>>0,Nn(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&ni(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});D.prototype.readBigInt64BE=Lr(function(e){e=e>>>0,Nn(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&ni(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});D.prototype.readFloatLE=function(e,t){return e=e>>>0,t||dt(e,4,this.length),On.read(this,e,!0,23,4)};D.prototype.readFloatBE=function(e,t){return e=e>>>0,t||dt(e,4,this.length),On.read(this,e,!1,23,4)};D.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||dt(e,8,this.length),On.read(this,e,!0,52,8)};D.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||dt(e,8,this.length),On.read(this,e,!1,52,8)};function Mt(r,e,t,n,i,o){if(!D.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}D.prototype.writeUintLE=D.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;Mt(this,e,t,n,u,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};D.prototype.writeUintBE=D.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;Mt(this,e,t,n,u,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};D.prototype.writeUint8=D.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||Mt(this,e,t,1,255,0),this[t]=e&255,t+1};D.prototype.writeUint16LE=D.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Mt(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};D.prototype.writeUint16BE=D.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Mt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};D.prototype.writeUint32LE=D.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Mt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};D.prototype.writeUint32BE=D.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Mt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function au(r,e,t,n,i){hu(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function cu(r,e,t,n,i){hu(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}D.prototype.writeBigUInt64LE=Lr(function(e,t=0){return au(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});D.prototype.writeBigUInt64BE=Lr(function(e,t=0){return cu(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});D.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let f=Math.pow(2,8*n-1);Mt(this,e,t,n,f-1,-f)}let o=0,s=1,u=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&u===0&&this[t+o-1]!==0&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+n};D.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let f=Math.pow(2,8*n-1);Mt(this,e,t,n,f-1,-f)}let o=n-1,s=1,u=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&u===0&&this[t+o+1]!==0&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+n};D.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||Mt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};D.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Mt(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};D.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Mt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};D.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Mt(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};D.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Mt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};D.prototype.writeBigInt64LE=Lr(function(e,t=0){return au(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});D.prototype.writeBigInt64BE=Lr(function(e,t=0){return cu(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function uu(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function fu(r,e,t,n,i){return e=+e,t=t>>>0,i||uu(r,e,t,4,34028234663852886e22,-34028234663852886e22),On.write(r,e,t,n,23,4),t+4}D.prototype.writeFloatLE=function(e,t,n){return fu(this,e,t,!0,n)};D.prototype.writeFloatBE=function(e,t,n){return fu(this,e,t,!1,n)};function lu(r,e,t,n,i){return e=+e,t=t>>>0,i||uu(r,e,t,8,17976931348623157e292,-17976931348623157e292),On.write(r,e,t,n,52,8),t+8}D.prototype.writeDoubleLE=function(e,t,n){return lu(this,e,t,!0,n)};D.prototype.writeDoubleBE=function(e,t,n){return lu(this,e,t,!1,n)};D.prototype.copy=function(e,t,n,i){if(!D.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};D.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!D.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=D.isBuffer(e)?e:D.from(e,i),u=s.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var In={};function Us(r,e,t){In[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}Us("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Us("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);Us("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=tu(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=tu(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function tu(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function fd(r,e,t){Nn(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&ni(e,r.length-(t+1))}function hu(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",u;throw o>3?e===0||e===BigInt(0)?u=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:u=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:u=`>= ${e}${s} and <= ${t}${s}`,new In.ERR_OUT_OF_RANGE("value",u,r)}fd(n,i,o)}function Nn(r,e){if(typeof r!="number")throw new In.ERR_INVALID_ARG_TYPE(e,"number",r)}function ni(r,e,t){throw Math.floor(r)!==r?(Nn(r,t),new In.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new In.ERR_BUFFER_OUT_OF_BOUNDS:new In.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var ld=/[^+/0-9A-Za-z-_]/g;function hd(r){if(r=r.split("=")[0],r=r.trim().replace(ld,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Cs(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function dd(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function pd(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function du(r){return Bs.toByteArray(hd(r))}function Ui(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function sr(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Ds(r){return r!==r}var gd=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function Lr(r){return typeof BigInt>"u"?md:r}function md(){throw new Error("BigInt not supported")}});var rf=kt(()=>{});var ua=kt((nf,ca)=>{(function(r,e){"use strict";function t(p,a){if(!p)throw new Error(a||"Assertion failed")}function n(p,a){p.super_=a;var c=function(){};c.prototype=a.prototype,p.prototype=new c,p.prototype.constructor=p}function i(p,a,c){if(i.isBN(p))return p;this.negative=0,this.words=null,this.length=0,this.red=null,p!==null&&((a==="le"||a==="be")&&(c=a,a=10),this._init(p||0,a||10,c||"be"))}typeof r=="object"?r.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=rf().Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,c){return a.cmp(c)>0?a:c},i.min=function(a,c){return a.cmp(c)<0?a:c},i.prototype._init=function(a,c,l){if(typeof a=="number")return this._initNumber(a,c,l);if(typeof a=="object")return this._initArray(a,c,l);c==="hex"&&(c=16),t(c===(c|0)&&c>=2&&c<=36),a=a.toString().replace(/\s+/g,"");var d=0;a[0]==="-"&&(d++,this.negative=1),d<a.length&&(c===16?this._parseHex(a,d,l):(this._parseBase(a,c,d),l==="le"&&this._initArray(this.toArray(),c,l)))},i.prototype._initNumber=function(a,c,l){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(t(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),c,l)},i.prototype._initArray=function(a,c,l){if(t(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var g,y,R=0;if(l==="be")for(d=a.length-1,g=0;d>=0;d-=3)y=a[d]|a[d-1]<<8|a[d-2]<<16,this.words[g]|=y<<R&67108863,this.words[g+1]=y>>>26-R&67108863,R+=24,R>=26&&(R-=26,g++);else if(l==="le")for(d=0,g=0;d<a.length;d+=3)y=a[d]|a[d+1]<<8|a[d+2]<<16,this.words[g]|=y<<R&67108863,this.words[g+1]=y>>>26-R&67108863,R+=24,R>=26&&(R-=26,g++);return this._strip()};function s(p,a){var c=p.charCodeAt(a);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;t(!1,"Invalid character in "+p)}function u(p,a,c){var l=s(p,c);return c-1>=a&&(l|=s(p,c-1)<<4),l}i.prototype._parseHex=function(a,c,l){this.length=Math.ceil((a.length-c)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var g=0,y=0,R;if(l==="be")for(d=a.length-1;d>=c;d-=2)R=u(a,c,d)<<g,this.words[y]|=R&67108863,g>=18?(g-=18,y+=1,this.words[y]|=R>>>26):g+=8;else{var m=a.length-c;for(d=m%2===0?c+1:c;d<a.length;d+=2)R=u(a,c,d)<<g,this.words[y]|=R&67108863,g>=18?(g-=18,y+=1,this.words[y]|=R>>>26):g+=8}this._strip()};function f(p,a,c,l){for(var d=0,g=0,y=Math.min(p.length,c),R=a;R<y;R++){var m=p.charCodeAt(R)-48;d*=l,m>=49?g=m-49+10:m>=17?g=m-17+10:g=m,t(m>=0&&g<l,"Invalid character"),d+=g}return d}i.prototype._parseBase=function(a,c,l){this.words=[0],this.length=1;for(var d=0,g=1;g<=67108863;g*=c)d++;d--,g=g/c|0;for(var y=a.length-l,R=y%d,m=Math.min(y,y-R)+l,h=0,E=l;E<m;E+=d)h=f(a,E,E+d,c),this.imuln(g),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(R!==0){var K=1;for(h=f(a,E,a.length,c),E=0;E<R;E++)K*=c;this.imuln(K),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var c=0;c<this.length;c++)a.words[c]=this.words[c];a.length=this.length,a.negative=this.negative,a.red=this.red};function _(p,a){p.words=a.words,p.length=a.length,p.negative=a.negative,p.red=a.red}if(i.prototype._move=function(a){_(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=S}catch{i.prototype.inspect=S}else i.prototype.inspect=S;function S(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,c){a=a||10,c=c|0||1;var l;if(a===16||a==="hex"){l="";for(var d=0,g=0,y=0;y<this.length;y++){var R=this.words[y],m=((R<<d|g)&16777215).toString(16);g=R>>>24-d&16777215,d+=2,d>=26&&(d-=26,y--),g!==0||y!==this.length-1?l=A[6-m.length]+m+l:l=m+l}for(g!==0&&(l=g.toString(16)+l);l.length%c!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(a===(a|0)&&a>=2&&a<=36){var h=I[a],E=v[a];l="";var K=this.clone();for(K.negative=0;!K.isZero();){var z=K.modrn(E).toString(a);K=K.idivn(E),K.isZero()?l=z+l:l=A[h-z.length]+z+l}for(this.isZero()&&(l="0"+l);l.length%c!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,c){return this.toArrayLike(o,a,c)}),i.prototype.toArray=function(a,c){return this.toArrayLike(Array,a,c)};var B=function(a,c){return a.allocUnsafe?a.allocUnsafe(c):new a(c)};i.prototype.toArrayLike=function(a,c,l){this._strip();var d=this.byteLength(),g=l||Math.max(1,d);t(d<=g,"byte array longer than desired length"),t(g>0,"Requested array length <= 0");var y=B(a,g),R=c==="le"?"LE":"BE";return this["_toArrayLike"+R](y,d),y},i.prototype._toArrayLikeLE=function(a,c){for(var l=0,d=0,g=0,y=0;g<this.length;g++){var R=this.words[g]<<y|d;a[l++]=R&255,l<a.length&&(a[l++]=R>>8&255),l<a.length&&(a[l++]=R>>16&255),y===6?(l<a.length&&(a[l++]=R>>24&255),d=0,y=0):(d=R>>>24,y+=2)}if(l<a.length)for(a[l++]=d;l<a.length;)a[l++]=0},i.prototype._toArrayLikeBE=function(a,c){for(var l=a.length-1,d=0,g=0,y=0;g<this.length;g++){var R=this.words[g]<<y|d;a[l--]=R&255,l>=0&&(a[l--]=R>>8&255),l>=0&&(a[l--]=R>>16&255),y===6?(l>=0&&(a[l--]=R>>24&255),d=0,y=0):(d=R>>>24,y+=2)}if(l>=0)for(a[l--]=d;l>=0;)a[l--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var c=a,l=0;return c>=4096&&(l+=13,c>>>=13),c>=64&&(l+=7,c>>>=7),c>=8&&(l+=4,c>>>=4),c>=2&&(l+=2,c>>>=2),l+c},i.prototype._zeroBits=function(a){if(a===0)return 26;var c=a,l=0;return c&8191||(l+=13,c>>>=13),c&127||(l+=7,c>>>=7),c&15||(l+=4,c>>>=4),c&3||(l+=2,c>>>=2),c&1||l++,l},i.prototype.bitLength=function(){var a=this.words[this.length-1],c=this._countBits(a);return(this.length-1)*26+c};function T(p){for(var a=new Array(p.bitLength()),c=0;c<a.length;c++){var l=c/26|0,d=c%26;a[c]=p.words[l]>>>d&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,c=0;c<this.length;c++){var l=this._zeroBits(this.words[c]);if(a+=l,l!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var c=0;c<a.length;c++)this.words[c]=this.words[c]|a.words[c];return this._strip()},i.prototype.ior=function(a){return t((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var c;this.length>a.length?c=a:c=this;for(var l=0;l<c.length;l++)this.words[l]=this.words[l]&a.words[l];return this.length=c.length,this._strip()},i.prototype.iand=function(a){return t((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var c,l;this.length>a.length?(c=this,l=a):(c=a,l=this);for(var d=0;d<l.length;d++)this.words[d]=c.words[d]^l.words[d];if(this!==c)for(;d<c.length;d++)this.words[d]=c.words[d];return this.length=c.length,this._strip()},i.prototype.ixor=function(a){return t((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){t(typeof a=="number"&&a>=0);var c=Math.ceil(a/26)|0,l=a%26;this._expand(c),l>0&&c--;for(var d=0;d<c;d++)this.words[d]=~this.words[d]&67108863;return l>0&&(this.words[d]=~this.words[d]&67108863>>26-l),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,c){t(typeof a=="number"&&a>=0);var l=a/26|0,d=a%26;return this._expand(l+1),c?this.words[l]=this.words[l]|1<<d:this.words[l]=this.words[l]&~(1<<d),this._strip()},i.prototype.iadd=function(a){var c;if(this.negative!==0&&a.negative===0)return this.negative=0,c=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,c=this.isub(a),a.negative=1,c._normSign();var l,d;this.length>a.length?(l=this,d=a):(l=a,d=this);for(var g=0,y=0;y<d.length;y++)c=(l.words[y]|0)+(d.words[y]|0)+g,this.words[y]=c&67108863,g=c>>>26;for(;g!==0&&y<l.length;y++)c=(l.words[y]|0)+g,this.words[y]=c&67108863,g=c>>>26;if(this.length=l.length,g!==0)this.words[this.length]=g,this.length++;else if(l!==this)for(;y<l.length;y++)this.words[y]=l.words[y];return this},i.prototype.add=function(a){var c;return a.negative!==0&&this.negative===0?(a.negative=0,c=this.sub(a),a.negative^=1,c):a.negative===0&&this.negative!==0?(this.negative=0,c=a.sub(this),this.negative=1,c):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var c=this.iadd(a);return a.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var l=this.cmp(a);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,g;l>0?(d=this,g=a):(d=a,g=this);for(var y=0,R=0;R<g.length;R++)c=(d.words[R]|0)-(g.words[R]|0)+y,y=c>>26,this.words[R]=c&67108863;for(;y!==0&&R<d.length;R++)c=(d.words[R]|0)+y,y=c>>26,this.words[R]=c&67108863;if(y===0&&R<d.length&&d!==this)for(;R<d.length;R++)this.words[R]=d.words[R];return this.length=Math.max(this.length,R),d!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function P(p,a,c){c.negative=a.negative^p.negative;var l=p.length+a.length|0;c.length=l,l=l-1|0;var d=p.words[0]|0,g=a.words[0]|0,y=d*g,R=y&67108863,m=y/67108864|0;c.words[0]=R;for(var h=1;h<l;h++){for(var E=m>>>26,K=m&67108863,z=Math.min(h,a.length-1),q=Math.max(0,h-p.length+1);q<=z;q++){var G=h-q|0;d=p.words[G]|0,g=a.words[q]|0,y=d*g+K,E+=y/67108864|0,K=y&67108863}c.words[h]=K|0,m=E|0}return m!==0?c.words[h]=m|0:c.length--,c._strip()}var M=function(a,c,l){var d=a.words,g=c.words,y=l.words,R=0,m,h,E,K=d[0]|0,z=K&8191,q=K>>>13,G=d[1]|0,ne=G&8191,re=G>>>13,_e=d[2]|0,ae=_e&8191,de=_e>>>13,lt=d[3]|0,fe=lt&8191,oe=lt>>>13,kc=d[4]|0,ke=kc&8191,Be=kc>>>13,Bc=d[5]|0,Te=Bc&8191,Le=Bc>>>13,Tc=d[6]|0,Ce=Tc&8191,Me=Tc>>>13,Lc=d[7]|0,Pe=Lc&8191,Ue=Lc>>>13,Cc=d[8]|0,De=Cc&8191,ze=Cc>>>13,Mc=d[9]|0,Fe=Mc&8191,Ke=Mc>>>13,Pc=g[0]|0,qe=Pc&8191,Ve=Pc>>>13,Uc=g[1]|0,He=Uc&8191,$e=Uc>>>13,Dc=g[2]|0,We=Dc&8191,Ge=Dc>>>13,zc=g[3]|0,Ye=zc&8191,je=zc>>>13,Fc=g[4]|0,Xe=Fc&8191,Ze=Fc>>>13,Kc=g[5]|0,Je=Kc&8191,Qe=Kc>>>13,qc=g[6]|0,et=qc&8191,tt=qc>>>13,Vc=g[7]|0,rt=Vc&8191,nt=Vc>>>13,Hc=g[8]|0,it=Hc&8191,ot=Hc>>>13,$c=g[9]|0,st=$c&8191,at=$c>>>13;l.negative=a.negative^c.negative,l.length=19,m=Math.imul(z,qe),h=Math.imul(z,Ve),h=h+Math.imul(q,qe)|0,E=Math.imul(q,Ve);var fs=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(fs>>>26)|0,fs&=67108863,m=Math.imul(ne,qe),h=Math.imul(ne,Ve),h=h+Math.imul(re,qe)|0,E=Math.imul(re,Ve),m=m+Math.imul(z,He)|0,h=h+Math.imul(z,$e)|0,h=h+Math.imul(q,He)|0,E=E+Math.imul(q,$e)|0;var ls=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(ls>>>26)|0,ls&=67108863,m=Math.imul(ae,qe),h=Math.imul(ae,Ve),h=h+Math.imul(de,qe)|0,E=Math.imul(de,Ve),m=m+Math.imul(ne,He)|0,h=h+Math.imul(ne,$e)|0,h=h+Math.imul(re,He)|0,E=E+Math.imul(re,$e)|0,m=m+Math.imul(z,We)|0,h=h+Math.imul(z,Ge)|0,h=h+Math.imul(q,We)|0,E=E+Math.imul(q,Ge)|0;var hs=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(hs>>>26)|0,hs&=67108863,m=Math.imul(fe,qe),h=Math.imul(fe,Ve),h=h+Math.imul(oe,qe)|0,E=Math.imul(oe,Ve),m=m+Math.imul(ae,He)|0,h=h+Math.imul(ae,$e)|0,h=h+Math.imul(de,He)|0,E=E+Math.imul(de,$e)|0,m=m+Math.imul(ne,We)|0,h=h+Math.imul(ne,Ge)|0,h=h+Math.imul(re,We)|0,E=E+Math.imul(re,Ge)|0,m=m+Math.imul(z,Ye)|0,h=h+Math.imul(z,je)|0,h=h+Math.imul(q,Ye)|0,E=E+Math.imul(q,je)|0;var ds=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(ds>>>26)|0,ds&=67108863,m=Math.imul(ke,qe),h=Math.imul(ke,Ve),h=h+Math.imul(Be,qe)|0,E=Math.imul(Be,Ve),m=m+Math.imul(fe,He)|0,h=h+Math.imul(fe,$e)|0,h=h+Math.imul(oe,He)|0,E=E+Math.imul(oe,$e)|0,m=m+Math.imul(ae,We)|0,h=h+Math.imul(ae,Ge)|0,h=h+Math.imul(de,We)|0,E=E+Math.imul(de,Ge)|0,m=m+Math.imul(ne,Ye)|0,h=h+Math.imul(ne,je)|0,h=h+Math.imul(re,Ye)|0,E=E+Math.imul(re,je)|0,m=m+Math.imul(z,Xe)|0,h=h+Math.imul(z,Ze)|0,h=h+Math.imul(q,Xe)|0,E=E+Math.imul(q,Ze)|0;var ps=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(ps>>>26)|0,ps&=67108863,m=Math.imul(Te,qe),h=Math.imul(Te,Ve),h=h+Math.imul(Le,qe)|0,E=Math.imul(Le,Ve),m=m+Math.imul(ke,He)|0,h=h+Math.imul(ke,$e)|0,h=h+Math.imul(Be,He)|0,E=E+Math.imul(Be,$e)|0,m=m+Math.imul(fe,We)|0,h=h+Math.imul(fe,Ge)|0,h=h+Math.imul(oe,We)|0,E=E+Math.imul(oe,Ge)|0,m=m+Math.imul(ae,Ye)|0,h=h+Math.imul(ae,je)|0,h=h+Math.imul(de,Ye)|0,E=E+Math.imul(de,je)|0,m=m+Math.imul(ne,Xe)|0,h=h+Math.imul(ne,Ze)|0,h=h+Math.imul(re,Xe)|0,E=E+Math.imul(re,Ze)|0,m=m+Math.imul(z,Je)|0,h=h+Math.imul(z,Qe)|0,h=h+Math.imul(q,Je)|0,E=E+Math.imul(q,Qe)|0;var gs=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(gs>>>26)|0,gs&=67108863,m=Math.imul(Ce,qe),h=Math.imul(Ce,Ve),h=h+Math.imul(Me,qe)|0,E=Math.imul(Me,Ve),m=m+Math.imul(Te,He)|0,h=h+Math.imul(Te,$e)|0,h=h+Math.imul(Le,He)|0,E=E+Math.imul(Le,$e)|0,m=m+Math.imul(ke,We)|0,h=h+Math.imul(ke,Ge)|0,h=h+Math.imul(Be,We)|0,E=E+Math.imul(Be,Ge)|0,m=m+Math.imul(fe,Ye)|0,h=h+Math.imul(fe,je)|0,h=h+Math.imul(oe,Ye)|0,E=E+Math.imul(oe,je)|0,m=m+Math.imul(ae,Xe)|0,h=h+Math.imul(ae,Ze)|0,h=h+Math.imul(de,Xe)|0,E=E+Math.imul(de,Ze)|0,m=m+Math.imul(ne,Je)|0,h=h+Math.imul(ne,Qe)|0,h=h+Math.imul(re,Je)|0,E=E+Math.imul(re,Qe)|0,m=m+Math.imul(z,et)|0,h=h+Math.imul(z,tt)|0,h=h+Math.imul(q,et)|0,E=E+Math.imul(q,tt)|0;var ms=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(ms>>>26)|0,ms&=67108863,m=Math.imul(Pe,qe),h=Math.imul(Pe,Ve),h=h+Math.imul(Ue,qe)|0,E=Math.imul(Ue,Ve),m=m+Math.imul(Ce,He)|0,h=h+Math.imul(Ce,$e)|0,h=h+Math.imul(Me,He)|0,E=E+Math.imul(Me,$e)|0,m=m+Math.imul(Te,We)|0,h=h+Math.imul(Te,Ge)|0,h=h+Math.imul(Le,We)|0,E=E+Math.imul(Le,Ge)|0,m=m+Math.imul(ke,Ye)|0,h=h+Math.imul(ke,je)|0,h=h+Math.imul(Be,Ye)|0,E=E+Math.imul(Be,je)|0,m=m+Math.imul(fe,Xe)|0,h=h+Math.imul(fe,Ze)|0,h=h+Math.imul(oe,Xe)|0,E=E+Math.imul(oe,Ze)|0,m=m+Math.imul(ae,Je)|0,h=h+Math.imul(ae,Qe)|0,h=h+Math.imul(de,Je)|0,E=E+Math.imul(de,Qe)|0,m=m+Math.imul(ne,et)|0,h=h+Math.imul(ne,tt)|0,h=h+Math.imul(re,et)|0,E=E+Math.imul(re,tt)|0,m=m+Math.imul(z,rt)|0,h=h+Math.imul(z,nt)|0,h=h+Math.imul(q,rt)|0,E=E+Math.imul(q,nt)|0;var ys=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(ys>>>26)|0,ys&=67108863,m=Math.imul(De,qe),h=Math.imul(De,Ve),h=h+Math.imul(ze,qe)|0,E=Math.imul(ze,Ve),m=m+Math.imul(Pe,He)|0,h=h+Math.imul(Pe,$e)|0,h=h+Math.imul(Ue,He)|0,E=E+Math.imul(Ue,$e)|0,m=m+Math.imul(Ce,We)|0,h=h+Math.imul(Ce,Ge)|0,h=h+Math.imul(Me,We)|0,E=E+Math.imul(Me,Ge)|0,m=m+Math.imul(Te,Ye)|0,h=h+Math.imul(Te,je)|0,h=h+Math.imul(Le,Ye)|0,E=E+Math.imul(Le,je)|0,m=m+Math.imul(ke,Xe)|0,h=h+Math.imul(ke,Ze)|0,h=h+Math.imul(Be,Xe)|0,E=E+Math.imul(Be,Ze)|0,m=m+Math.imul(fe,Je)|0,h=h+Math.imul(fe,Qe)|0,h=h+Math.imul(oe,Je)|0,E=E+Math.imul(oe,Qe)|0,m=m+Math.imul(ae,et)|0,h=h+Math.imul(ae,tt)|0,h=h+Math.imul(de,et)|0,E=E+Math.imul(de,tt)|0,m=m+Math.imul(ne,rt)|0,h=h+Math.imul(ne,nt)|0,h=h+Math.imul(re,rt)|0,E=E+Math.imul(re,nt)|0,m=m+Math.imul(z,it)|0,h=h+Math.imul(z,ot)|0,h=h+Math.imul(q,it)|0,E=E+Math.imul(q,ot)|0;var _s=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(_s>>>26)|0,_s&=67108863,m=Math.imul(Fe,qe),h=Math.imul(Fe,Ve),h=h+Math.imul(Ke,qe)|0,E=Math.imul(Ke,Ve),m=m+Math.imul(De,He)|0,h=h+Math.imul(De,$e)|0,h=h+Math.imul(ze,He)|0,E=E+Math.imul(ze,$e)|0,m=m+Math.imul(Pe,We)|0,h=h+Math.imul(Pe,Ge)|0,h=h+Math.imul(Ue,We)|0,E=E+Math.imul(Ue,Ge)|0,m=m+Math.imul(Ce,Ye)|0,h=h+Math.imul(Ce,je)|0,h=h+Math.imul(Me,Ye)|0,E=E+Math.imul(Me,je)|0,m=m+Math.imul(Te,Xe)|0,h=h+Math.imul(Te,Ze)|0,h=h+Math.imul(Le,Xe)|0,E=E+Math.imul(Le,Ze)|0,m=m+Math.imul(ke,Je)|0,h=h+Math.imul(ke,Qe)|0,h=h+Math.imul(Be,Je)|0,E=E+Math.imul(Be,Qe)|0,m=m+Math.imul(fe,et)|0,h=h+Math.imul(fe,tt)|0,h=h+Math.imul(oe,et)|0,E=E+Math.imul(oe,tt)|0,m=m+Math.imul(ae,rt)|0,h=h+Math.imul(ae,nt)|0,h=h+Math.imul(de,rt)|0,E=E+Math.imul(de,nt)|0,m=m+Math.imul(ne,it)|0,h=h+Math.imul(ne,ot)|0,h=h+Math.imul(re,it)|0,E=E+Math.imul(re,ot)|0,m=m+Math.imul(z,st)|0,h=h+Math.imul(z,at)|0,h=h+Math.imul(q,st)|0,E=E+Math.imul(q,at)|0;var ws=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(ws>>>26)|0,ws&=67108863,m=Math.imul(Fe,He),h=Math.imul(Fe,$e),h=h+Math.imul(Ke,He)|0,E=Math.imul(Ke,$e),m=m+Math.imul(De,We)|0,h=h+Math.imul(De,Ge)|0,h=h+Math.imul(ze,We)|0,E=E+Math.imul(ze,Ge)|0,m=m+Math.imul(Pe,Ye)|0,h=h+Math.imul(Pe,je)|0,h=h+Math.imul(Ue,Ye)|0,E=E+Math.imul(Ue,je)|0,m=m+Math.imul(Ce,Xe)|0,h=h+Math.imul(Ce,Ze)|0,h=h+Math.imul(Me,Xe)|0,E=E+Math.imul(Me,Ze)|0,m=m+Math.imul(Te,Je)|0,h=h+Math.imul(Te,Qe)|0,h=h+Math.imul(Le,Je)|0,E=E+Math.imul(Le,Qe)|0,m=m+Math.imul(ke,et)|0,h=h+Math.imul(ke,tt)|0,h=h+Math.imul(Be,et)|0,E=E+Math.imul(Be,tt)|0,m=m+Math.imul(fe,rt)|0,h=h+Math.imul(fe,nt)|0,h=h+Math.imul(oe,rt)|0,E=E+Math.imul(oe,nt)|0,m=m+Math.imul(ae,it)|0,h=h+Math.imul(ae,ot)|0,h=h+Math.imul(de,it)|0,E=E+Math.imul(de,ot)|0,m=m+Math.imul(ne,st)|0,h=h+Math.imul(ne,at)|0,h=h+Math.imul(re,st)|0,E=E+Math.imul(re,at)|0;var bs=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(bs>>>26)|0,bs&=67108863,m=Math.imul(Fe,We),h=Math.imul(Fe,Ge),h=h+Math.imul(Ke,We)|0,E=Math.imul(Ke,Ge),m=m+Math.imul(De,Ye)|0,h=h+Math.imul(De,je)|0,h=h+Math.imul(ze,Ye)|0,E=E+Math.imul(ze,je)|0,m=m+Math.imul(Pe,Xe)|0,h=h+Math.imul(Pe,Ze)|0,h=h+Math.imul(Ue,Xe)|0,E=E+Math.imul(Ue,Ze)|0,m=m+Math.imul(Ce,Je)|0,h=h+Math.imul(Ce,Qe)|0,h=h+Math.imul(Me,Je)|0,E=E+Math.imul(Me,Qe)|0,m=m+Math.imul(Te,et)|0,h=h+Math.imul(Te,tt)|0,h=h+Math.imul(Le,et)|0,E=E+Math.imul(Le,tt)|0,m=m+Math.imul(ke,rt)|0,h=h+Math.imul(ke,nt)|0,h=h+Math.imul(Be,rt)|0,E=E+Math.imul(Be,nt)|0,m=m+Math.imul(fe,it)|0,h=h+Math.imul(fe,ot)|0,h=h+Math.imul(oe,it)|0,E=E+Math.imul(oe,ot)|0,m=m+Math.imul(ae,st)|0,h=h+Math.imul(ae,at)|0,h=h+Math.imul(de,st)|0,E=E+Math.imul(de,at)|0;var Es=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(Es>>>26)|0,Es&=67108863,m=Math.imul(Fe,Ye),h=Math.imul(Fe,je),h=h+Math.imul(Ke,Ye)|0,E=Math.imul(Ke,je),m=m+Math.imul(De,Xe)|0,h=h+Math.imul(De,Ze)|0,h=h+Math.imul(ze,Xe)|0,E=E+Math.imul(ze,Ze)|0,m=m+Math.imul(Pe,Je)|0,h=h+Math.imul(Pe,Qe)|0,h=h+Math.imul(Ue,Je)|0,E=E+Math.imul(Ue,Qe)|0,m=m+Math.imul(Ce,et)|0,h=h+Math.imul(Ce,tt)|0,h=h+Math.imul(Me,et)|0,E=E+Math.imul(Me,tt)|0,m=m+Math.imul(Te,rt)|0,h=h+Math.imul(Te,nt)|0,h=h+Math.imul(Le,rt)|0,E=E+Math.imul(Le,nt)|0,m=m+Math.imul(ke,it)|0,h=h+Math.imul(ke,ot)|0,h=h+Math.imul(Be,it)|0,E=E+Math.imul(Be,ot)|0,m=m+Math.imul(fe,st)|0,h=h+Math.imul(fe,at)|0,h=h+Math.imul(oe,st)|0,E=E+Math.imul(oe,at)|0;var Rs=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(Rs>>>26)|0,Rs&=67108863,m=Math.imul(Fe,Xe),h=Math.imul(Fe,Ze),h=h+Math.imul(Ke,Xe)|0,E=Math.imul(Ke,Ze),m=m+Math.imul(De,Je)|0,h=h+Math.imul(De,Qe)|0,h=h+Math.imul(ze,Je)|0,E=E+Math.imul(ze,Qe)|0,m=m+Math.imul(Pe,et)|0,h=h+Math.imul(Pe,tt)|0,h=h+Math.imul(Ue,et)|0,E=E+Math.imul(Ue,tt)|0,m=m+Math.imul(Ce,rt)|0,h=h+Math.imul(Ce,nt)|0,h=h+Math.imul(Me,rt)|0,E=E+Math.imul(Me,nt)|0,m=m+Math.imul(Te,it)|0,h=h+Math.imul(Te,ot)|0,h=h+Math.imul(Le,it)|0,E=E+Math.imul(Le,ot)|0,m=m+Math.imul(ke,st)|0,h=h+Math.imul(ke,at)|0,h=h+Math.imul(Be,st)|0,E=E+Math.imul(Be,at)|0;var Ss=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,m=Math.imul(Fe,Je),h=Math.imul(Fe,Qe),h=h+Math.imul(Ke,Je)|0,E=Math.imul(Ke,Qe),m=m+Math.imul(De,et)|0,h=h+Math.imul(De,tt)|0,h=h+Math.imul(ze,et)|0,E=E+Math.imul(ze,tt)|0,m=m+Math.imul(Pe,rt)|0,h=h+Math.imul(Pe,nt)|0,h=h+Math.imul(Ue,rt)|0,E=E+Math.imul(Ue,nt)|0,m=m+Math.imul(Ce,it)|0,h=h+Math.imul(Ce,ot)|0,h=h+Math.imul(Me,it)|0,E=E+Math.imul(Me,ot)|0,m=m+Math.imul(Te,st)|0,h=h+Math.imul(Te,at)|0,h=h+Math.imul(Le,st)|0,E=E+Math.imul(Le,at)|0;var As=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(As>>>26)|0,As&=67108863,m=Math.imul(Fe,et),h=Math.imul(Fe,tt),h=h+Math.imul(Ke,et)|0,E=Math.imul(Ke,tt),m=m+Math.imul(De,rt)|0,h=h+Math.imul(De,nt)|0,h=h+Math.imul(ze,rt)|0,E=E+Math.imul(ze,nt)|0,m=m+Math.imul(Pe,it)|0,h=h+Math.imul(Pe,ot)|0,h=h+Math.imul(Ue,it)|0,E=E+Math.imul(Ue,ot)|0,m=m+Math.imul(Ce,st)|0,h=h+Math.imul(Ce,at)|0,h=h+Math.imul(Me,st)|0,E=E+Math.imul(Me,at)|0;var xs=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(xs>>>26)|0,xs&=67108863,m=Math.imul(Fe,rt),h=Math.imul(Fe,nt),h=h+Math.imul(Ke,rt)|0,E=Math.imul(Ke,nt),m=m+Math.imul(De,it)|0,h=h+Math.imul(De,ot)|0,h=h+Math.imul(ze,it)|0,E=E+Math.imul(ze,ot)|0,m=m+Math.imul(Pe,st)|0,h=h+Math.imul(Pe,at)|0,h=h+Math.imul(Ue,st)|0,E=E+Math.imul(Ue,at)|0;var vs=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(vs>>>26)|0,vs&=67108863,m=Math.imul(Fe,it),h=Math.imul(Fe,ot),h=h+Math.imul(Ke,it)|0,E=Math.imul(Ke,ot),m=m+Math.imul(De,st)|0,h=h+Math.imul(De,at)|0,h=h+Math.imul(ze,st)|0,E=E+Math.imul(ze,at)|0;var Is=(R+m|0)+((h&8191)<<13)|0;R=(E+(h>>>13)|0)+(Is>>>26)|0,Is&=67108863,m=Math.imul(Fe,st),h=Math.imul(Fe,at),h=h+Math.imul(Ke,st)|0,E=Math.imul(Ke,at);var Os=(R+m|0)+((h&8191)<<13)|0;return R=(E+(h>>>13)|0)+(Os>>>26)|0,Os&=67108863,y[0]=fs,y[1]=ls,y[2]=hs,y[3]=ds,y[4]=ps,y[5]=gs,y[6]=ms,y[7]=ys,y[8]=_s,y[9]=ws,y[10]=bs,y[11]=Es,y[12]=Rs,y[13]=Ss,y[14]=As,y[15]=xs,y[16]=vs,y[17]=Is,y[18]=Os,R!==0&&(y[19]=R,l.length++),l};Math.imul||(M=P);function L(p,a,c){c.negative=a.negative^p.negative,c.length=p.length+a.length;for(var l=0,d=0,g=0;g<c.length-1;g++){var y=d;d=0;for(var R=l&67108863,m=Math.min(g,a.length-1),h=Math.max(0,g-p.length+1);h<=m;h++){var E=g-h,K=p.words[E]|0,z=a.words[h]|0,q=K*z,G=q&67108863;y=y+(q/67108864|0)|0,G=G+R|0,R=G&67108863,y=y+(G>>>26)|0,d+=y>>>26,y&=67108863}c.words[g]=R,l=y,y=d}return l!==0?c.words[g]=l:c.length--,c._strip()}function F(p,a,c){return L(p,a,c)}i.prototype.mulTo=function(a,c){var l,d=this.length+a.length;return this.length===10&&a.length===10?l=M(this,a,c):d<63?l=P(this,a,c):d<1024?l=L(this,a,c):l=F(this,a,c),l};function $(p,a){this.x=p,this.y=a}$.prototype.makeRBT=function(a){for(var c=new Array(a),l=i.prototype._countBits(a)-1,d=0;d<a;d++)c[d]=this.revBin(d,l,a);return c},$.prototype.revBin=function(a,c,l){if(a===0||a===l-1)return a;for(var d=0,g=0;g<c;g++)d|=(a&1)<<c-g-1,a>>=1;return d},$.prototype.permute=function(a,c,l,d,g,y){for(var R=0;R<y;R++)d[R]=c[a[R]],g[R]=l[a[R]]},$.prototype.transform=function(a,c,l,d,g,y){this.permute(y,a,c,l,d,g);for(var R=1;R<g;R<<=1)for(var m=R<<1,h=Math.cos(2*Math.PI/m),E=Math.sin(2*Math.PI/m),K=0;K<g;K+=m)for(var z=h,q=E,G=0;G<R;G++){var ne=l[K+G],re=d[K+G],_e=l[K+G+R],ae=d[K+G+R],de=z*_e-q*ae;ae=z*ae+q*_e,_e=de,l[K+G]=ne+_e,d[K+G]=re+ae,l[K+G+R]=ne-_e,d[K+G+R]=re-ae,G!==m&&(de=h*z-E*q,q=h*q+E*z,z=de)}},$.prototype.guessLen13b=function(a,c){var l=Math.max(c,a)|1,d=l&1,g=0;for(l=l/2|0;l;l=l>>>1)g++;return 1<<g+1+d},$.prototype.conjugate=function(a,c,l){if(!(l<=1))for(var d=0;d<l/2;d++){var g=a[d];a[d]=a[l-d-1],a[l-d-1]=g,g=c[d],c[d]=-c[l-d-1],c[l-d-1]=-g}},$.prototype.normalize13b=function(a,c){for(var l=0,d=0;d<c/2;d++){var g=Math.round(a[2*d+1]/c)*8192+Math.round(a[2*d]/c)+l;a[d]=g&67108863,g<67108864?l=0:l=g/67108864|0}return a},$.prototype.convert13b=function(a,c,l,d){for(var g=0,y=0;y<c;y++)g=g+(a[y]|0),l[2*y]=g&8191,g=g>>>13,l[2*y+1]=g&8191,g=g>>>13;for(y=2*c;y<d;++y)l[y]=0;t(g===0),t((g&-8192)===0)},$.prototype.stub=function(a){for(var c=new Array(a),l=0;l<a;l++)c[l]=0;return c},$.prototype.mulp=function(a,c,l){var d=2*this.guessLen13b(a.length,c.length),g=this.makeRBT(d),y=this.stub(d),R=new Array(d),m=new Array(d),h=new Array(d),E=new Array(d),K=new Array(d),z=new Array(d),q=l.words;q.length=d,this.convert13b(a.words,a.length,R,d),this.convert13b(c.words,c.length,E,d),this.transform(R,y,m,h,d,g),this.transform(E,y,K,z,d,g);for(var G=0;G<d;G++){var ne=m[G]*K[G]-h[G]*z[G];h[G]=m[G]*z[G]+h[G]*K[G],m[G]=ne}return this.conjugate(m,h,d),this.transform(m,h,q,y,d,g),this.conjugate(q,y,d),this.normalize13b(q,d),l.negative=a.negative^c.negative,l.length=a.length+c.length,l._strip()},i.prototype.mul=function(a){var c=new i(null);return c.words=new Array(this.length+a.length),this.mulTo(a,c)},i.prototype.mulf=function(a){var c=new i(null);return c.words=new Array(this.length+a.length),F(this,a,c)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var c=a<0;c&&(a=-a),t(typeof a=="number"),t(a<67108864);for(var l=0,d=0;d<this.length;d++){var g=(this.words[d]|0)*a,y=(g&67108863)+(l&67108863);l>>=26,l+=g/67108864|0,l+=y>>>26,this.words[d]=y&67108863}return l!==0&&(this.words[d]=l,this.length++),this.length=a===0?1:this.length,c?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var c=T(a);if(c.length===0)return new i(1);for(var l=this,d=0;d<c.length&&c[d]===0;d++,l=l.sqr());if(++d<c.length)for(var g=l.sqr();d<c.length;d++,g=g.sqr())c[d]!==0&&(l=l.mul(g));return l},i.prototype.iushln=function(a){t(typeof a=="number"&&a>=0);var c=a%26,l=(a-c)/26,d=67108863>>>26-c<<26-c,g;if(c!==0){var y=0;for(g=0;g<this.length;g++){var R=this.words[g]&d,m=(this.words[g]|0)-R<<c;this.words[g]=m|y,y=R>>>26-c}y&&(this.words[g]=y,this.length++)}if(l!==0){for(g=this.length-1;g>=0;g--)this.words[g+l]=this.words[g];for(g=0;g<l;g++)this.words[g]=0;this.length+=l}return this._strip()},i.prototype.ishln=function(a){return t(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,c,l){t(typeof a=="number"&&a>=0);var d;c?d=(c-c%26)/26:d=0;var g=a%26,y=Math.min((a-g)/26,this.length),R=67108863^67108863>>>g<<g,m=l;if(d-=y,d=Math.max(0,d),m){for(var h=0;h<y;h++)m.words[h]=this.words[h];m.length=y}if(y!==0)if(this.length>y)for(this.length-=y,h=0;h<this.length;h++)this.words[h]=this.words[h+y];else this.words[0]=0,this.length=1;var E=0;for(h=this.length-1;h>=0&&(E!==0||h>=d);h--){var K=this.words[h]|0;this.words[h]=E<<26-g|K>>>g,E=K&R}return m&&E!==0&&(m.words[m.length++]=E),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,c,l){return t(this.negative===0),this.iushrn(a,c,l)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){t(typeof a=="number"&&a>=0);var c=a%26,l=(a-c)/26,d=1<<c;if(this.length<=l)return!1;var g=this.words[l];return!!(g&d)},i.prototype.imaskn=function(a){t(typeof a=="number"&&a>=0);var c=a%26,l=(a-c)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(c!==0&&l++,this.length=Math.min(l,this.length),c!==0){var d=67108863^67108863>>>c<<c;this.words[this.length-1]&=d}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return t(typeof a=="number"),t(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(a){if(t(typeof a=="number"),t(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,c,l){var d=a.length+l,g;this._expand(d);var y,R=0;for(g=0;g<a.length;g++){y=(this.words[g+l]|0)+R;var m=(a.words[g]|0)*c;y-=m&67108863,R=(y>>26)-(m/67108864|0),this.words[g+l]=y&67108863}for(;g<this.length-l;g++)y=(this.words[g+l]|0)+R,R=y>>26,this.words[g+l]=y&67108863;if(R===0)return this._strip();for(t(R===-1),R=0,g=0;g<this.length;g++)y=-(this.words[g]|0)+R,R=y>>26,this.words[g]=y&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,c){var l=this.length-a.length,d=this.clone(),g=a,y=g.words[g.length-1]|0,R=this._countBits(y);l=26-R,l!==0&&(g=g.ushln(l),d.iushln(l),y=g.words[g.length-1]|0);var m=d.length-g.length,h;if(c!=="mod"){h=new i(null),h.length=m+1,h.words=new Array(h.length);for(var E=0;E<h.length;E++)h.words[E]=0}var K=d.clone()._ishlnsubmul(g,1,m);K.negative===0&&(d=K,h&&(h.words[m]=1));for(var z=m-1;z>=0;z--){var q=(d.words[g.length+z]|0)*67108864+(d.words[g.length+z-1]|0);for(q=Math.min(q/y|0,67108863),d._ishlnsubmul(g,q,z);d.negative!==0;)q--,d.negative=0,d._ishlnsubmul(g,1,z),d.isZero()||(d.negative^=1);h&&(h.words[z]=q)}return h&&h._strip(),d._strip(),c!=="div"&&l!==0&&d.iushrn(l),{div:h||null,mod:d}},i.prototype.divmod=function(a,c,l){if(t(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var d,g,y;return this.negative!==0&&a.negative===0?(y=this.neg().divmod(a,c),c!=="mod"&&(d=y.div.neg()),c!=="div"&&(g=y.mod.neg(),l&&g.negative!==0&&g.iadd(a)),{div:d,mod:g}):this.negative===0&&a.negative!==0?(y=this.divmod(a.neg(),c),c!=="mod"&&(d=y.div.neg()),{div:d,mod:y.mod}):this.negative&a.negative?(y=this.neg().divmod(a.neg(),c),c!=="div"&&(g=y.mod.neg(),l&&g.negative!==0&&g.isub(a)),{div:y.div,mod:g}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?c==="div"?{div:this.divn(a.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,c)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var c=this.divmod(a);if(c.mod.isZero())return c.div;var l=c.div.negative!==0?c.mod.isub(a):c.mod,d=a.ushrn(1),g=a.andln(1),y=l.cmp(d);return y<0||g===1&&y===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modrn=function(a){var c=a<0;c&&(a=-a),t(a<=67108863);for(var l=(1<<26)%a,d=0,g=this.length-1;g>=0;g--)d=(l*d+(this.words[g]|0))%a;return c?-d:d},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var c=a<0;c&&(a=-a),t(a<=67108863);for(var l=0,d=this.length-1;d>=0;d--){var g=(this.words[d]|0)+l*67108864;this.words[d]=g/a|0,l=g%a}return this._strip(),c?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){t(a.negative===0),t(!a.isZero());var c=this,l=a.clone();c.negative!==0?c=c.umod(a):c=c.clone();for(var d=new i(1),g=new i(0),y=new i(0),R=new i(1),m=0;c.isEven()&&l.isEven();)c.iushrn(1),l.iushrn(1),++m;for(var h=l.clone(),E=c.clone();!c.isZero();){for(var K=0,z=1;!(c.words[0]&z)&&K<26;++K,z<<=1);if(K>0)for(c.iushrn(K);K-- >0;)(d.isOdd()||g.isOdd())&&(d.iadd(h),g.isub(E)),d.iushrn(1),g.iushrn(1);for(var q=0,G=1;!(l.words[0]&G)&&q<26;++q,G<<=1);if(q>0)for(l.iushrn(q);q-- >0;)(y.isOdd()||R.isOdd())&&(y.iadd(h),R.isub(E)),y.iushrn(1),R.iushrn(1);c.cmp(l)>=0?(c.isub(l),d.isub(y),g.isub(R)):(l.isub(c),y.isub(d),R.isub(g))}return{a:y,b:R,gcd:l.iushln(m)}},i.prototype._invmp=function(a){t(a.negative===0),t(!a.isZero());var c=this,l=a.clone();c.negative!==0?c=c.umod(a):c=c.clone();for(var d=new i(1),g=new i(0),y=l.clone();c.cmpn(1)>0&&l.cmpn(1)>0;){for(var R=0,m=1;!(c.words[0]&m)&&R<26;++R,m<<=1);if(R>0)for(c.iushrn(R);R-- >0;)d.isOdd()&&d.iadd(y),d.iushrn(1);for(var h=0,E=1;!(l.words[0]&E)&&h<26;++h,E<<=1);if(h>0)for(l.iushrn(h);h-- >0;)g.isOdd()&&g.iadd(y),g.iushrn(1);c.cmp(l)>=0?(c.isub(l),d.isub(g)):(l.isub(c),g.isub(d))}var K;return c.cmpn(1)===0?K=d:K=g,K.cmpn(0)<0&&K.iadd(a),K},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var c=this.clone(),l=a.clone();c.negative=0,l.negative=0;for(var d=0;c.isEven()&&l.isEven();d++)c.iushrn(1),l.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;l.isEven();)l.iushrn(1);var g=c.cmp(l);if(g<0){var y=c;c=l,l=y}else if(g===0||l.cmpn(1)===0)break;c.isub(l)}while(!0);return l.iushln(d)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){t(typeof a=="number");var c=a%26,l=(a-c)/26,d=1<<c;if(this.length<=l)return this._expand(l+1),this.words[l]|=d,this;for(var g=d,y=l;g!==0&&y<this.length;y++){var R=this.words[y]|0;R+=g,g=R>>>26,R&=67108863,this.words[y]=R}return g!==0&&(this.words[y]=g,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var c=a<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var l;if(this.length>1)l=1;else{c&&(a=-a),t(a<=67108863,"Number is too big");var d=this.words[0]|0;l=d===a?0:d<a?-1:1}return this.negative!==0?-l|0:l},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var c=this.ucmp(a);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var c=0,l=this.length-1;l>=0;l--){var d=this.words[l]|0,g=a.words[l]|0;if(d!==g){d<g?c=-1:d>g&&(c=1);break}}return c},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new k(a)},i.prototype.toRed=function(a){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return t(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return t(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Q={k256:null,p224:null,p192:null,p25519:null};function X(p,a){this.name=p,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}X.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},X.prototype.ireduce=function(a){var c=a,l;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),l=c.bitLength();while(l>this.n);var d=l<this.n?-1:c.ucmp(this.p);return d===0?(c.words[0]=0,c.length=1):d>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},X.prototype.split=function(a,c){a.iushrn(this.n,0,c)},X.prototype.imulK=function(a){return a.imul(this.k)};function te(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(te,X),te.prototype.split=function(a,c){for(var l=4194303,d=Math.min(a.length,9),g=0;g<d;g++)c.words[g]=a.words[g];if(c.length=d,a.length<=9){a.words[0]=0,a.length=1;return}var y=a.words[9];for(c.words[c.length++]=y&l,g=10;g<a.length;g++){var R=a.words[g]|0;a.words[g-10]=(R&l)<<4|y>>>22,y=R}y>>>=22,a.words[g-10]=y,y===0&&a.length>10?a.length-=10:a.length-=9},te.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var c=0,l=0;l<a.length;l++){var d=a.words[l]|0;c+=d*977,a.words[l]=c&67108863,c=d*64+(c/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function b(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(b,X);function w(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(w,X);function x(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(x,X),x.prototype.imulK=function(a){for(var c=0,l=0;l<a.length;l++){var d=(a.words[l]|0)*19+c,g=d&67108863;d>>>=26,a.words[l]=g,c=d}return c!==0&&(a.words[a.length++]=c),a},i._prime=function(a){if(Q[a])return Q[a];var c;if(a==="k256")c=new te;else if(a==="p224")c=new b;else if(a==="p192")c=new w;else if(a==="p25519")c=new x;else throw new Error("Unknown prime "+a);return Q[a]=c,c};function k(p){if(typeof p=="string"){var a=i._prime(p);this.m=a.p,this.prime=a}else t(p.gtn(1),"modulus must be greater than 1"),this.m=p,this.prime=null}k.prototype._verify1=function(a){t(a.negative===0,"red works only with positives"),t(a.red,"red works only with red numbers")},k.prototype._verify2=function(a,c){t((a.negative|c.negative)===0,"red works only with positives"),t(a.red&&a.red===c.red,"red works only with red numbers")},k.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(_(a,a.umod(this.m)._forceRed(this)),a)},k.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},k.prototype.add=function(a,c){this._verify2(a,c);var l=a.add(c);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},k.prototype.iadd=function(a,c){this._verify2(a,c);var l=a.iadd(c);return l.cmp(this.m)>=0&&l.isub(this.m),l},k.prototype.sub=function(a,c){this._verify2(a,c);var l=a.sub(c);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},k.prototype.isub=function(a,c){this._verify2(a,c);var l=a.isub(c);return l.cmpn(0)<0&&l.iadd(this.m),l},k.prototype.shl=function(a,c){return this._verify1(a),this.imod(a.ushln(c))},k.prototype.imul=function(a,c){return this._verify2(a,c),this.imod(a.imul(c))},k.prototype.mul=function(a,c){return this._verify2(a,c),this.imod(a.mul(c))},k.prototype.isqr=function(a){return this.imul(a,a.clone())},k.prototype.sqr=function(a){return this.mul(a,a)},k.prototype.sqrt=function(a){if(a.isZero())return a.clone();var c=this.m.andln(3);if(t(c%2===1),c===3){var l=this.m.add(new i(1)).iushrn(2);return this.pow(a,l)}for(var d=this.m.subn(1),g=0;!d.isZero()&&d.andln(1)===0;)g++,d.iushrn(1);t(!d.isZero());var y=new i(1).toRed(this),R=y.redNeg(),m=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new i(2*h*h).toRed(this);this.pow(h,m).cmp(R)!==0;)h.redIAdd(R);for(var E=this.pow(h,d),K=this.pow(a,d.addn(1).iushrn(1)),z=this.pow(a,d),q=g;z.cmp(y)!==0;){for(var G=z,ne=0;G.cmp(y)!==0;ne++)G=G.redSqr();t(ne<q);var re=this.pow(E,new i(1).iushln(q-ne-1));K=K.redMul(re),E=re.redSqr(),z=z.redMul(E),q=ne}return K},k.prototype.invm=function(a){var c=a._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},k.prototype.pow=function(a,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return a.clone();var l=4,d=new Array(1<<l);d[0]=new i(1).toRed(this),d[1]=a;for(var g=2;g<d.length;g++)d[g]=this.mul(d[g-1],a);var y=d[0],R=0,m=0,h=c.bitLength()%26;for(h===0&&(h=26),g=c.length-1;g>=0;g--){for(var E=c.words[g],K=h-1;K>=0;K--){var z=E>>K&1;if(y!==d[0]&&(y=this.sqr(y)),z===0&&R===0){m=0;continue}R<<=1,R|=z,m++,!(m!==l&&(g!==0||K!==0))&&(y=this.mul(y,d[R]),m=0,R=0)}h=26}return y},k.prototype.convertTo=function(a){var c=a.umod(this.m);return c===a?c.clone():c},k.prototype.convertFrom=function(a){var c=a.clone();return c.red=null,c},i.mont=function(a){return new N(a)};function N(p){k.call(this,p),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(N,k),N.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},N.prototype.convertFrom=function(a){var c=this.imod(a.mul(this.rinv));return c.red=null,c},N.prototype.imul=function(a,c){if(a.isZero()||c.isZero())return a.words[0]=0,a.length=1,a;var l=a.imul(c),d=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(d).iushrn(this.shift),y=g;return g.cmp(this.m)>=0?y=g.isub(this.m):g.cmpn(0)<0&&(y=g.iadd(this.m)),y._forceRed(this)},N.prototype.mul=function(a,c){if(a.isZero()||c.isZero())return new i(0)._forceRed(this);var l=a.mul(c),d=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(d).iushrn(this.shift),y=g;return g.cmp(this.m)>=0?y=g.isub(this.m):g.cmpn(0)<0&&(y=g.iadd(this.m)),y._forceRed(this)},N.prototype.invm=function(a){var c=this.imod(a._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(typeof ca>"u"||ca,nf)});var af=kt((fa,sf)=>{var Xi=Bn(),cr=Xi.Buffer;function of(r,e){for(var t in r)e[t]=r[t]}cr.from&&cr.alloc&&cr.allocUnsafe&&cr.allocUnsafeSlow?sf.exports=Xi:(of(Xi,fa),fa.Buffer=pn);function pn(r,e,t){return cr(r,e,t)}pn.prototype=Object.create(cr.prototype);of(cr,pn);pn.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return cr(r,e,t)};pn.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=cr(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};pn.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return cr(r)};pn.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return Xi.SlowBuffer(r)}});var uf=kt((bb,cf)=>{"use strict";var Zi=af().Buffer;function t0(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),o=i.charCodeAt(0);if(e[o]!==255)throw new TypeError(i+" is ambiguous");e[o]=n}var s=r.length,u=r.charAt(0),f=Math.log(s)/Math.log(256),_=Math.log(256)/Math.log(s);function S(v){if((Array.isArray(v)||v instanceof Uint8Array)&&(v=Zi.from(v)),!Zi.isBuffer(v))throw new TypeError("Expected Buffer");if(v.length===0)return"";for(var B=0,T=0,P=0,M=v.length;P!==M&&v[P]===0;)P++,B++;for(var L=(M-P)*_+1>>>0,F=new Uint8Array(L);P!==M;){for(var $=v[P],Q=0,X=L-1;($!==0||Q<T)&&X!==-1;X--,Q++)$+=256*F[X]>>>0,F[X]=$%s>>>0,$=$/s>>>0;if($!==0)throw new Error("Non-zero carry");T=Q,P++}for(var te=L-T;te!==L&&F[te]===0;)te++;for(var b=u.repeat(B);te<L;++te)b+=r.charAt(F[te]);return b}function A(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return Zi.alloc(0);for(var B=0,T=0,P=0;v[B]===u;)T++,B++;for(var M=(v.length-B)*f+1>>>0,L=new Uint8Array(M);B<v.length;){var F=v.charCodeAt(B);if(F>255)return;var $=e[F];if($===255)return;for(var Q=0,X=M-1;($!==0||Q<P)&&X!==-1;X--,Q++)$+=s*L[X]>>>0,L[X]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");P=Q,B++}for(var te=M-P;te!==M&&L[te]===0;)te++;var b=Zi.allocUnsafe(T+(M-te));b.fill(0,0,T);for(var w=T;te!==M;)b[w++]=L[te++];return b}function I(v){var B=A(v);if(B)return B;throw new Error("Non-base"+s+" character")}return{encode:S,decodeUnsafe:A,decode:I}}cf.exports=t0});var la=kt((Eb,ff)=>{var r0=uf(),n0="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";ff.exports=r0(n0)});var lf=kt(ga=>{"use strict";function Sr(r,e,t){return e<=r&&r<=t}function ro(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function i0(r){for(var e=String(r),t=e.length,n=0,i=[];n<t;){var o=e.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===t-1)i.push(65533);else{var s=r.charCodeAt(n+1);if(56320<=s&&s<=57343){var u=o&1023,f=s&1023;i.push(65536+(u<<10)+f),n+=1}else i.push(65533)}n+=1}return i}function o0(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var Ji=-1;function pa(r){this.tokens=[].slice.call(r)}pa.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Ji},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var zn=-1;function da(r,e){if(r)throw TypeError("Decoder error");return e||65533}var Qi="utf-8";function eo(r,e){if(!(this instanceof eo))return new eo(r,e);if(r=r!==void 0?String(r).toLowerCase():Qi,r!==Qi)throw new Error("Encoding not supported. Only utf-8 is supported");e=ro(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}eo.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=ro(t),this._streaming||(this._decoder=new s0({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var i=new pa(n),o=[],s;!i.endOfStream()&&(s=this._decoder.handler(i,i.read()),s!==zn);)s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s));if(!this._streaming){do{if(s=this._decoder.handler(i,i.read()),s===zn)break;s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s))}while(!i.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),o0(o)}};function to(r,e){if(!(this instanceof to))return new to(r,e);if(r=r!==void 0?String(r).toLowerCase():Qi,r!==Qi)throw new Error("Encoding not supported. Only utf-8 is supported");e=ro(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}to.prototype={encode:function(e,t){e=e?String(e):"",t=ro(t),this._streaming||(this._encoder=new a0(this._options)),this._streaming=!!t.stream;for(var n=[],i=new pa(i0(e)),o;!i.endOfStream()&&(o=this._encoder.handler(i,i.read()),o!==zn);)Array.isArray(o)?n.push.apply(n,o):n.push(o);if(!this._streaming){for(;o=this._encoder.handler(i,i.read()),o!==zn;)Array.isArray(o)?n.push.apply(n,o):n.push(o);this._encoder=null}return new Uint8Array(n)}};function s0(r){var e=r.fatal,t=0,n=0,i=0,o=128,s=191;this.handler=function(u,f){if(f===Ji&&i!==0)return i=0,da(e);if(f===Ji)return zn;if(i===0){if(Sr(f,0,127))return f;if(Sr(f,194,223))i=1,t=f-192;else if(Sr(f,224,239))f===224&&(o=160),f===237&&(s=159),i=2,t=f-224;else if(Sr(f,240,244))f===240&&(o=144),f===244&&(s=143),i=3,t=f-240;else return da(e);return t=t<<6*i,null}if(!Sr(f,o,s))return t=i=n=0,o=128,s=191,u.prepend(f),da(e);if(o=128,s=191,n+=1,t+=f-128<<6*(i-n),n!==i)return null;var _=t;return t=i=n=0,_}}function a0(r){var e=r.fatal;this.handler=function(t,n){if(n===Ji)return zn;if(Sr(n,0,127))return n;var i,o;Sr(n,128,2047)?(i=1,o=192):Sr(n,2048,65535)?(i=2,o=224):Sr(n,65536,1114111)&&(i=3,o=240);for(var s=[(n>>6*i)+o];i>0;){var u=n>>6*(i-1);s.push(128|u&63),i-=1}return s}}ga.TextEncoder=to;ga.TextDecoder=eo});var mf=kt(be=>{"use strict";var c0=be&&be.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),u0=be&&be.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),ur=be&&be.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(s=r[u])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},f0=be&&be.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&c0(e,r,t);return u0(e,r),e},hf=be&&be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(be,"__esModule",{value:!0});be.deserializeUnchecked=be.deserialize=be.serialize=be.BinaryReader=be.BinaryWriter=be.BorshError=be.baseDecode=be.baseEncode=void 0;var Vr=hf(ua()),df=hf(la()),l0=f0(lf()),h0=typeof TextDecoder!="function"?l0.TextDecoder:TextDecoder,d0=new h0("utf-8",{fatal:!0});function p0(r){return typeof r=="string"&&(r=Buffer.from(r,"utf8")),df.default.encode(Buffer.from(r))}be.baseEncode=p0;function g0(r){return Buffer.from(df.default.decode(r))}be.baseDecode=g0;var ma=1024,bt=class extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};be.BorshError=bt;var no=class{constructor(){this.buf=Buffer.alloc(ma),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(ma)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Vr.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Vr.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Vr.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Vr.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(ma)]),this.length+=e.length}writeString(e){this.maybeResize();let t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(let n of e)this.maybeResize(),t(n)}toArray(){return this.buf.subarray(0,this.length)}};be.BinaryWriter=no;function fr(r,e,t){let n=t.value;t.value=function(...i){try{return n.apply(this,i)}catch(o){if(o instanceof RangeError){let s=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(s)>=0)throw new bt("Reached the end of buffer when deserializing")}throw o}}}var Lt=class{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new Vr.default(e,"le")}readU128(){let e=this.readBuffer(16);return new Vr.default(e,"le")}readU256(){let e=this.readBuffer(32);return new Vr.default(e,"le")}readU512(){let e=this.readBuffer(64);return new Vr.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new bt(`Expected buffer length ${e} isn't within bounds`);let t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){let e=this.readU32(),t=this.readBuffer(e);try{return d0.decode(t)}catch(n){throw new bt(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let t=this.readU32(),n=Array();for(let i=0;i<t;++i)n.push(e());return n}};ur([fr],Lt.prototype,"readU8",null);ur([fr],Lt.prototype,"readU16",null);ur([fr],Lt.prototype,"readU32",null);ur([fr],Lt.prototype,"readU64",null);ur([fr],Lt.prototype,"readU128",null);ur([fr],Lt.prototype,"readU256",null);ur([fr],Lt.prototype,"readU512",null);ur([fr],Lt.prototype,"readString",null);ur([fr],Lt.prototype,"readFixedArray",null);ur([fr],Lt.prototype,"readArray",null);be.BinaryReader=Lt;function pf(r){return r.charAt(0).toUpperCase()+r.slice(1)}function gn(r,e,t,n,i){try{if(typeof n=="string")i[`write${pf(n)}`](t);else if(n instanceof Array)if(typeof n[0]=="number"){if(t.length!==n[0])throw new bt(`Expecting byte array of length ${n[0]}, but got ${t.length} bytes`);i.writeFixedArray(t)}else if(n.length===2&&typeof n[1]=="number"){if(t.length!==n[1])throw new bt(`Expecting byte array of length ${n[1]}, but got ${t.length} bytes`);for(let o=0;o<n[1];o++)gn(r,null,t[o],n[0],i)}else i.writeArray(t,o=>{gn(r,e,o,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{t==null?i.writeU8(0):(i.writeU8(1),gn(r,e,t,n.type,i));break}case"map":{i.writeU32(t.size),t.forEach((o,s)=>{gn(r,e,s,n.key,i),gn(r,e,o,n.value,i)});break}default:throw new bt(`FieldType ${n} unrecognized`)}else gf(r,t,i)}catch(o){throw o instanceof bt&&o.addToFieldPath(e),o}}function gf(r,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}let n=r.get(e.constructor);if(!n)throw new bt(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,o])=>{gn(r,i,e[i],o,t)});else if(n.kind==="enum"){let i=e[n.field];for(let o=0;o<n.values.length;++o){let[s,u]=n.values[o];if(s===i){t.writeU8(o),gn(r,s,e[s],u,t);break}}}else throw new bt(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function m0(r,e,t=no){let n=new t;return gf(r,e,n),n.toArray()}be.serialize=m0;function mn(r,e,t,n){try{if(typeof t=="string")return n[`read${pf(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return n.readFixedArray(t[0]);if(typeof t[1]=="number"){let i=[];for(let o=0;o<t[1];o++)i.push(mn(r,null,t[0],n));return i}else return n.readArray(()=>mn(r,e,t[0],n))}if(t.kind==="option")return n.readU8()?mn(r,e,t.type,n):void 0;if(t.kind==="map"){let i=new Map,o=n.readU32();for(let s=0;s<o;s++){let u=mn(r,e,t.key,n),f=mn(r,e,t.value,n);i.set(u,f)}return i}return ya(r,t,n)}catch(i){throw i instanceof bt&&i.addToFieldPath(e),i}}function ya(r,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);let n=r.get(e);if(!n)throw new bt(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){let i={};for(let[o,s]of r.get(e).fields)i[o]=mn(r,o,s,t);return new e(i)}if(n.kind==="enum"){let i=t.readU8();if(i>=n.values.length)throw new bt(`Enum index: ${i} is out of range`);let[o,s]=n.values[i],u=mn(r,o,s,t);return new e({[o]:u})}throw new bt(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function y0(r,e,t,n=Lt){let i=new n(t),o=ya(r,e,i);if(i.offset<t.length)throw new bt(`Unexpected ${t.length-i.offset} bytes after deserialized data`);return o}be.deserialize=y0;function _0(r,e,t,n=Lt){let i=new n(t);return ya(r,e,i)}be.deserializeUnchecked=_0});var lr=kt(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.s16=U.s8=U.nu64be=U.u48be=U.u40be=U.u32be=U.u24be=U.u16be=U.nu64=U.u48=U.u40=U.u32=U.u24=U.u16=U.u8=U.offset=U.greedy=U.Constant=U.UTF8=U.CString=U.Blob=U.Boolean=U.BitField=U.BitStructure=U.VariantLayout=U.Union=U.UnionLayoutDiscriminator=U.UnionDiscriminator=U.Structure=U.Sequence=U.DoubleBE=U.Double=U.FloatBE=U.Float=U.NearInt64BE=U.NearInt64=U.NearUInt64BE=U.NearUInt64=U.IntBE=U.Int=U.UIntBE=U.UInt=U.OffsetLayout=U.GreedyCount=U.ExternalLayout=U.bindConstructorLayout=U.nameWithProperty=U.Layout=U.uint8ArrayToBuffer=U.checkUint8Array=void 0;U.constant=U.utf8=U.cstr=U.blob=U.unionLayoutDiscriminator=U.union=U.seq=U.bits=U.struct=U.f64be=U.f64=U.f32be=U.f32=U.ns64be=U.s48be=U.s40be=U.s32be=U.s24be=U.s16be=U.ns64=U.s48=U.s40=U.s32=U.s24=void 0;var wa=Bn();function qn(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}U.checkUint8Array=qn;function pe(r){return qn(r),wa.Buffer.from(r.buffer,r.byteOffset,r.length)}U.uint8ArrayToBuffer=pe;var ge=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};U.Layout=ge;function ba(r,e){return e.property?r+"["+e.property+"]":r}U.nameWithProperty=ba;function w0(r,e){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof ge))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=e,e.boundConstructor_=r,e.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(t,n){return e.encode(this,t,n)},writable:!0}),Object.defineProperty(r,"decode",{value(t,n){return e.decode(t,n)},writable:!0})}U.bindConstructorLayout=w0;var Rt=class extends ge{isCount(){throw new Error("ExternalLayout is abstract")}};U.ExternalLayout=Rt;var io=class extends Rt{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){qn(e);let n=e.length-t;return Math.floor(n/this.elementSpan)}encode(e,t,n){return 0}};U.GreedyCount=io;var di=class extends Rt{constructor(e,t=0,n){if(!(e instanceof ge))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Ut||this.layout instanceof Kt}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,n=0){return this.layout.encode(e,t,n+this.offset)}};U.OffsetLayout=di;var Ut=class extends ge{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return pe(e).readUIntLE(t,this.span)}encode(e,t,n=0){return pe(t).writeUIntLE(e,n,this.span),this.span}};U.UInt=Ut;var Kt=class extends ge{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return pe(e).readUIntBE(t,this.span)}encode(e,t,n=0){return pe(t).writeUIntBE(e,n,this.span),this.span}};U.UIntBE=Kt;var Ar=class extends ge{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return pe(e).readIntLE(t,this.span)}encode(e,t,n=0){return pe(t).writeIntLE(e,n,this.span),this.span}};U.Int=Ar;var Hr=class extends ge{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return pe(e).readIntBE(t,this.span)}encode(e,t,n=0){return pe(t).writeIntBE(e,n,this.span),this.span}};U.IntBE=Hr;var _a=Math.pow(2,32);function Ro(r){let e=Math.floor(r/_a),t=r-e*_a;return{hi32:e,lo32:t}}function So(r,e){return r*_a+e}var oo=class extends ge{constructor(e){super(8,e)}decode(e,t=0){let n=pe(e),i=n.readUInt32LE(t),o=n.readUInt32LE(t+4);return So(o,i)}encode(e,t,n=0){let i=Ro(e),o=pe(t);return o.writeUInt32LE(i.lo32,n),o.writeUInt32LE(i.hi32,n+4),8}};U.NearUInt64=oo;var so=class extends ge{constructor(e){super(8,e)}decode(e,t=0){let n=pe(e),i=n.readUInt32BE(t),o=n.readUInt32BE(t+4);return So(i,o)}encode(e,t,n=0){let i=Ro(e),o=pe(t);return o.writeUInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};U.NearUInt64BE=so;var ao=class extends ge{constructor(e){super(8,e)}decode(e,t=0){let n=pe(e),i=n.readUInt32LE(t),o=n.readInt32LE(t+4);return So(o,i)}encode(e,t,n=0){let i=Ro(e),o=pe(t);return o.writeUInt32LE(i.lo32,n),o.writeInt32LE(i.hi32,n+4),8}};U.NearInt64=ao;var co=class extends ge{constructor(e){super(8,e)}decode(e,t=0){let n=pe(e),i=n.readInt32BE(t),o=n.readUInt32BE(t+4);return So(i,o)}encode(e,t,n=0){let i=Ro(e),o=pe(t);return o.writeInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};U.NearInt64BE=co;var uo=class extends ge{constructor(e){super(4,e)}decode(e,t=0){return pe(e).readFloatLE(t)}encode(e,t,n=0){return pe(t).writeFloatLE(e,n),4}};U.Float=uo;var fo=class extends ge{constructor(e){super(4,e)}decode(e,t=0){return pe(e).readFloatBE(t)}encode(e,t,n=0){return pe(t).writeFloatBE(e,n),4}};U.FloatBE=fo;var lo=class extends ge{constructor(e){super(8,e)}decode(e,t=0){return pe(e).readDoubleLE(t)}encode(e,t,n=0){return pe(t).writeDoubleLE(e,n),8}};U.Double=lo;var ho=class extends ge{constructor(e){super(8,e)}decode(e,t=0){return pe(e).readDoubleBE(t)}encode(e,t,n=0){return pe(t).writeDoubleBE(e,n),8}};U.DoubleBE=ho;var po=class extends ge{constructor(e,t,n){if(!(e instanceof ge))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof Rt&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(t instanceof Rt)&&0<e.span&&(i=t*e.span),super(i,n),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0,i=this.count;if(i instanceof Rt&&(i=i.decode(e,t)),0<this.elementLayout.span)n=i*this.elementLayout.span;else{let o=0;for(;o<i;)n+=this.elementLayout.getSpan(e,t+n),++o}return n}decode(e,t=0){let n=[],i=0,o=this.count;for(o instanceof Rt&&(o=o.decode(e,t));i<o;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),i+=1;return n}encode(e,t,n=0){let i=this.elementLayout,o=e.reduce((s,u)=>s+i.encode(u,t,n+s),0);return this.count instanceof Rt&&this.count.encode(e.length,t,n),o}};U.Sequence=po;var go=class extends ge{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((o,s)=>o&&s instanceof ge,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(let o of e)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((o,s)=>o+s.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((i,o)=>{let s=o.getSpan(e,t);return t+=s,i+s},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t=0){qn(e);let n=this.makeDestinationObject();for(let i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n=0){let i=n,o=0,s=0;for(let u of this.fields){let f=u.span;if(s=0<f?f:0,u.property!==void 0){let _=e[u.property];_!==void 0&&(s=u.encode(_,t,n),0>f&&(f=u.getSpan(t,n)))}o=n,n+=f}return o+s-i}fromArray(e){let t=this.makeDestinationObject();for(let n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(let n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}};U.Structure=go;var pi=class{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,n){throw new Error("UnionDiscriminator is abstract")}};U.UnionDiscriminator=pi;var Kn=class extends pi{constructor(e,t){if(!(e instanceof Rt&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}};U.UnionLayoutDiscriminator=Kn;var gi=class extends ge{constructor(e,t,n){let i;if(e instanceof Ut||e instanceof Kt)i=new Kn(new di(e));else if(e instanceof Rt&&e.isCount())i=new Kn(e);else if(e instanceof pi)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof ge))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let o=-1;t&&(o=t.span,0<=o&&(e instanceof Ut||e instanceof Kt)&&(o+=i.layout.span)),super(o,n),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof Ut||e instanceof Kt,this.defaultLayout=t,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return s(u)},this.configGetSourceVariant=function(u){s=u.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;let n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(let t in this.registry){let n=this.registry[t];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,t=0){let n,i=this.discriminator,o=i.decode(e,t),s=this.registry[o];if(s===void 0){let u=this.defaultLayout,f=0;this.usesPrefixDiscriminator&&(f=i.layout.span),n=this.makeDestinationObject(),n[i.property]=o,n[u.property]=u.decode(e,t+f)}else n=s.decode(e,t);return n}encode(e,t,n=0){let i=this.getSourceVariant(e);if(i===void 0){let o=this.discriminator,s=this.defaultLayout,u=0;return this.usesPrefixDiscriminator&&(u=o.layout.span),o.encode(e[o.property],t,n),u+s.encode(e[s.property],t,n+u)}return i.encode(e,t,n)}addVariant(e,t,n){let i=new mo(this,e,t,n);return this.registry[e]=i,i}getVariant(e,t=0){let n;return e instanceof Uint8Array?n=this.discriminator.decode(e,t):n=e,this.registry[n]}};U.Union=gi;var mo=class extends ge{constructor(e,t,n,i){if(!(e instanceof gi))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof ge))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=n?n.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,i),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,t+n)),n+i}decode(e,t=0){let n=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let o=i;if(this.layout&&(this.layout.encode(e[this.property],t,n+i),o+=this.layout.getSpan(t,n+i),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};U.VariantLayout=mo;function Fn(r){return 0>r&&(r+=4294967296),r}var mi=class extends ge{constructor(e,t,n){if(!(e instanceof Ut||e instanceof Kt))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&n===void 0&&(n=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let i=0;this._packedSetValue=function(o){return i=Fn(o),this},this._packedGetValue=function(){return i}}decode(e,t=0){let n=this.makeDestinationObject(),i=this.word.decode(e,t);this._packedSetValue(i);for(let o of this.fields)o.property!==void 0&&(n[o.property]=o.decode(e));return n}encode(e,t,n=0){let i=this.word.decode(t,n);this._packedSetValue(i);for(let o of this.fields)if(o.property!==void 0){let s=e[o.property];s!==void 0&&o.encode(s)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){let n=new yi(this,e,t);return this.fields.push(n),n}addBoolean(e){let t=new yo(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}};U.BitStructure=mi;var yi=class{constructor(e,t,n){if(!(e instanceof mi))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");let i=8*e.span,o=e.fields.reduce((s,u)=>s+u.bits,0);if(t+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-t),this.wordMask=Fn(this.valueMask<<this.start),this.property=n}decode(e,t){let n=this.container._packedGetValue();return Fn(n&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Fn(e&this.valueMask))throw new TypeError(ba("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),n=Fn(e<<this.start);this.container._packedSetValue(Fn(t&~this.wordMask)|n)}};U.BitField=yi;var yo=class extends yi{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};U.Boolean=yo;var _o=class extends ge{constructor(e,t){if(!(e instanceof Rt&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Rt||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t=0){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),pe(e).slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof Rt&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(ba("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(n+i>t.length)throw new RangeError("encoding overruns Uint8Array");let o=pe(e);return pe(t).write(o.toString("hex"),n,i,"hex"),this.length instanceof Rt&&this.length.encode(i,t,n),i}};U.Blob=_o;var wo=class extends ge{constructor(e){super(-1,e)}getSpan(e,t=0){qn(e);let n=t;for(;n<e.length&&e[n]!==0;)n+=1;return 1+n-t}decode(e,t=0){let n=this.getSpan(e,t);return pe(e).slice(t,t+n-1).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));let i=wa.Buffer.from(e,"utf8"),o=i.length;if(n+o>t.length)throw new RangeError("encoding overruns Buffer");let s=pe(t);return i.copy(s,n),s[n+o]=0,o+1}};U.CString=wo;var bo=class extends ge{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return qn(e),e.length-t}decode(e,t=0){let n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return pe(e).slice(t,t+n).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));let i=wa.Buffer.from(e,"utf8"),o=i.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(n+o>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(pe(t),n),o}};U.UTF8=bo;var Eo=class extends ge{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,n){return 0}};U.Constant=Eo;U.greedy=(r,e)=>new io(r,e);U.offset=(r,e,t)=>new di(r,e,t);U.u8=r=>new Ut(1,r);U.u16=r=>new Ut(2,r);U.u24=r=>new Ut(3,r);U.u32=r=>new Ut(4,r);U.u40=r=>new Ut(5,r);U.u48=r=>new Ut(6,r);U.nu64=r=>new oo(r);U.u16be=r=>new Kt(2,r);U.u24be=r=>new Kt(3,r);U.u32be=r=>new Kt(4,r);U.u40be=r=>new Kt(5,r);U.u48be=r=>new Kt(6,r);U.nu64be=r=>new so(r);U.s8=r=>new Ar(1,r);U.s16=r=>new Ar(2,r);U.s24=r=>new Ar(3,r);U.s32=r=>new Ar(4,r);U.s40=r=>new Ar(5,r);U.s48=r=>new Ar(6,r);U.ns64=r=>new ao(r);U.s16be=r=>new Hr(2,r);U.s24be=r=>new Hr(3,r);U.s32be=r=>new Hr(4,r);U.s40be=r=>new Hr(5,r);U.s48be=r=>new Hr(6,r);U.ns64be=r=>new co(r);U.f32=r=>new uo(r);U.f32be=r=>new fo(r);U.f64=r=>new lo(r);U.f64be=r=>new ho(r);U.struct=(r,e,t)=>new go(r,e,t);U.bits=(r,e,t)=>new mi(r,e,t);U.seq=(r,e,t)=>new po(r,e,t);U.union=(r,e,t)=>new gi(r,e,t);U.unionLayoutDiscriminator=(r,e)=>new Kn(r,e);U.blob=(r,e)=>new _o(r,e);U.cstr=r=>new wo(r);U.utf8=(r,e)=>new bo(r,e);U.constant=(r,e)=>new Eo(r,e)});function bi(){if(!Io&&(Io=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Io))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Io(Ly)}var Io,Ly,Ba=Nt(()=>{Ly=new Uint8Array(16)});var Mf,Pf=Nt(()=>{Mf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Cy(r){return typeof r=="string"&&Mf.test(r)}var Wr,Ei=Nt(()=>{Pf();Wr=Cy});function My(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Et[r[e+0]]+Et[r[e+1]]+Et[r[e+2]]+Et[r[e+3]]+"-"+Et[r[e+4]]+Et[r[e+5]]+"-"+Et[r[e+6]]+Et[r[e+7]]+"-"+Et[r[e+8]]+Et[r[e+9]]+"-"+Et[r[e+10]]+Et[r[e+11]]+Et[r[e+12]]+Et[r[e+13]]+Et[r[e+14]]+Et[r[e+15]]).toLowerCase();if(!Wr(t))throw TypeError("Stringified UUID is invalid");return t}var Et,Oo,Gr,Ri=Nt(()=>{Ei();Et=[];for(Oo=0;Oo<256;++Oo)Et.push((Oo+256).toString(16).substr(1));Gr=My});function Py(r,e,t){var n=e&&t||0,i=e||new Array(16);r=r||{};var o=r.node||Uf,s=r.clockseq!==void 0?r.clockseq:Ta;if(o==null||s==null){var u=r.random||(r.rng||bi)();o==null&&(o=Uf=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),s==null&&(s=Ta=(u[6]<<8|u[7])&16383)}var f=r.msecs!==void 0?r.msecs:Date.now(),_=r.nsecs!==void 0?r.nsecs:Ca+1,S=f-La+(_-Ca)/1e4;if(S<0&&r.clockseq===void 0&&(s=s+1&16383),(S<0||f>La)&&r.nsecs===void 0&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");La=f,Ca=_,Ta=s,f+=122192928e5;var A=((f&268435455)*1e4+_)%4294967296;i[n++]=A>>>24&255,i[n++]=A>>>16&255,i[n++]=A>>>8&255,i[n++]=A&255;var I=f/4294967296*1e4&268435455;i[n++]=I>>>8&255,i[n++]=I&255,i[n++]=I>>>24&15|16,i[n++]=I>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(var v=0;v<6;++v)i[n+v]=o[v];return e||Gr(i)}var Uf,Ta,La,Ca,Df,zf=Nt(()=>{Ba();Ri();La=0,Ca=0;Df=Py});function Uy(r){if(!Wr(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var No,Ma=Nt(()=>{Ei();No=Uy});function Dy(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}function ko(r,e,t){function n(i,o,s,u){if(typeof i=="string"&&(i=Dy(i)),typeof o=="string"&&(o=No(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+i.length);if(f.set(o),f.set(i,o.length),f=t(f),f[6]=f[6]&15|e,f[8]=f[8]&63|128,s){u=u||0;for(var _=0;_<16;++_)s[u+_]=f[_];return s}return Gr(f)}try{n.name=r}catch{}return n.DNS=zy,n.URL=Fy,n}var zy,Fy,Pa=Nt(()=>{Ri();Ma();zy="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Fy="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Ky(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return qy(Vy(Hy(r),r.length*8))}function qy(r){for(var e=[],t=r.length*32,n="0123456789abcdef",i=0;i<t;i+=8){var o=r[i>>5]>>>i%32&255,s=parseInt(n.charAt(o>>>4&15)+n.charAt(o&15),16);e.push(s)}return e}function Ff(r){return(r+64>>>9<<4)+14+1}function Vy(r,e){r[e>>5]|=128<<e%32,r[Ff(e)-1]=e;for(var t=1732584193,n=-271733879,i=-1732584194,o=271733878,s=0;s<r.length;s+=16){var u=t,f=n,_=i,S=o;t=At(t,n,i,o,r[s],7,-680876936),o=At(o,t,n,i,r[s+1],12,-389564586),i=At(i,o,t,n,r[s+2],17,606105819),n=At(n,i,o,t,r[s+3],22,-1044525330),t=At(t,n,i,o,r[s+4],7,-176418897),o=At(o,t,n,i,r[s+5],12,1200080426),i=At(i,o,t,n,r[s+6],17,-1473231341),n=At(n,i,o,t,r[s+7],22,-45705983),t=At(t,n,i,o,r[s+8],7,1770035416),o=At(o,t,n,i,r[s+9],12,-1958414417),i=At(i,o,t,n,r[s+10],17,-42063),n=At(n,i,o,t,r[s+11],22,-1990404162),t=At(t,n,i,o,r[s+12],7,1804603682),o=At(o,t,n,i,r[s+13],12,-40341101),i=At(i,o,t,n,r[s+14],17,-1502002290),n=At(n,i,o,t,r[s+15],22,1236535329),t=xt(t,n,i,o,r[s+1],5,-165796510),o=xt(o,t,n,i,r[s+6],9,-1069501632),i=xt(i,o,t,n,r[s+11],14,643717713),n=xt(n,i,o,t,r[s],20,-373897302),t=xt(t,n,i,o,r[s+5],5,-701558691),o=xt(o,t,n,i,r[s+10],9,38016083),i=xt(i,o,t,n,r[s+15],14,-660478335),n=xt(n,i,o,t,r[s+4],20,-405537848),t=xt(t,n,i,o,r[s+9],5,568446438),o=xt(o,t,n,i,r[s+14],9,-1019803690),i=xt(i,o,t,n,r[s+3],14,-187363961),n=xt(n,i,o,t,r[s+8],20,1163531501),t=xt(t,n,i,o,r[s+13],5,-1444681467),o=xt(o,t,n,i,r[s+2],9,-51403784),i=xt(i,o,t,n,r[s+7],14,1735328473),n=xt(n,i,o,t,r[s+12],20,-1926607734),t=vt(t,n,i,o,r[s+5],4,-378558),o=vt(o,t,n,i,r[s+8],11,-2022574463),i=vt(i,o,t,n,r[s+11],16,1839030562),n=vt(n,i,o,t,r[s+14],23,-35309556),t=vt(t,n,i,o,r[s+1],4,-1530992060),o=vt(o,t,n,i,r[s+4],11,1272893353),i=vt(i,o,t,n,r[s+7],16,-155497632),n=vt(n,i,o,t,r[s+10],23,-1094730640),t=vt(t,n,i,o,r[s+13],4,681279174),o=vt(o,t,n,i,r[s],11,-358537222),i=vt(i,o,t,n,r[s+3],16,-722521979),n=vt(n,i,o,t,r[s+6],23,76029189),t=vt(t,n,i,o,r[s+9],4,-640364487),o=vt(o,t,n,i,r[s+12],11,-421815835),i=vt(i,o,t,n,r[s+15],16,530742520),n=vt(n,i,o,t,r[s+2],23,-995338651),t=It(t,n,i,o,r[s],6,-198630844),o=It(o,t,n,i,r[s+7],10,1126891415),i=It(i,o,t,n,r[s+14],15,-1416354905),n=It(n,i,o,t,r[s+5],21,-57434055),t=It(t,n,i,o,r[s+12],6,1700485571),o=It(o,t,n,i,r[s+3],10,-1894986606),i=It(i,o,t,n,r[s+10],15,-1051523),n=It(n,i,o,t,r[s+1],21,-2054922799),t=It(t,n,i,o,r[s+8],6,1873313359),o=It(o,t,n,i,r[s+15],10,-30611744),i=It(i,o,t,n,r[s+6],15,-1560198380),n=It(n,i,o,t,r[s+13],21,1309151649),t=It(t,n,i,o,r[s+4],6,-145523070),o=It(o,t,n,i,r[s+11],10,-1120210379),i=It(i,o,t,n,r[s+2],15,718787259),n=It(n,i,o,t,r[s+9],21,-343485551),t=Yr(t,u),n=Yr(n,f),i=Yr(i,_),o=Yr(o,S)}return[t,n,i,o]}function Hy(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(Ff(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function Yr(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function $y(r,e){return r<<e|r>>>32-e}function Bo(r,e,t,n,i,o){return Yr($y(Yr(Yr(e,r),Yr(n,o)),i),t)}function At(r,e,t,n,i,o,s){return Bo(e&t|~e&n,r,e,i,o,s)}function xt(r,e,t,n,i,o,s){return Bo(e&n|t&~n,r,e,i,o,s)}function vt(r,e,t,n,i,o,s){return Bo(e^t^n,r,e,i,o,s)}function It(r,e,t,n,i,o,s){return Bo(t^(e|~n),r,e,i,o,s)}var Kf,qf=Nt(()=>{Kf=Ky});var Wy,Vf,Hf=Nt(()=>{Pa();qf();Wy=ko("v3",48,Kf),Vf=Wy});function Gy(r,e,t){r=r||{};var n=r.random||(r.rng||bi)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return Gr(n)}var $f,Wf=Nt(()=>{Ba();Ri();$f=Gy});function Yy(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function Ua(r,e){return r<<e|r>>>32-e}function jy(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var o=r.length/4+2,s=Math.ceil(o/16),u=new Array(s),f=0;f<s;++f){for(var _=new Uint32Array(16),S=0;S<16;++S)_[S]=r[f*64+S*4]<<24|r[f*64+S*4+1]<<16|r[f*64+S*4+2]<<8|r[f*64+S*4+3];u[f]=_}u[s-1][14]=(r.length-1)*8/Math.pow(2,32),u[s-1][14]=Math.floor(u[s-1][14]),u[s-1][15]=(r.length-1)*8&4294967295;for(var A=0;A<s;++A){for(var I=new Uint32Array(80),v=0;v<16;++v)I[v]=u[A][v];for(var B=16;B<80;++B)I[B]=Ua(I[B-3]^I[B-8]^I[B-14]^I[B-16],1);for(var T=t[0],P=t[1],M=t[2],L=t[3],F=t[4],$=0;$<80;++$){var Q=Math.floor($/20),X=Ua(T,5)+Yy(Q,P,M,L)+F+e[Q]+I[$]>>>0;F=L,L=M,M=Ua(P,30)>>>0,P=T,T=X}t[0]=t[0]+T>>>0,t[1]=t[1]+P>>>0,t[2]=t[2]+M>>>0,t[3]=t[3]+L>>>0,t[4]=t[4]+F>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Gf,Yf=Nt(()=>{Gf=jy});var Xy,jf,Xf=Nt(()=>{Pa();Yf();Xy=ko("v5",80,Gf),jf=Xy});var Zf,Jf=Nt(()=>{Zf="00000000-0000-0000-0000-000000000000"});function Zy(r){if(!Wr(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var Qf,el=Nt(()=>{Ei();Qf=Zy});var Da={};Dh(Da,{NIL:()=>Zf,parse:()=>No,stringify:()=>Gr,v1:()=>Df,v3:()=>Vf,v4:()=>$f,v5:()=>jf,validate:()=>Wr,version:()=>Qf});var za=Nt(()=>{zf();Hf();Wf();Xf();Jf();el();Ei();Ri();Ma()});var rl=kt((RE,tl)=>{"use strict";var Jy=(za(),Gc(Da)).v4,Qy=function(r,e,t,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};let i=typeof n.version=="number"?n.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");let o={method:r};if(i===2&&(o.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");o.params=e}if(typeof t>"u"){let s=typeof n.generator=="function"?n.generator:function(){return Jy()};o.id=s(o,n)}else i===2&&t===null?n.notificationIdNull&&(o.id=null):o.id=t;return o};tl.exports=Qy});var il=kt((SE,nl)=>{"use strict";var e_=(za(),Gc(Da)).v4,t_=rl(),Si=function(r,e){if(!(this instanceof Si))return new Si(r,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return e_()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=r};nl.exports=Si;Si.prototype.request=function(r,e,t,n){let i=this,o=null,s=Array.isArray(r)&&typeof e=="function";if(this.options.version===1&&s)throw new TypeError("JSON-RPC 1.0 does not support batching");if(s||!s&&r&&typeof r=="object"&&typeof e=="function")n=e,o=r;else{typeof t=="function"&&(n=t,t=void 0);let _=typeof n=="function";try{o=t_(r,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(S){if(_)return n(S);throw S}if(!_)return o}let f;try{f=JSON.stringify(o,this.options.replacer)}catch(_){return n(_)}return this.callServer(f,function(_,S){i._parseResponse(_,S,n)}),o};Si.prototype._parseResponse=function(r,e,t){if(r){t(r);return}if(!e)return t();let n;try{n=JSON.parse(e,this.options.reviver)}catch(i){return t(i)}if(t.length===3)if(Array.isArray(n)){let i=function(s){return typeof s.error<"u"},o=function(s){return!i(s)};return t(null,n.filter(i),n.filter(o))}else return t(null,n.error,n.result);t(null,n)}});var sl=kt((AE,Fa)=>{"use strict";var r_=Object.prototype.hasOwnProperty,Ct="~";function Ai(){}Object.create&&(Ai.prototype=Object.create(null),new Ai().__proto__||(Ct=!1));function n_(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function ol(r,e,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new n_(t,n||r,i),s=Ct?Ct+e:e;return r._events[s]?r._events[s].fn?r._events[s]=[r._events[s],o]:r._events[s].push(o):(r._events[s]=o,r._eventsCount++),r}function To(r,e){--r._eventsCount===0?r._events=new Ai:delete r._events[e]}function Ot(){this._events=new Ai,this._eventsCount=0}Ot.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)r_.call(t,n)&&e.push(Ct?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Ot.prototype.listeners=function(e){var t=Ct?Ct+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};Ot.prototype.listenerCount=function(e){var t=Ct?Ct+e:e,n=this._events[t];return n?n.fn?1:n.length:0};Ot.prototype.emit=function(e,t,n,i,o,s){var u=Ct?Ct+e:e;if(!this._events[u])return!1;var f=this._events[u],_=arguments.length,S,A;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),_){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,t),!0;case 3:return f.fn.call(f.context,t,n),!0;case 4:return f.fn.call(f.context,t,n,i),!0;case 5:return f.fn.call(f.context,t,n,i,o),!0;case 6:return f.fn.call(f.context,t,n,i,o,s),!0}for(A=1,S=new Array(_-1);A<_;A++)S[A-1]=arguments[A];f.fn.apply(f.context,S)}else{var I=f.length,v;for(A=0;A<I;A++)switch(f[A].once&&this.removeListener(e,f[A].fn,void 0,!0),_){case 1:f[A].fn.call(f[A].context);break;case 2:f[A].fn.call(f[A].context,t);break;case 3:f[A].fn.call(f[A].context,t,n);break;case 4:f[A].fn.call(f[A].context,t,n,i);break;default:if(!S)for(v=1,S=new Array(_-1);v<_;v++)S[v-1]=arguments[v];f[A].fn.apply(f[A].context,S)}}return!0};Ot.prototype.on=function(e,t,n){return ol(this,e,t,n,!1)};Ot.prototype.once=function(e,t,n){return ol(this,e,t,n,!0)};Ot.prototype.removeListener=function(e,t,n,i){var o=Ct?Ct+e:e;if(!this._events[o])return this;if(!t)return To(this,o),this;var s=this._events[o];if(s.fn)s.fn===t&&(!i||s.once)&&(!n||s.context===n)&&To(this,o);else{for(var u=0,f=[],_=s.length;u<_;u++)(s[u].fn!==t||i&&!s[u].once||n&&s[u].context!==n)&&f.push(s[u]);f.length?this._events[o]=f.length===1?f[0]:f:To(this,o)}return this};Ot.prototype.removeAllListeners=function(e){var t;return e?(t=Ct?Ct+e:e,this._events[t]&&To(this,t)):(this._events=new Ai,this._eventsCount=0),this};Ot.prototype.off=Ot.prototype.removeListener;Ot.prototype.addListener=Ot.prototype.on;Ot.prefixed=Ct;Ot.EventEmitter=Ot;typeof Fa<"u"&&(Fa.exports=Ot)});var yh=kt(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});var Jo;function mw(r){{let e=Buffer.from(r);e.reverse();let t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}return Jo.toBigInt(r,!1)}Jn.toBigIntLE=mw;function yw(r){{let e=r.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}return Jo.toBigInt(r,!0)}Jn.toBigIntBE=yw;function _w(r,e){{let t=r.toString(16),n=Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex");return n.reverse(),n}return Jo.fromBigInt(r,Buffer.allocUnsafe(e),!1)}Jn.toBufferLE=_w;function ww(r,e){{let t=r.toString(16);return Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex")}return Jo.fromBigInt(r,Buffer.allocUnsafe(e),!0)}Jn.toBufferBE=ww});var ie=ht(Bn());var an=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function pr(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Cr(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function _t(r,...e){if(!pr(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function Di(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Cr(r.outputLen),Cr(r.blockLen)}function gr(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function zi(r,e){_t(r);let t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function gu(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function Vt(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function Fi(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function er(r,e){return r<<32-e|r>>>e}var yd=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function _d(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function wd(r){for(let e=0;e<r.length;e++)r[e]=_d(r[e]);return r}var zs=yd?r=>r:wd,mu=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",bd=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Ht(r){if(_t(r),mu)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=bd[r[t]];return e}var dr={_0:48,_9:57,A:65,F:70,a:97,f:102};function pu(r){if(r>=dr._0&&r<=dr._9)return r-dr._0;if(r>=dr.A&&r<=dr.F)return r-(dr.A-10);if(r>=dr.a&&r<=dr.f)return r-(dr.a-10)}function cn(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(mu)return Uint8Array.fromHex(r);let e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(t);for(let i=0,o=0;i<t;i++,o+=2){let s=pu(r.charCodeAt(o)),u=pu(r.charCodeAt(o+1));if(s===void 0||u===void 0){let f=r[o]+r[o+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+o)}n[i]=s*16+u}return n}function Fs(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function un(r){return typeof r=="string"&&(r=Fs(r)),_t(r),r}function Bt(...r){let e=0;for(let n=0;n<r.length;n++){let i=r[n];_t(i),e+=i.length}let t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){let o=r[n];t.set(o,i),i+=o.length}return t}var Mr=class{};function ii(r){let e=n=>r().update(un(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function Tn(r=32){if(an&&typeof an.getRandomValues=="function")return an.getRandomValues(new Uint8Array(r));if(an&&typeof an.randomBytes=="function")return Uint8Array.from(an.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function Ed(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(t>>i&o),u=Number(t&o),f=n?4:0,_=n?0:4;r.setUint32(e+f,s,n),r.setUint32(e+_,u,n)}function yu(r,e,t){return r&e^~r&t}function _u(r,e,t){return r&e^r&t^e&t}var oi=class extends Mr{constructor(e,t,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Fi(this.buffer)}update(e){gr(this),e=un(e),_t(e);let{view:t,buffer:n,blockLen:i}=this,o=e.length;for(let s=0;s<o;){let u=Math.min(i-this.pos,o-s);if(u===i){let f=Fi(e);for(;i<=o-s;s+=i)this.process(f,s);continue}n.set(e.subarray(s,s+u),this.pos),this.pos+=u,s+=u,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){gr(this),zi(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;t[s++]=128,Vt(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(n,0),s=0);for(let A=s;A<i;A++)t[A]=0;Ed(n,i-8,BigInt(this.length*8),o),this.process(n,0);let u=Fi(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let _=f/4,S=this.get();if(_>S.length)throw new Error("_sha2: outputLen bigger than state");for(let A=0;A<_;A++)u.setUint32(4*A,S[A],o)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:i,finished:o,destroyed:s,pos:u}=this;return e.destroyed=s,e.finished=o,e.length=i,e.pos=u,i%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}},mr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var wt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var Ki=BigInt(4294967295),wu=BigInt(32);function Rd(r,e=!1){return e?{h:Number(r&Ki),l:Number(r>>wu&Ki)}:{h:Number(r>>wu&Ki)|0,l:Number(r&Ki)|0}}function qi(r,e=!1){let t=r.length,n=new Uint32Array(t),i=new Uint32Array(t);for(let o=0;o<t;o++){let{h:s,l:u}=Rd(r[o],e);[n[o],i[o]]=[s,u]}return[n,i]}var Ks=(r,e,t)=>r>>>t,qs=(r,e,t)=>r<<32-t|e>>>t,fn=(r,e,t)=>r>>>t|e<<32-t,ln=(r,e,t)=>r<<32-t|e>>>t,si=(r,e,t)=>r<<64-t|e>>>t-32,ai=(r,e,t)=>r>>>t-32|e<<64-t;var bu=(r,e,t)=>r<<t|e>>>32-t,Eu=(r,e,t)=>e<<t|r>>>32-t,Ru=(r,e,t)=>e<<t-32|r>>>64-t,Su=(r,e,t)=>r<<t-32|e>>>64-t;function ar(r,e,t,n){let i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}var Au=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),xu=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,vu=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),Iu=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,Ou=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),Nu=(r,e,t,n,i,o)=>e+t+n+i+o+(r/2**32|0)|0;var Ad=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pr=new Uint32Array(64),Vi=class extends oi{constructor(e=32){super(64,e,8,!1),this.A=mr[0]|0,this.B=mr[1]|0,this.C=mr[2]|0,this.D=mr[3]|0,this.E=mr[4]|0,this.F=mr[5]|0,this.G=mr[6]|0,this.H=mr[7]|0}get(){let{A:e,B:t,C:n,D:i,E:o,F:s,G:u,H:f}=this;return[e,t,n,i,o,s,u,f]}set(e,t,n,i,o,s,u,f){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=u|0,this.H=f|0}process(e,t){for(let A=0;A<16;A++,t+=4)Pr[A]=e.getUint32(t,!1);for(let A=16;A<64;A++){let I=Pr[A-15],v=Pr[A-2],B=er(I,7)^er(I,18)^I>>>3,T=er(v,17)^er(v,19)^v>>>10;Pr[A]=T+Pr[A-7]+B+Pr[A-16]|0}let{A:n,B:i,C:o,D:s,E:u,F:f,G:_,H:S}=this;for(let A=0;A<64;A++){let I=er(u,6)^er(u,11)^er(u,25),v=S+I+yu(u,f,_)+Ad[A]+Pr[A]|0,T=(er(n,2)^er(n,13)^er(n,22))+_u(n,i,o)|0;S=_,_=f,f=u,u=s+v|0,s=o,o=i,i=n,n=v+T|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,u=u+this.E|0,f=f+this.F|0,_=_+this.G|0,S=S+this.H|0,this.set(n,i,o,s,u,f,_,S)}roundClean(){Vt(Pr)}destroy(){this.set(0,0,0,0,0,0,0,0),Vt(this.buffer)}};var ku=qi(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),xd=ku[0],vd=ku[1],Ur=new Uint32Array(80),Dr=new Uint32Array(80),Vs=class extends oi{constructor(e=64){super(128,e,16,!1),this.Ah=wt[0]|0,this.Al=wt[1]|0,this.Bh=wt[2]|0,this.Bl=wt[3]|0,this.Ch=wt[4]|0,this.Cl=wt[5]|0,this.Dh=wt[6]|0,this.Dl=wt[7]|0,this.Eh=wt[8]|0,this.El=wt[9]|0,this.Fh=wt[10]|0,this.Fl=wt[11]|0,this.Gh=wt[12]|0,this.Gl=wt[13]|0,this.Hh=wt[14]|0,this.Hl=wt[15]|0}get(){let{Ah:e,Al:t,Bh:n,Bl:i,Ch:o,Cl:s,Dh:u,Dl:f,Eh:_,El:S,Fh:A,Fl:I,Gh:v,Gl:B,Hh:T,Hl:P}=this;return[e,t,n,i,o,s,u,f,_,S,A,I,v,B,T,P]}set(e,t,n,i,o,s,u,f,_,S,A,I,v,B,T,P){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=u|0,this.Dl=f|0,this.Eh=_|0,this.El=S|0,this.Fh=A|0,this.Fl=I|0,this.Gh=v|0,this.Gl=B|0,this.Hh=T|0,this.Hl=P|0}process(e,t){for(let F=0;F<16;F++,t+=4)Ur[F]=e.getUint32(t),Dr[F]=e.getUint32(t+=4);for(let F=16;F<80;F++){let $=Ur[F-15]|0,Q=Dr[F-15]|0,X=fn($,Q,1)^fn($,Q,8)^Ks($,Q,7),te=ln($,Q,1)^ln($,Q,8)^qs($,Q,7),b=Ur[F-2]|0,w=Dr[F-2]|0,x=fn(b,w,19)^si(b,w,61)^Ks(b,w,6),k=ln(b,w,19)^ai(b,w,61)^qs(b,w,6),N=vu(te,k,Dr[F-7],Dr[F-16]),p=Iu(N,X,x,Ur[F-7],Ur[F-16]);Ur[F]=p|0,Dr[F]=N|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:u,Cl:f,Dh:_,Dl:S,Eh:A,El:I,Fh:v,Fl:B,Gh:T,Gl:P,Hh:M,Hl:L}=this;for(let F=0;F<80;F++){let $=fn(A,I,14)^fn(A,I,18)^si(A,I,41),Q=ln(A,I,14)^ln(A,I,18)^ai(A,I,41),X=A&v^~A&T,te=I&B^~I&P,b=Ou(L,Q,te,vd[F],Dr[F]),w=Nu(b,M,$,X,xd[F],Ur[F]),x=b|0,k=fn(n,i,28)^si(n,i,34)^si(n,i,39),N=ln(n,i,28)^ai(n,i,34)^ai(n,i,39),p=n&o^n&u^o&u,a=i&s^i&f^s&f;M=T|0,L=P|0,T=v|0,P=B|0,v=A|0,B=I|0,{h:A,l:I}=ar(_|0,S|0,w|0,x|0),_=u|0,S=f|0,u=o|0,f=s|0,o=n|0,s=i|0;let c=Au(x,N,a);n=xu(c,w,k,p),i=c|0}({h:n,l:i}=ar(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=ar(this.Bh|0,this.Bl|0,o|0,s|0),{h:u,l:f}=ar(this.Ch|0,this.Cl|0,u|0,f|0),{h:_,l:S}=ar(this.Dh|0,this.Dl|0,_|0,S|0),{h:A,l:I}=ar(this.Eh|0,this.El|0,A|0,I|0),{h:v,l:B}=ar(this.Fh|0,this.Fl|0,v|0,B|0),{h:T,l:P}=ar(this.Gh|0,this.Gl|0,T|0,P|0),{h:M,l:L}=ar(this.Hh|0,this.Hl|0,M|0,L|0),this.set(n,i,o,s,u,f,_,S,A,I,v,B,T,P,M,L)}roundClean(){Vt(Ur,Dr)}destroy(){Vt(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var Hi=ii(()=>new Vi);var Bu=ii(()=>new Vs);var Ws=BigInt(0),$s=BigInt(1);function yr(r,e=""){if(typeof r!="boolean"){let t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof r)}return r}function zt(r,e,t=""){let n=pr(r),i=r?.length,o=e!==void 0;if(!n||o&&i!==e){let s=t&&`"${t}" `,u=o?` of length ${e}`:"",f=n?`length=${i}`:`type=${typeof r}`;throw new Error(s+"expected Uint8Array"+u+", got "+f)}return r}function ci(r){let e=r.toString(16);return e.length&1?"0"+e:e}function Tu(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Ws:BigInt("0x"+r)}function Ln(r){return Tu(Ht(r))}function _r(r){return _t(r),Tu(Ht(Uint8Array.from(r).reverse()))}function $i(r,e){return cn(r.toString(16).padStart(e*2,"0"))}function Gs(r,e){return $i(r,e).reverse()}function we(r,e,t){let n;if(typeof e=="string")try{n=cn(e)}catch(o){throw new Error(r+" must be hex string or Uint8Array, cause: "+o)}else if(pr(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");let i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}function Lu(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}function Ys(r){return Uint8Array.from(r)}var Hs=r=>typeof r=="bigint"&&Ws<=r;function Cu(r,e,t){return Hs(r)&&Hs(e)&&Hs(t)&&e<=r&&r<t}function ui(r,e,t,n){if(!Cu(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function Wi(r){let e;for(e=0;r>Ws;r>>=$s,e+=1);return e}var zr=r=>($s<<BigInt(r))-$s;function Mu(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=v=>new Uint8Array(v),i=v=>Uint8Array.of(v),o=n(r),s=n(r),u=0,f=()=>{o.fill(1),s.fill(0),u=0},_=(...v)=>t(s,o,...v),S=(v=n(0))=>{s=_(i(0),v),o=_(),v.length!==0&&(s=_(i(1),v),o=_())},A=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let v=0,B=[];for(;v<e;){o=_();let T=o.slice();B.push(T),v+=o.length}return Bt(...B)};return(v,B)=>{f(),S(v);let T;for(;!(T=B(A()));)S();return f(),T}}function Fr(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(i,o,s){let u=r[i];if(s&&u===void 0)return;let f=typeof u;if(f!==o||u===null)throw new Error(`param "${i}" is invalid: expected ${o}, got ${f}`)}Object.entries(e).forEach(([i,o])=>n(i,o,!1)),Object.entries(t).forEach(([i,o])=>n(i,o,!0))}var js=()=>{throw new Error("not implemented")};function Cn(r){let e=new WeakMap;return(t,...n)=>{let i=e.get(t);if(i!==void 0)return i;let o=r(t,...n);return e.set(t,o),o}}var Tt=BigInt(0),pt=BigInt(1),hn=BigInt(2),Du=BigInt(3),zu=BigInt(4),Fu=BigInt(5),Id=BigInt(7),Ku=BigInt(8),Od=BigInt(9),qu=BigInt(16);function Ie(r,e){let t=r%e;return t>=Tt?t:e+t}function Se(r,e,t){let n=r;for(;e-- >Tt;)n*=n,n%=t;return n}function Pu(r,e){if(r===Tt)throw new Error("invert: expected non-zero number");if(e<=Tt)throw new Error("invert: expected positive modulus, got "+e);let t=Ie(r,e),n=e,i=Tt,o=pt,s=pt,u=Tt;for(;t!==Tt;){let _=n/t,S=n%t,A=i-s*_,I=o-u*_;n=t,t=S,i=s,o=u,s=A,u=I}if(n!==pt)throw new Error("invert: does not exist");return Ie(i,e)}function Xs(r,e,t){if(!r.eql(r.sqr(e),t))throw new Error("Cannot find square root")}function Vu(r,e){let t=(r.ORDER+pt)/zu,n=r.pow(e,t);return Xs(r,n,e),n}function Nd(r,e){let t=(r.ORDER-Fu)/Ku,n=r.mul(e,hn),i=r.pow(n,t),o=r.mul(e,i),s=r.mul(r.mul(o,hn),i),u=r.mul(o,r.sub(s,r.ONE));return Xs(r,u,e),u}function kd(r){let e=Ft(r),t=Hu(r),n=t(e,e.neg(e.ONE)),i=t(e,n),o=t(e,e.neg(n)),s=(r+Id)/qu;return(u,f)=>{let _=u.pow(f,s),S=u.mul(_,n),A=u.mul(_,i),I=u.mul(_,o),v=u.eql(u.sqr(S),f),B=u.eql(u.sqr(A),f);_=u.cmov(_,S,v),S=u.cmov(I,A,B);let T=u.eql(u.sqr(S),f),P=u.cmov(_,S,T);return Xs(u,P,f),P}}function Hu(r){if(r<Du)throw new Error("sqrt is not defined for small field");let e=r-pt,t=0;for(;e%hn===Tt;)e/=hn,t++;let n=hn,i=Ft(r);for(;Uu(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return Vu;let o=i.pow(n,e),s=(e+pt)/hn;return function(f,_){if(f.is0(_))return _;if(Uu(f,_)!==1)throw new Error("Cannot find square root");let S=t,A=f.mul(f.ONE,o),I=f.pow(_,e),v=f.pow(_,s);for(;!f.eql(I,f.ONE);){if(f.is0(I))return f.ZERO;let B=1,T=f.sqr(I);for(;!f.eql(T,f.ONE);)if(B++,T=f.sqr(T),B===S)throw new Error("Cannot find square root");let P=pt<<BigInt(S-B-1),M=f.pow(A,P);S=B,A=f.sqr(M),I=f.mul(I,A),v=f.mul(v,M)}return v}}function Bd(r){return r%zu===Du?Vu:r%Ku===Fu?Nd:r%qu===Od?kd(r):Hu(r)}var wr=(r,e)=>(Ie(r,e)&pt)===pt,Td=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Zs(r){let e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=Td.reduce((n,i)=>(n[i]="function",n),e);return Fr(r,t),r}function Ld(r,e,t){if(t<Tt)throw new Error("invalid exponent, negatives unsupported");if(t===Tt)return r.ONE;if(t===pt)return e;let n=r.ONE,i=e;for(;t>Tt;)t&pt&&(n=r.mul(n,i)),i=r.sqr(i),t>>=pt;return n}function fi(r,e,t=!1){let n=new Array(e.length).fill(t?r.ZERO:void 0),i=e.reduce((s,u,f)=>r.is0(u)?s:(n[f]=s,r.mul(s,u)),r.ONE),o=r.inv(i);return e.reduceRight((s,u,f)=>r.is0(u)?s:(n[f]=r.mul(s,n[f]),r.mul(s,u)),o),n}function Uu(r,e){let t=(r.ORDER-pt)/hn,n=r.pow(e,t),i=r.eql(n,r.ONE),o=r.eql(n,r.ZERO),s=r.eql(n,r.neg(r.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function Gi(r,e){e!==void 0&&Cr(e);let t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Ft(r,e,t=!1,n={}){if(r<=Tt)throw new Error("invalid field: expected ORDER > 0, got "+r);let i,o,s=!1,u;if(typeof e=="object"&&e!=null){if(n.sqrt||t)throw new Error("cannot specify opts in two arguments");let I=e;I.BITS&&(i=I.BITS),I.sqrt&&(o=I.sqrt),typeof I.isLE=="boolean"&&(t=I.isLE),typeof I.modFromBytes=="boolean"&&(s=I.modFromBytes),u=I.allowedLengths}else typeof e=="number"&&(i=e),n.sqrt&&(o=n.sqrt);let{nBitLength:f,nByteLength:_}=Gi(r,i);if(_>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let S,A=Object.freeze({ORDER:r,isLE:t,BITS:f,BYTES:_,MASK:zr(f),ZERO:Tt,ONE:pt,allowedLengths:u,create:I=>Ie(I,r),isValid:I=>{if(typeof I!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof I);return Tt<=I&&I<r},is0:I=>I===Tt,isValidNot0:I=>!A.is0(I)&&A.isValid(I),isOdd:I=>(I&pt)===pt,neg:I=>Ie(-I,r),eql:(I,v)=>I===v,sqr:I=>Ie(I*I,r),add:(I,v)=>Ie(I+v,r),sub:(I,v)=>Ie(I-v,r),mul:(I,v)=>Ie(I*v,r),pow:(I,v)=>Ld(A,I,v),div:(I,v)=>Ie(I*Pu(v,r),r),sqrN:I=>I*I,addN:(I,v)=>I+v,subN:(I,v)=>I-v,mulN:(I,v)=>I*v,inv:I=>Pu(I,r),sqrt:o||(I=>(S||(S=Bd(r)),S(A,I))),toBytes:I=>t?Gs(I,_):$i(I,_),fromBytes:(I,v=!0)=>{if(u){if(!u.includes(I.length)||I.length>_)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+I.length);let T=new Uint8Array(_);T.set(I,t?0:T.length-I.length),I=T}if(I.length!==_)throw new Error("Field.fromBytes: expected "+_+" bytes, got "+I.length);let B=t?_r(I):Ln(I);if(s&&(B=Ie(B,r)),!v&&!A.isValid(B))throw new Error("invalid field element: outside of range 0..ORDER");return B},invertBatch:I=>fi(A,I),cmov:(I,v,B)=>B?v:I});return Object.freeze(A)}function $u(r){if(typeof r!="bigint")throw new Error("field order must be bigint");let e=r.toString(2).length;return Math.ceil(e/8)}function Js(r){let e=$u(r);return e+Math.ceil(e/2)}function Qs(r,e,t=!1){let n=r.length,i=$u(e),o=Js(e);if(n<16||n<o||n>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+n);let s=t?_r(r):Ln(r),u=Ie(s,e-pt)+pt;return t?Gs(u,i):$i(u,i)}var Mn=BigInt(0),dn=BigInt(1);function li(r,e){let t=e.negate();return r?t:e}function br(r,e){let t=fi(r.Fp,e.map(n=>n.Z));return e.map((n,i)=>r.fromAffine(n.toAffine(t[i])))}function ju(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function ea(r,e){ju(r,e);let t=Math.ceil(e/r)+1,n=2**(r-1),i=2**r,o=zr(r),s=BigInt(r);return{windows:t,windowSize:n,mask:o,maxNumber:i,shiftBy:s}}function Wu(r,e,t){let{windowSize:n,mask:i,maxNumber:o,shiftBy:s}=t,u=Number(r&i),f=r>>s;u>n&&(u-=o,f+=dn);let _=e*n,S=_+Math.abs(u)-1,A=u===0,I=u<0,v=e%2!==0;return{nextN:f,offset:S,isZero:A,isNeg:I,isNegF:v,offsetF:_}}function Cd(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function Md(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}var ta=new WeakMap,Xu=new WeakMap;function ra(r){return Xu.get(r)||1}function Gu(r){if(r!==Mn)throw new Error("invalid wNAF")}var Pn=class{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,n=this.ZERO){let i=e;for(;t>Mn;)t&dn&&(n=n.add(i)),i=i.double(),t>>=dn;return n}precomputeWindow(e,t){let{windows:n,windowSize:i}=ea(t,this.bits),o=[],s=e,u=s;for(let f=0;f<n;f++){u=s,o.push(u);for(let _=1;_<i;_++)u=u.add(s),o.push(u);s=u.double()}return o}wNAF(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,o=this.BASE,s=ea(e,this.bits);for(let u=0;u<s.windows;u++){let{nextN:f,offset:_,isZero:S,isNeg:A,isNegF:I,offsetF:v}=Wu(n,u,s);n=f,S?o=o.add(li(I,t[v])):i=i.add(li(A,t[_]))}return Gu(n),{p:i,f:o}}wNAFUnsafe(e,t,n,i=this.ZERO){let o=ea(e,this.bits);for(let s=0;s<o.windows&&n!==Mn;s++){let{nextN:u,offset:f,isZero:_,isNeg:S}=Wu(n,s,o);if(n=u,!_){let A=t[f];i=i.add(S?A.negate():A)}}return Gu(n),i}getPrecomputes(e,t,n){let i=ta.get(t);return i||(i=this.precomputeWindow(t,e),e!==1&&(typeof n=="function"&&(i=n(i)),ta.set(t,i))),i}cached(e,t,n){let i=ra(e);return this.wNAF(i,this.getPrecomputes(i,e,n),t)}unsafe(e,t,n,i){let o=ra(e);return o===1?this._unsafeLadder(e,t,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,n),t,i)}createCache(e,t){ju(t,this.bits),Xu.set(e,t),ta.delete(e)}hasCache(e){return ra(e)!==1}};function Zu(r,e,t,n){let i=e,o=r.ZERO,s=r.ZERO;for(;t>Mn||n>Mn;)t&dn&&(o=o.add(i)),n&dn&&(s=s.add(i)),i=i.double(),t>>=dn,n>>=dn;return{p1:o,p2:s}}function Un(r,e,t,n){Cd(t,r),Md(n,e);let i=t.length,o=n.length;if(i!==o)throw new Error("arrays of points and scalars must have equal length");let s=r.ZERO,u=Wi(BigInt(i)),f=1;u>12?f=u-3:u>4?f=u-2:u>0&&(f=2);let _=zr(f),S=new Array(Number(_)+1).fill(s),A=Math.floor((e.BITS-1)/f)*f,I=s;for(let v=A;v>=0;v-=f){S.fill(s);for(let T=0;T<o;T++){let P=n[T],M=Number(P>>BigInt(v)&_);S[M]=S[M].add(t[T])}let B=s;for(let T=S.length-1,P=s;T>0;T--)P=P.add(S[T]),B=B.add(P);if(I=I.add(B),v!==0)for(let T=0;T<f;T++)I=I.double()}return I}function Yu(r,e,t){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Zs(e),e}else return Ft(r,{isLE:t})}function Yi(r,e,t={},n){if(n===void 0&&(n=r==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(let f of["p","n","h"]){let _=e[f];if(!(typeof _=="bigint"&&_>Mn))throw new Error(`CURVE.${f} must be positive bigint`)}let i=Yu(e.p,t.Fp,n),o=Yu(e.n,t.Fn,n),u=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(let f of u)if(!i.isValid(e[f]))throw new Error(`CURVE.${f} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:o}}var Kr=BigInt(0),gt=BigInt(1),na=BigInt(2),Pd=BigInt(8);function Ud(r,e,t,n){let i=r.sqr(t),o=r.sqr(n),s=r.add(r.mul(e.a,i),o),u=r.add(r.ONE,r.mul(e.d,r.mul(i,o)));return r.eql(s,u)}function Dd(r,e={}){let t=Yi("edwards",r,e,e.FpFnLE),{Fp:n,Fn:i}=t,o=t.CURVE,{h:s}=o;Fr(e,{},{uvRatio:"function"});let u=na<<BigInt(i.BYTES*8)-gt,f=P=>n.create(P),_=e.uvRatio||((P,M)=>{try{return{isValid:!0,value:n.sqrt(n.div(P,M))}}catch{return{isValid:!1,value:Kr}}});if(!Ud(n,o,o.Gx,o.Gy))throw new Error("bad curve params: generator point");function S(P,M,L=!1){let F=L?gt:Kr;return ui("coordinate "+P,M,F,u),M}function A(P){if(!(P instanceof B))throw new Error("ExtendedPoint expected")}let I=Cn((P,M)=>{let{X:L,Y:F,Z:$}=P,Q=P.is0();M==null&&(M=Q?Pd:n.inv($));let X=f(L*M),te=f(F*M),b=n.mul($,M);if(Q)return{x:Kr,y:gt};if(b!==gt)throw new Error("invZ was invalid");return{x:X,y:te}}),v=Cn(P=>{let{a:M,d:L}=o;if(P.is0())throw new Error("bad point: ZERO");let{X:F,Y:$,Z:Q,T:X}=P,te=f(F*F),b=f($*$),w=f(Q*Q),x=f(w*w),k=f(te*M),N=f(w*f(k+b)),p=f(x+f(L*f(te*b)));if(N!==p)throw new Error("bad point: equation left != right (1)");let a=f(F*$),c=f(Q*X);if(a!==c)throw new Error("bad point: equation left != right (2)");return!0});class B{constructor(M,L,F,$){this.X=S("x",M),this.Y=S("y",L),this.Z=S("z",F,!0),this.T=S("t",$),Object.freeze(this)}static CURVE(){return o}static fromAffine(M){if(M instanceof B)throw new Error("extended point not allowed");let{x:L,y:F}=M||{};return S("x",L),S("y",F),new B(L,F,gt,f(L*F))}static fromBytes(M,L=!1){let F=n.BYTES,{a:$,d:Q}=o;M=Ys(zt(M,F,"point")),yr(L,"zip215");let X=Ys(M),te=M[F-1];X[F-1]=te&-129;let b=_r(X),w=L?u:n.ORDER;ui("point.y",b,Kr,w);let x=f(b*b),k=f(x-gt),N=f(Q*x-$),{isValid:p,value:a}=_(k,N);if(!p)throw new Error("bad point: invalid y coordinate");let c=(a&gt)===gt,l=(te&128)!==0;if(!L&&a===Kr&&l)throw new Error("bad point: x=0 and x_0=1");return l!==c&&(a=f(-a)),B.fromAffine({x:a,y:b})}static fromHex(M,L=!1){return B.fromBytes(we("point",M),L)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(M=8,L=!0){return T.createCache(this,M),L||this.multiply(na),this}assertValidity(){v(this)}equals(M){A(M);let{X:L,Y:F,Z:$}=this,{X:Q,Y:X,Z:te}=M,b=f(L*te),w=f(Q*$),x=f(F*te),k=f(X*$);return b===w&&x===k}is0(){return this.equals(B.ZERO)}negate(){return new B(f(-this.X),this.Y,this.Z,f(-this.T))}double(){let{a:M}=o,{X:L,Y:F,Z:$}=this,Q=f(L*L),X=f(F*F),te=f(na*f($*$)),b=f(M*Q),w=L+F,x=f(f(w*w)-Q-X),k=b+X,N=k-te,p=b-X,a=f(x*N),c=f(k*p),l=f(x*p),d=f(N*k);return new B(a,c,d,l)}add(M){A(M);let{a:L,d:F}=o,{X:$,Y:Q,Z:X,T:te}=this,{X:b,Y:w,Z:x,T:k}=M,N=f($*b),p=f(Q*w),a=f(te*F*k),c=f(X*x),l=f(($+Q)*(b+w)-N-p),d=c-a,g=c+a,y=f(p-L*N),R=f(l*d),m=f(g*y),h=f(l*y),E=f(d*g);return new B(R,m,E,h)}subtract(M){return this.add(M.negate())}multiply(M){if(!i.isValidNot0(M))throw new Error("invalid scalar: expected 1 <= sc < curve.n");let{p:L,f:F}=T.cached(this,M,$=>br(B,$));return br(B,[L,F])[0]}multiplyUnsafe(M,L=B.ZERO){if(!i.isValid(M))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return M===Kr?B.ZERO:this.is0()||M===gt?this:T.unsafe(this,M,F=>br(B,F),L)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return T.unsafe(this,o.n).is0()}toAffine(M){return I(this,M)}clearCofactor(){return s===gt?this:this.multiplyUnsafe(s)}toBytes(){let{x:M,y:L}=this.toAffine(),F=n.toBytes(L);return F[F.length-1]|=M&gt?128:0,F}toHex(){return Ht(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(M){return br(B,M)}static msm(M,L){return Un(B,i,M,L)}_setWindowSize(M){this.precompute(M)}toRawBytes(){return this.toBytes()}}B.BASE=new B(o.Gx,o.Gy,gt,f(o.Gx*o.Gy)),B.ZERO=new B(Kr,gt,gt,Kr),B.Fp=n,B.Fn=i;let T=new Pn(B,i.BITS);return B.BASE.precompute(8),B}var ji=class{constructor(e){this.ep=e}static fromBytes(e){js()}static fromHex(e){js()}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(e){return this.ep.toAffine(e)}toHex(){return Ht(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(e){return this.assertSame(e),this.init(this.ep.add(e.ep))}subtract(e){return this.assertSame(e),this.init(this.ep.subtract(e.ep))}multiply(e){return this.init(this.ep.multiply(e))}multiplyUnsafe(e){return this.init(this.ep.multiplyUnsafe(e))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(e,t){return this.init(this.ep.precompute(e,t))}toRawBytes(){return this.toBytes()}};function zd(r,e,t={}){if(typeof e!="function")throw new Error('"hash" function param is required');Fr(t,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:n}=t,{BASE:i,Fp:o,Fn:s}=r,u=t.randomBytes||Tn,f=t.adjustScalarBytes||(w=>w),_=t.domain||((w,x,k)=>{if(yr(k,"phflag"),x.length||k)throw new Error("Contexts/pre-hash are not supported");return w});function S(w){return s.create(_r(w))}function A(w){let x=F.secretKey;w=we("private key",w,x);let k=we("hashed private key",e(w),2*x),N=f(k.slice(0,x)),p=k.slice(x,2*x),a=S(N);return{head:N,prefix:p,scalar:a}}function I(w){let{head:x,prefix:k,scalar:N}=A(w),p=i.multiply(N),a=p.toBytes();return{head:x,prefix:k,scalar:N,point:p,pointBytes:a}}function v(w){return I(w).pointBytes}function B(w=Uint8Array.of(),...x){let k=Bt(...x);return S(e(_(k,we("context",w),!!n)))}function T(w,x,k={}){w=we("message",w),n&&(w=n(w));let{prefix:N,scalar:p,pointBytes:a}=I(x),c=B(k.context,N,w),l=i.multiply(c).toBytes(),d=B(k.context,l,a,w),g=s.create(c+d*p);if(!s.isValid(g))throw new Error("sign failed: invalid s");let y=Bt(l,s.toBytes(g));return zt(y,F.signature,"result")}let P={zip215:!0};function M(w,x,k,N=P){let{context:p,zip215:a}=N,c=F.signature;w=we("signature",w,c),x=we("message",x),k=we("publicKey",k,F.publicKey),a!==void 0&&yr(a,"zip215"),n&&(x=n(x));let l=c/2,d=w.subarray(0,l),g=_r(w.subarray(l,c)),y,R,m;try{y=r.fromBytes(k,a),R=r.fromBytes(d,a),m=i.multiplyUnsafe(g)}catch{return!1}if(!a&&y.isSmallOrder())return!1;let h=B(p,R.toBytes(),y.toBytes(),x);return R.add(y.multiplyUnsafe(h)).subtract(m).clearCofactor().is0()}let L=o.BYTES,F={secretKey:L,publicKey:L,signature:2*L,seed:L};function $(w=u(F.seed)){return zt(w,F.seed,"seed")}function Q(w){let x=b.randomSecretKey(w);return{secretKey:x,publicKey:v(x)}}function X(w){return pr(w)&&w.length===s.BYTES}function te(w,x){try{return!!r.fromBytes(w,x)}catch{return!1}}let b={getExtendedPublicKey:I,randomSecretKey:$,isValidSecretKey:X,isValidPublicKey:te,toMontgomery(w){let{y:x}=r.fromBytes(w),k=F.publicKey,N=k===32;if(!N&&k!==57)throw new Error("only defined for 25519 and 448");let p=N?o.div(gt+x,gt-x):o.div(x-gt,x+gt);return o.toBytes(p)},toMontgomerySecret(w){let x=F.secretKey;zt(w,x);let k=e(w.subarray(0,x));return f(k).subarray(0,x)},randomPrivateKey:$,precompute(w=8,x=r.BASE){return x.precompute(w,!1)}};return Object.freeze({keygen:Q,getPublicKey:v,sign:T,verify:M,utils:b,Point:r,lengths:F})}function Fd(r){let e={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Ft(e.n,r.nBitLength,!0),i={Fp:t,Fn:n,uvRatio:r.uvRatio},o={randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:e,curveOpts:i,hash:r.hash,eddsaOpts:o}}function Kd(r,e){let t=e.Point;return Object.assign({},e,{ExtendedPoint:t,CURVE:r,nBitLength:t.Fn.BITS,nByteLength:t.Fn.BYTES})}function Ju(r){let{CURVE:e,curveOpts:t,hash:n,eddsaOpts:i}=Fd(r),o=Dd(e,t),s=zd(o,n,i);return Kd(r,s)}var qd=BigInt(0),Er=BigInt(1),Qu=BigInt(2),mb=BigInt(3),Vd=BigInt(5),Hd=BigInt(8),Dn=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),hi={p:Dn,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Hd,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function $d(r){let e=BigInt(10),t=BigInt(20),n=BigInt(40),i=BigInt(80),o=Dn,u=r*r%o*r%o,f=Se(u,Qu,o)*u%o,_=Se(f,Er,o)*r%o,S=Se(_,Vd,o)*_%o,A=Se(S,e,o)*S%o,I=Se(A,t,o)*A%o,v=Se(I,n,o)*I%o,B=Se(v,i,o)*v%o,T=Se(B,i,o)*v%o,P=Se(T,e,o)*S%o;return{pow_p_5_8:Se(P,Qu,o)*r%o,b2:u}}function Wd(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}var ia=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function aa(r,e){let t=Dn,n=Ie(e*e*e,t),i=Ie(n*n*e,t),o=$d(r*i).pow_p_5_8,s=Ie(r*n*o,t),u=Ie(e*s*s,t),f=s,_=Ie(s*ia,t),S=u===r,A=u===Ie(-r,t),I=u===Ie(-r*ia,t);return S&&(s=f),(A||I)&&(s=_),wr(s,t)&&(s=Ie(-s,t)),{isValid:S||A,value:s}}var qr=Ft(hi.p,{isLE:!0}),Gd=Ft(hi.n,{isLE:!0}),Yd={...hi,Fp:qr,hash:Bu,adjustScalarBytes:Wd,uvRatio:aa},Pt=Ju(Yd);var oa=ia,jd=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Xd=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Zd=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Jd=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),ef=r=>aa(Er,r),Qd=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),sa=r=>Pt.Point.Fp.create(_r(r)&Qd);function tf(r){let{d:e}=hi,t=Dn,n=M=>qr.create(M),i=n(oa*r*r),o=n((i+Er)*Zd),s=BigInt(-1),u=n((s-e*i)*n(i+e)),{isValid:f,value:_}=aa(o,u),S=n(_*r);wr(S,t)||(S=n(-S)),f||(_=S),f||(s=i);let A=n(s*(i-Er)*Jd-u),I=_*_,v=n((_+_)*u),B=n(A*jd),T=n(Er-I),P=n(Er+I);return new Pt.Point(n(v*P),n(T*B),n(B*P),n(v*T))}function e0(r){_t(r,64);let e=sa(r.subarray(0,32)),t=tf(e),n=sa(r.subarray(32,64)),i=tf(n);return new Rr(t.add(i))}var Rr=class r extends ji{constructor(e){super(e)}static fromAffine(e){return new r(Pt.Point.fromAffine(e))}assertSame(e){if(!(e instanceof r))throw new Error("RistrettoPoint expected")}init(e){return new r(e)}static hashToCurve(e){return e0(we("ristrettoHash",e,64))}static fromBytes(e){_t(e,32);let{a:t,d:n}=hi,i=Dn,o=$=>qr.create($),s=sa(e);if(!Lu(qr.toBytes(s),e)||wr(s,i))throw new Error("invalid ristretto255 encoding 1");let u=o(s*s),f=o(Er+t*u),_=o(Er-t*u),S=o(f*f),A=o(_*_),I=o(t*n*S-A),{isValid:v,value:B}=ef(o(I*A)),T=o(B*_),P=o(B*T*I),M=o((s+s)*T);wr(M,i)&&(M=o(-M));let L=o(f*P),F=o(M*L);if(!v||wr(F,i)||L===qd)throw new Error("invalid ristretto255 encoding 2");return new r(new Pt.Point(M,L,Er,F))}static fromHex(e){return r.fromBytes(we("ristrettoHex",e,32))}static msm(e,t){return Un(r,Pt.Point.Fn,e,t)}toBytes(){let{X:e,Y:t,Z:n,T:i}=this.ep,o=Dn,s=P=>qr.create(P),u=s(s(n+t)*s(n-t)),f=s(e*t),_=s(f*f),{value:S}=ef(s(u*_)),A=s(S*u),I=s(S*f),v=s(A*I*i),B;if(wr(i*v,o)){let P=s(t*oa),M=s(e*oa);e=P,t=M,B=s(A*Xd)}else B=I;wr(e*v,o)&&(t=s(-t));let T=s((n-t)*B);return wr(T,o)&&(T=s(-T)),qr.toBytes(T)}equals(e){this.assertSame(e);let{X:t,Y:n}=this.ep,{X:i,Y:o}=e.ep,s=_=>qr.create(_),u=s(t*o)===s(n*i),f=s(n*o)===s(t*i);return u||f}is0(){return this.equals(r.ZERO)}};Rr.BASE=new Rr(Pt.Point.BASE);Rr.ZERO=new Rr(Pt.Point.ZERO);Rr.Fp=qr;Rr.Fn=Gd;var nc=ht(ua()),mt=ht(la());var ha=Hi;var Xn=ht(mf()),O=ht(lr()),Kl=ht(lr());var b0=1,E0=2,R0=3,S0=4,A0=5,x0=6,v0=7,I0=8,O0=9,N0=10,k0=-32700,B0=-32603,T0=-32602,L0=-32601,C0=-32600,M0=-32016,P0=-32015,U0=-32014,D0=-32013,z0=-32012,F0=-32011,K0=-32010,q0=-32009,V0=-32008,H0=-32007,$0=-32006,W0=-32005,G0=-32004,Y0=-32003,j0=-32002,X0=-32001,Z0=28e5,J0=2800001,Q0=2800002,ep=2800003,tp=2800004,rp=2800005,np=2800006,ip=2800007,op=2800008,sp=2800009,ap=2800010,cp=2800011,up=323e4,fp=32300001,lp=3230002,hp=3230003,dp=3230004,pp=361e4,gp=3610001,mp=3610002,yp=3610003,_p=3610004,wp=3610005,bp=3610006,Ep=3610007,Rp=3611e3,Sp=3704e3,Ap=3704001,xp=3704002,vp=3704003,Ip=3704004,Op=4128e3,Np=4128001,kp=4128002,Bp=4615e3,Tp=4615001,Lp=4615002,Cp=4615003,Mp=4615004,Pp=4615005,Up=4615006,Dp=4615007,zp=4615008,Fp=4615009,Kp=4615010,qp=4615011,Vp=4615012,Hp=4615013,$p=4615014,Wp=4615015,Gp=4615016,Yp=4615017,jp=4615018,Xp=4615019,Zp=4615020,Jp=4615021,Qp=4615022,eg=4615023,tg=4615024,rg=4615025,ng=4615026,ig=4615027,og=4615028,sg=4615029,ag=4615030,cg=4615031,ug=4615032,fg=4615033,lg=4615034,hg=4615035,dg=4615036,pg=4615037,gg=4615038,mg=4615039,yg=4615040,_g=4615041,wg=4615042,bg=4615043,Eg=4615044,Rg=4615045,Sg=4615046,Ag=4615047,xg=4615048,vg=4615049,Ig=4615050,Og=4615051,Ng=4615052,kg=4615053,Bg=4615054,Tg=5508e3,Lg=5508001,Cg=5508002,Mg=5508003,Pg=5508004,Ug=5508005,Dg=5508006,zg=5508007,Fg=5508008,Kg=5508009,qg=5508010,Vg=5508011,Hg=5663e3,$g=5663001,Wg=5663002,Gg=5663003,Yg=5663004,jg=5663005,Xg=5663006,Zg=5663007,Jg=5663008,Qg=5663009,em=5663010,tm=5663011,rm=5663012,nm=5663013,im=5663014,om=5663015,sm=5663016,am=5663017,cm=5663018,um=5663019,fm=5663020,lm=705e4,hm=7050001,dm=7050002,pm=7050003,gm=7050004,mm=7050005,ym=7050006,_m=7050007,wm=7050008,bm=7050009,Em=7050010,Rm=7050011,Sm=7050012,Am=7050013,xm=7050014,vm=7050015,Im=7050016,Om=7050017,Nm=7050018,km=7050019,Bm=7050020,Tm=7050021,Lm=7050022,Cm=7050023,Mm=7050024,Pm=7050025,Um=7050026,Dm=7050027,zm=7050028,Fm=7050029,Km=7050030,qm=7050031,Vm=7050032,Hm=7050033,$m=7050034,Wm=7050035,Gm=7050036,Ea=8078e3,Ra=8078001,yf=8078002,_f=8078003,Sa=8078004,Aa=8078005,xa=8078006,Ym=8078007,jm=8078008,Xm=8078009,Zm=8078010,va=8078011,Jm=8078012,wf=8078013,bf=8078014,Qm=8078015,ey=8078016,ty=8078017,ry=8078018,ny=8078019,Ef=8078020,Rf=8078021,iy=8078022,oy=81e5,sy=8100001,ay=8100002,cy=8100003,uy=819e4,fy=8190001,ly=8190002,hy=8190003,dy=8190004,py=99e5,gy=9900001,my=9900002,yy=9900003,_y=9900004;function Sf(r){return Array.isArray(r)?"%5B"+r.map(Sf).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function wy([r,e]){return`${r}=${Sf(e)}`}function by(r){let e=Object.entries(r).map(wy).join("&");return btoa(e)}var Nb={[up]:"Account not found at address: $address",[dp]:"Not all accounts were decoded. Encoded accounts found at addresses: $addresses.",[hp]:"Expected decoded account at address: $address",[lp]:"Failed to decode account data at address: $address",[fp]:"Accounts not found at addresses: $addresses",[sp]:"Unable to find a viable program address bump seed.",[Q0]:"$putativeAddress is not a base58-encoded address.",[Z0]:"Expected base58 encoded address to decode to a byte array of length 32. Actual length: $actualLength.",[ep]:"The `CryptoKey` must be an `Ed25519` public key.",[cp]:"$putativeOffCurveAddress is not a base58-encoded off-curve address.",[op]:"Invalid seeds; point must fall off the Ed25519 curve.",[tp]:"Expected given program derived address to have the following format: [Address, ProgramDerivedAddressBump].",[np]:"A maximum of $maxSeeds seeds, including the bump seed, may be supplied when creating an address. Received: $actual.",[ip]:"The seed at index $index with length $actual exceeds the maximum length of $maxSeedLength bytes.",[rp]:"Expected program derived address bump to be in the range [0, 255], got: $bump.",[ap]:"Program address cannot end with PDA marker.",[J0]:"Expected base58-encoded address string of length in the range [32, 44]. Actual length: $actualLength.",[S0]:"Expected base58-encoded blockash string of length in the range [32, 44]. Actual length: $actualLength.",[b0]:"The network has progressed past the last block for which this transaction could have been committed.",[Ea]:"Codec [$codecDescription] cannot decode empty byte arrays.",[iy]:"Enum codec cannot use lexical values [$stringValues] as discriminators. Either remove all lexical values or set `useValuesAsDiscriminators` to `false`.",[Ef]:"Sentinel [$hexSentinel] must not be present in encoded bytes [$hexEncodedBytes].",[Aa]:"Encoder and decoder must have the same fixed size, got [$encoderFixedSize] and [$decoderFixedSize].",[xa]:"Encoder and decoder must have the same max size, got [$encoderMaxSize] and [$decoderMaxSize].",[Sa]:"Encoder and decoder must either both be fixed-size or variable-size.",[jm]:"Enum discriminator out of range. Expected a number in [$formattedValidDiscriminators], got $discriminator.",[yf]:"Expected a fixed-size codec, got a variable-size one.",[wf]:"Codec [$codecDescription] expected a positive byte length, got $bytesLength.",[_f]:"Expected a variable-size codec, got a fixed-size one.",[ny]:"Codec [$codecDescription] expected zero-value [$hexZeroValue] to have the same size as the provided fixed-size item [$expectedSize bytes].",[Ra]:"Codec [$codecDescription] expected $expected bytes, got $bytesLength.",[ry]:"Expected byte array constant [$hexConstant] to be present in data [$hexData] at offset [$offset].",[Xm]:"Invalid discriminated union variant. Expected one of [$variants], got $value.",[Zm]:"Invalid enum variant. Expected one of [$stringValues] or a number in [$formattedNumericalValues], got $variant.",[Qm]:"Invalid literal union variant. Expected one of [$variants], got $value.",[Ym]:"Expected [$codecDescription] to have $expected items, got $actual.",[Jm]:"Invalid value $value for base $base with alphabet $alphabet.",[ey]:"Literal union discriminator out of range. Expected a number between $minRange and $maxRange, got $discriminator.",[va]:"Codec [$codecDescription] expected number to be in the range [$min, $max], got $value.",[bf]:"Codec [$codecDescription] expected offset to be in the range [0, $bytesLength], got $offset.",[Rf]:"Expected sentinel [$hexSentinel] to be present in decoded bytes [$hexDecodedBytes].",[ty]:"Union variant out of range. Expected an index between $minRange and $maxRange, got $variant.",[Rp]:"No random values implementation could be found.",[Fp]:"instruction requires an uninitialized account",[eg]:"instruction tries to borrow reference for an account which is already borrowed",[tg]:"instruction left account with an outstanding borrowed reference",[Jp]:"program other than the account's owner changed the size of the account data",[Pp]:"account data too small for instruction",[Qp]:"instruction expected an executable account",[Sg]:"An account does not have enough lamports to be rent-exempt",[xg]:"Program arithmetic overflowed",[Rg]:"Failed to serialize or deserialize account data: $encodedData",[Bg]:"Builtin programs must consume compute units",[ug]:"Cross-program invocation call depth too deep",[gg]:"Computational budget exceeded",[ng]:"custom program error: #$code",[Yp]:"instruction contains duplicate accounts",[rg]:"instruction modifications of multiply-passed account differ",[ag]:"executable accounts must be rent exempt",[og]:"instruction changed executable accounts data",[sg]:"instruction changed the balance of an executable account",[jp]:"instruction changed executable bit of an account",[$p]:"instruction modified data of an account it does not own",[Hp]:"instruction spent from the balance of an account it does not own",[Tp]:"generic instruction error",[Ig]:"Provided owner is not allowed",[bg]:"Account is immutable",[Eg]:"Incorrect authority provided",[Dp]:"incorrect program id for instruction",[Up]:"insufficient funds for instruction",[Mp]:"invalid account data for instruction",[Ag]:"Invalid account owner",[Lp]:"invalid program argument",[ig]:"program returned invalid error code",[Cp]:"invalid instruction data",[pg]:"Failed to reallocate account data",[dg]:"Provided seeds do not result in a valid address",[Og]:"Accounts data allocations exceeded the maximum allowed per transaction",[Ng]:"Max accounts exceeded",[kg]:"Max instruction trace length exceeded",[hg]:"Length of the seed is too long for address generation",[fg]:"An account required by the instruction is missing",[zp]:"missing required signature for instruction",[Vp]:"instruction illegally modified the program id of an account",[Zp]:"insufficient account keys for instruction",[mg]:"Cross-program invocation with unauthorized signer or writable account",[yg]:"Failed to create program execution environment",[wg]:"Program failed to compile",[_g]:"Program failed to complete",[Gp]:"instruction modified data of a read-only account",[Wp]:"instruction changed the balance of a read-only account",[lg]:"Cross-program invocation reentrancy not allowed for this instruction",[Xp]:"instruction modified rent epoch of an account",[qp]:"sum of account balances before and after instruction do not match",[Kp]:"instruction requires an initialized account",[Bp]:"",[cg]:"Unsupported program id",[vg]:"Unsupported sysvar",[Op]:"The instruction does not have any accounts.",[Np]:"The instruction does not have any data.",[kp]:"Expected instruction to have progress address $expectedProgramAddress, got $actualProgramAddress.",[A0]:"Expected base58 encoded blockhash to decode to a byte array of length 32. Actual length: $actualLength.",[E0]:"The nonce `$expectedNonceValue` is no longer valid. It has advanced to `$actualNonceValue`",[my]:"Invariant violation: Found no abortable iterable cache entry for key `$cacheKey`. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[_y]:"Invariant violation: This data publisher does not publish to the channel named `$channelName`. Supported channels include $supportedChannelNames.",[gy]:"Invariant violation: WebSocket message iterator state is corrupt; iterated without first resolving existing message promise. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[py]:"Invariant violation: WebSocket message iterator is missing state storage. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[yy]:"Invariant violation: Switch statement non-exhaustive. Received unexpected value `$unexpectedValue`. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[B0]:"JSON-RPC error: Internal JSON-RPC error ($__serverMessage)",[T0]:"JSON-RPC error: Invalid method parameter(s) ($__serverMessage)",[C0]:"JSON-RPC error: The JSON sent is not a valid `Request` object ($__serverMessage)",[L0]:"JSON-RPC error: The method does not exist / is not available ($__serverMessage)",[k0]:"JSON-RPC error: An error occurred on the server while parsing the JSON text ($__serverMessage)",[z0]:"$__serverMessage",[X0]:"$__serverMessage",[G0]:"$__serverMessage",[U0]:"$__serverMessage",[K0]:"$__serverMessage",[q0]:"$__serverMessage",[M0]:"Minimum context slot has not been reached",[W0]:"Node is unhealthy; behind by $numSlotsBehind slots",[V0]:"No snapshot",[j0]:"Transaction simulation failed",[H0]:"$__serverMessage",[F0]:"Transaction history is not available from this node",[$0]:"$__serverMessage",[D0]:"Transaction signature length mismatch",[Y0]:"Transaction signature verification failure",[P0]:"$__serverMessage",[Sp]:"Key pair bytes must be of length 64, got $byteLength.",[Ap]:"Expected private key bytes with length 32. Actual length: $actualLength.",[xp]:"Expected base58-encoded signature to decode to a byte array of length 64. Actual length: $actualLength.",[Ip]:"The provided private key does not match the provided public key.",[vp]:"Expected base58-encoded signature string of length in the range [64, 88]. Actual length: $actualLength.",[x0]:"Lamports value must be in the range [0, 2e64-1]",[v0]:"`$value` cannot be parsed as a `BigInt`",[N0]:"$message",[I0]:"`$value` cannot be parsed as a `Number`",[R0]:"No nonce account could be found at address `$nonceAccountAddress`",[uy]:"The notification name must end in 'Notifications' and the API must supply a subscription plan creator function for the notification '$notificationName'.",[ly]:"WebSocket was closed before payload could be added to the send buffer",[hy]:"WebSocket connection closed",[dy]:"WebSocket failed to connect",[fy]:"Failed to obtain a subscription id from the server",[cy]:"Could not find an API plan for RPC method: `$method`",[oy]:"The $argumentLabel argument to the `$methodName` RPC method$optionalPathLabel was `$value`. This number is unsafe for use with the Solana JSON-RPC because it exceeds `Number.MAX_SAFE_INTEGER`.",[ay]:"HTTP error ($statusCode): $message",[sy]:"HTTP header(s) forbidden: $headers. Learn more at https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name.",[Tg]:"Multiple distinct signers were identified for address `$address`. Please ensure that you are using the same signer instance for each address.",[Lg]:"The provided value does not implement the `KeyPairSigner` interface",[Mg]:"The provided value does not implement the `MessageModifyingSigner` interface",[Pg]:"The provided value does not implement the `MessagePartialSigner` interface",[Cg]:"The provided value does not implement any of the `MessageSigner` interfaces",[Dg]:"The provided value does not implement the `TransactionModifyingSigner` interface",[zg]:"The provided value does not implement the `TransactionPartialSigner` interface",[Fg]:"The provided value does not implement the `TransactionSendingSigner` interface",[Ug]:"The provided value does not implement any of the `TransactionSigner` interfaces",[Kg]:"More than one `TransactionSendingSigner` was identified.",[qg]:"No `TransactionSendingSigner` was identified. Please provide a valid `TransactionWithSingleSendingSigner` transaction.",[Vg]:"Wallet account signers do not support signing multiple messages/transactions in a single operation",[Ep]:"Cannot export a non-extractable key.",[gp]:"No digest implementation could be found.",[pp]:"Cryptographic operations are only allowed in secure browser contexts. Read more here: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts.",[mp]:`This runtime does not support the generation of Ed25519 key pairs.

Install @solana/webcrypto-ed25519-polyfill and call its \`install\` function before generating keys in environments that do not support Ed25519.

For a list of runtimes that currently support Ed25519 operations, visit https://github.com/WICG/webcrypto-secure-curves/issues/20.`,[yp]:"No signature verification implementation could be found.",[_p]:"No key generation implementation could be found.",[wp]:"No signing implementation could be found.",[bp]:"No key export implementation could be found.",[O0]:"Timestamp value must be in the range [-(2n ** 63n), (2n ** 63n) - 1]. `$value` given",[Im]:"Transaction processing left an account with an outstanding borrowed reference",[hm]:"Account in use",[dm]:"Account loaded twice",[pm]:"Attempt to debit an account but found no record of a prior credit.",[Cm]:"Transaction loads an address table account that doesn't exist",[_m]:"This transaction has already been processed",[wm]:"Blockhash not found",[bm]:"Loader call chain is too deep",[vm]:"Transactions are currently disabled due to cluster maintenance",[Km]:"Transaction contains a duplicate instruction ($index) that is not allowed",[mm]:"Insufficient funds for fee",[qm]:"Transaction results in an account ($accountIndex) with insufficient funds for rent",[ym]:"This account may not be used to pay transaction fees",[Rm]:"Transaction contains an invalid account reference",[Pm]:"Transaction loads an address table account with invalid data",[Um]:"Transaction address table lookup uses an invalid index",[Mm]:"Transaction loads an address table account with an invalid owner",[Hm]:"LoadedAccountsDataSizeLimit set for transaction must be greater than 0.",[Am]:"This program may not be used for executing instructions",[Dm]:"Transaction leaves an account with a lower balance than rent-exempt minimum",[km]:"Transaction loads a writable account that cannot be written",[Vm]:"Transaction exceeded max loaded accounts data size cap",[Em]:"Transaction requires a fee but has no signature present",[gm]:"Attempt to load a program that does not exist",[Wm]:"Execution of the program referenced by account at index $accountIndex is temporarily restricted.",[$m]:"ResanitizationNeeded",[xm]:"Transaction failed to sanitize accounts offsets correctly",[Sm]:"Transaction did not pass signature verification",[Lm]:"Transaction locked too many accounts",[Gm]:"Sum of account balances before and after transaction do not match",[lm]:"The transaction failed with the error `$errorName`",[Nm]:"Transaction version is unsupported",[Tm]:"Transaction would exceed account data limit within the block",[Fm]:"Transaction would exceed total account data limit",[Bm]:"Transaction would exceed max account limit within the block",[Om]:"Transaction would exceed max Block Cost Limit",[zm]:"Transaction would exceed max Vote Cost Limit",[om]:"Attempted to sign a transaction with an address that is not a signer for it",[em]:"Transaction is missing an address at index: $index.",[sm]:"Transaction has no expected signers therefore it cannot be encoded",[fm]:"Transaction size $transactionSize exceeds limit of $transactionSizeLimit bytes",[Wg]:"Transaction does not have a blockhash lifetime",[Gg]:"Transaction is not a durable nonce transaction",[jg]:"Contents of these address lookup tables unknown: $lookupTableAddresses",[Xg]:"Lookup of address at index $highestRequestedIndex failed for lookup table `$lookupTableAddress`. Highest known index is $highestKnownIndex. The lookup table may have been extended since its contents were retrieved",[Jg]:"No fee payer set in CompiledTransaction",[Zg]:"Could not find program address at index $index",[cm]:"Failed to estimate the compute unit consumption for this transaction message. This is likely because simulating the transaction failed. Inspect the `cause` property of this error to learn more",[um]:"Transaction failed when it was simulated in order to estimate the compute unit consumption. The compute unit estimate provided is for a transaction that failed when simulated and may not be representative of the compute units this transaction would consume if successful. Inspect the `cause` property of this error to learn more",[tm]:"Transaction is missing a fee payer.",[rm]:"Could not determine this transaction's signature. Make sure that the transaction has been signed by its fee payer.",[im]:"Transaction first instruction is not advance nonce account instruction.",[nm]:"Transaction with no instructions cannot be durable nonce transaction.",[Hg]:"This transaction includes an address (`$programAddress`) which is both invoked and set as the fee payer. Program addresses may not pay fees",[$g]:"This transaction includes an address (`$programAddress`) which is both invoked and marked writable. Program addresses may not be writable",[am]:"The transaction message expected the transaction to have $signerAddressesLength signatures, got $signaturesLength.",[Qg]:"Transaction is missing signatures for addresses: $addresses.",[Yg]:"Transaction version must be in the range [0, 127]. `$actualVersion` given"};function Ey(r,e={}){{let t=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(e).length&&(t+=` '${by(e)}'`),`${t}\``}}var $r=class extends Error{constructor(...[e,t]){let n,i;if(t){let{cause:s,...u}=t;s&&(i={cause:s}),Object.keys(u).length>0&&(n=u)}let o=Ey(e,n);super(o,i);Oe(this,"cause",this.cause);Oe(this,"context");this.context={__code:e,...n},this.name="SolanaError"}};function Ry(r,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(r)}function Af(r){return Object.freeze({...r,encode:e=>{let t=new Uint8Array(Ry(e,r));return r.write(e,t,0),t}})}function xf(r){return Object.freeze({...r,decode:(e,t=0)=>r.read(e,t)[0]})}function Vn(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function vf(r,e){if(Vn(r)!==Vn(e))throw new $r(Sa);if(Vn(r)&&Vn(e)&&r.fixedSize!==e.fixedSize)throw new $r(Aa,{decoderFixedSize:e.fixedSize,encoderFixedSize:r.fixedSize});if(!Vn(r)&&!Vn(e)&&r.maxSize!==e.maxSize)throw new $r(xa,{decoderMaxSize:e.maxSize,encoderMaxSize:r.maxSize});return{...e,...r,decode:e.decode,encode:r.encode,read:e.read,write:r.write}}function If(r,e,t=0){if(e.length-t<=0)throw new $r(Ea,{codecDescription:r})}function Of(r,e,t,n=0){let i=t.length-n;if(i<e)throw new $r(Ra,{bytesLength:i,codecDescription:r,expected:e})}function Sy(r,e,t,n){if(n<e||n>t)throw new $r(va,{codecDescription:r,max:t,min:e,value:n})}function Nf(r){return r?.endian!==1}function Ay(r){return Af({fixedSize:r.size,write(e,t,n){r.range&&Sy(r.name,r.range[0],r.range[1],e);let i=new ArrayBuffer(r.size);return r.set(new DataView(i),e,Nf(r.config)),t.set(new Uint8Array(i),n),n+r.size}})}function xy(r){return xf({fixedSize:r.size,read(e,t=0){If(r.name,e,t),Of(r.name,r.size,e,t);let n=new DataView(vy(e,t,r.size));return[r.get(n,Nf(r.config)),t+r.size]}})}function vy(r,e,t){let n=r.byteOffset+(e??0),i=t??r.byteLength;return r.buffer.slice(n,n+i)}var Ia=(r={})=>Ay({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,n)=>e.setBigUint64(0,BigInt(t),n),size:8}),Iy=(r={})=>xy({config:r,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),kf=(r={})=>vf(Ia(r),Iy(r));var Oa=class extends TypeError{constructor(e,t){let n,{message:i,explanation:o,...s}=e,{path:u}=e,f=u.length===0?i:`At path: ${u.join(".")} -- ${i}`;super(o??f),o!=null&&(this.cause=f),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}};function Oy(r){return _i(r)&&typeof r[Symbol.iterator]=="function"}function _i(r){return typeof r=="object"&&r!=null}function Ao(r){return _i(r)&&!Array.isArray(r)}function tr(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function Ny(r){let{done:e,value:t}=r.next();return e?void 0:t}function ky(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});let{path:i,branch:o}=e,{type:s}=t,{refinement:u,message:f=`Expected a value of type \`${s}\`${u?` with refinement \`${u}\``:""}, but received: \`${tr(n)}\``}=r;return{value:n,type:s,refinement:u,key:i[i.length-1],path:i,branch:o,...r,message:f}}function*Bf(r,e,t,n){Oy(r)||(r=[r]);for(let i of r){let o=ky(i,e,t,n);o&&(yield o)}}function*Na(r,e,t={}){let{path:n=[],branch:i=[r],coerce:o=!1,mask:s=!1}=t,u={path:n,branch:i,mask:s};o&&(r=e.coercer(r,u));let f="valid";for(let _ of e.validator(r,u))_.explanation=t.message,f="not_valid",yield[_,void 0];for(let[_,S,A]of e.entries(r,u)){let I=Na(S,A,{path:_===void 0?n:[...n,_],branch:_===void 0?i:[...i,S],coerce:o,mask:s,message:t.message});for(let v of I)v[0]?(f=v[0].refinement!=null?"not_refined":"not_valid",yield[v[0],void 0]):o&&(S=v[1],_===void 0?r=S:r instanceof Map?r.set(_,S):r instanceof Set?r.add(S):_i(r)&&(S!==void 0||_ in r)&&(r[_]=S))}if(f!=="not_valid")for(let _ of e.refiner(r,u))_.explanation=t.message,f="not_refined",yield[_,void 0];f==="valid"&&(yield[void 0,r])}var $t=class{constructor(e){let{type:t,schema:n,validator:i,refiner:o,coercer:s=f=>f,entries:u=function*(){}}=e;this.type=t,this.schema=n,this.entries=u,this.coercer=s,i?this.validator=(f,_)=>{let S=i(f,_);return Bf(S,_,this,f)}:this.validator=()=>[],o?this.refiner=(f,_)=>{let S=o(f,_);return Bf(S,_,this,f)}:this.refiner=()=>[]}assert(e,t){return Tf(e,this,t)}create(e,t){return W(e,this,t)}is(e){return Lf(e,this)}mask(e,t){return By(e,this,t)}validate(e,t={}){return wi(e,this,t)}};function Tf(r,e,t){let n=wi(r,e,{message:t});if(n[0])throw n[0]}function W(r,e,t){let n=wi(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function By(r,e,t){let n=wi(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function Lf(r,e){return!wi(r,e)[0]}function wi(r,e,t={}){let n=Na(r,e,t),i=Ny(n);return i[0]?[new Oa(i[0],function*(){for(let s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function yn(r,e){return new $t({type:r,schema:null,validator:e})}function Cf(){return yn("any",()=>!0)}function Y(r){return new $t({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(let[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${tr(e)}`}})}function rr(){return yn("boolean",r=>typeof r=="boolean")}function xo(r){return yn("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${tr(e)}`)}function Ae(r){let e=tr(r),t=typeof r;return new $t({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${tr(n)}`}})}function Ty(){return yn("never",()=>!1)}function j(r){return new $t({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function C(){return yn("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${tr(r)}`)}function ee(r){return new $t({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function ka(r,e){return new $t({type:"record",schema:null,*entries(t){if(_i(t))for(let n in t){let i=t[n];yield[n,n,r],yield[n,i,e]}},validator(t){return Ao(t)||`Expected an object, but received: ${tr(t)}`},coercer(t){return Ao(t)?{...t}:t}})}function H(){return yn("string",r=>typeof r=="string"||`Expected a string, but received: ${tr(r)}`)}function vo(r){let e=Ty();return new $t({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){let n=Math.max(r.length,t.length);for(let i=0;i<n;i++)yield[i,t[i],r[i]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${tr(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function V(r){let e=Object.keys(r);return new $t({type:"type",schema:r,*entries(t){if(_i(t))for(let n of e)yield[n,t[n],r[n]]},validator(t){return Ao(t)||`Expected an object, but received: ${tr(t)}`},coercer(t){return Ao(t)?{...t}:t}})}function St(r){let e=r.map(t=>t.type).join(" | ");return new $t({type:"union",schema:null,coercer(t,n){for(let i of r){let[o,s]=i.validate(t,{coerce:!0,mask:n.mask});if(!o)return s}return t},validator(t,n){let i=[];for(let o of r){let[...s]=Na(t,o,n),[u]=s;if(u[0])for(let[f]of s)f&&i.push(f);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${tr(t)}`,...i]}})}function _n(){return yn("unknown",()=>!0)}function Hn(r,e,t){return new $t({...r,coercer:(n,i)=>Lf(n,e)?r.coercer(t(n,i),i):r.coercer(n,i)})}var ql=ht(il());var al=ht(Bn(),1);var Lo=ht(sl(),1);var i_=class extends Lo.default{constructor(e,t,n){super();Oe(this,"socket");this.socket=new window.WebSocket(e,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(e,t,n){let i=n||t;try{this.socket.send(e),i()}catch(o){i(o)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,n){this.socket.addEventListener(e,t,n)}};function cl(r,e){return new i_(r,e)}var o_=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},ul=class extends Lo.default{constructor(e,t="ws://localhost:8080",{autoconnect:n=!0,reconnect:i=!0,reconnect_interval:o=1e3,max_reconnects:s=5,...u}={},f,_){super();Oe(this,"address");Oe(this,"rpc_id");Oe(this,"queue");Oe(this,"options");Oe(this,"autoconnect");Oe(this,"ready");Oe(this,"reconnect");Oe(this,"reconnect_timer_id");Oe(this,"reconnect_interval");Oe(this,"max_reconnects");Oe(this,"rest_options");Oe(this,"current_reconnects");Oe(this,"generate_request_id");Oe(this,"socket");Oe(this,"webSocketFactory");Oe(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=n,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=o,this.max_reconnects=s,this.rest_options=u,this.current_reconnects=0,this.generate_request_id=f||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),_?this.dataPack=_:this.dataPack=new o_,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,n,i){return!i&&typeof n=="object"&&(i=n,n=null),new Promise((o,s)=>{if(!this.ready)return s(new Error("socket not ready"));let u=this.generate_request_id(e,t),f={jsonrpc:"2.0",method:e,params:t||void 0,id:u};this.socket.send(this.dataPack.encode(f),i,_=>{if(_)return s(_);this.queue[u]={promise:[o,s]},n&&(this.queue[u].timeout=setTimeout(()=>{delete this.queue[u],s(new Error("reply timeout"))},n))})})}async login(e){let t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((n,i)=>{if(!this.ready)return i(new Error("socket not ready"));let o={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(o),s=>{if(s)return i(s);n()})})}async subscribe(e){typeof e=="string"&&(e=[e]);let t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);let t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket&&this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=al.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);let i=[n.notification];if(n.params.constructor===Object)i.push(n.params);else for(let o=0;o<n.params.length;o++)i.push(n.params[o]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n?.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",n,i),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",n,i),1))})}};var s_=BigInt(0),xi=BigInt(1),a_=BigInt(2),c_=BigInt(7),u_=BigInt(256),f_=BigInt(113),hl=[],dl=[],pl=[];for(let r=0,e=xi,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],hl.push(2*(5*n+t)),dl.push((r+1)*(r+2)/2%64);let i=s_;for(let o=0;o<7;o++)e=(e<<xi^(e>>c_)*f_)%u_,e&a_&&(i^=xi<<(xi<<BigInt(o))-xi);pl.push(i)}var gl=qi(pl,!0),l_=gl[0],h_=gl[1],fl=(r,e,t)=>t>32?Ru(r,e,t):bu(r,e,t),ll=(r,e,t)=>t>32?Su(r,e,t):Eu(r,e,t);function d_(r,e=24){let t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let s=0;s<10;s++)t[s]=r[s]^r[s+10]^r[s+20]^r[s+30]^r[s+40];for(let s=0;s<10;s+=2){let u=(s+8)%10,f=(s+2)%10,_=t[f],S=t[f+1],A=fl(_,S,1)^t[u],I=ll(_,S,1)^t[u+1];for(let v=0;v<50;v+=10)r[s+v]^=A,r[s+v+1]^=I}let i=r[2],o=r[3];for(let s=0;s<24;s++){let u=dl[s],f=fl(i,o,u),_=ll(i,o,u),S=hl[s];i=r[S],o=r[S+1],r[S]=f,r[S+1]=_}for(let s=0;s<50;s+=10){for(let u=0;u<10;u++)t[u]=r[s+u];for(let u=0;u<10;u++)r[s+u]^=~t[(u+2)%10]&t[(u+4)%10]}r[0]^=l_[n],r[1]^=h_[n]}Vt(t)}var Ka=class r extends Mr{constructor(e,t,n,i=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=o,Cr(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=gu(this.state)}clone(){return this._cloneInto()}keccak(){zs(this.state32),d_(this.state32,this.rounds),zs(this.state32),this.posOut=0,this.pos=0}update(e){gr(this),e=un(e),_t(e);let{blockLen:t,state:n}=this,i=e.length;for(let o=0;o<i;){let s=Math.min(t-this.pos,i-o);for(let u=0;u<s;u++)n[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,t&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){gr(this,!1),_t(e),this.finish();let t=this.state,{blockLen:n}=this;for(let i=0,o=e.length;i<o;){this.posOut>=n&&this.keccak();let s=Math.min(n-this.posOut,o-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Cr(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(zi(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Vt(this.state)}_cloneInto(e){let{blockLen:t,suffix:n,outputLen:i,rounds:o,enableXOF:s}=this;return e||(e=new r(t,n,i,s,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=n,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}},p_=(r,e,t)=>ii(()=>new Ka(e,r,t));var qa=p_(1,136,256/8);var Co=class extends Mr{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Di(e);let n=un(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),Vt(o)}update(e){return gr(this),this.iHash.update(e),this}digestInto(e){gr(this),_t(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:u}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=u,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Va=(r,e,t)=>new Co(r,e).update(t).digest();Va.create=(r,e)=>new Co(r,e);var ml=(r,e)=>(r+(r>=0?e:-e)/yl)/e;function g_(r,e,t){let[[n,i],[o,s]]=e,u=ml(s*r,t),f=ml(-i*r,t),_=r-u*n-f*o,S=-u*i-f*s,A=_<vr,I=S<vr;A&&(_=-_),I&&(S=-S);let v=zr(Math.ceil(Wi(t)/2))+Wn;if(_<vr||_>=v||S<vr||S>=v)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:A,k1:_,k2neg:I,k2:S}}function $a(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function Ha(r,e){let t={};for(let n of Object.keys(e))t[n]=r[n]===void 0?e[n]:r[n];return yr(t.lowS,"lowS"),yr(t.prehash,"prehash"),t.format!==void 0&&$a(t.format),t}var Wa=class extends Error{constructor(e=""){super(e)}},xr={Err:Wa,_tlv:{encode:(r,e)=>{let{Err:t}=xr;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");let n=e.length/2,i=ci(n);if(i.length/2&128)throw new t("tlv.encode: long form length too big");let o=n>127?ci(i.length/2|128):"";return ci(r)+o+i+e},decode(r,e){let{Err:t}=xr,n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");let i=e[n++],o=!!(i&128),s=0;if(!o)s=i;else{let f=i&127;if(!f)throw new t("tlv.decode(long): indefinite length not supported");if(f>4)throw new t("tlv.decode(long): byte length is too big");let _=e.subarray(n,n+f);if(_.length!==f)throw new t("tlv.decode: length bytes not complete");if(_[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(let S of _)s=s<<8|S;if(n+=f,s<128)throw new t("tlv.decode(long): not minimal encoding")}let u=e.subarray(n,n+s);if(u.length!==s)throw new t("tlv.decode: wrong value length");return{v:u,l:e.subarray(n+s)}}},_int:{encode(r){let{Err:e}=xr;if(r<vr)throw new e("integer: negative integers are not allowed");let t=ci(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){let{Err:e}=xr;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Ln(r)}},toSig(r){let{Err:e,_int:t,_tlv:n}=xr,i=we("signature",r),{v:o,l:s}=n.decode(48,i);if(s.length)throw new e("invalid signature: left bytes after parsing");let{v:u,l:f}=n.decode(2,o),{v:_,l:S}=n.decode(2,f);if(S.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(u),s:t.decode(_)}},hexFromSig(r){let{_tlv:e,_int:t}=xr,n=e.encode(2,t.encode(r.r)),i=e.encode(2,t.encode(r.s)),o=n+i;return e.encode(48,o)}},vr=BigInt(0),Wn=BigInt(1),yl=BigInt(2),Mo=BigInt(3),m_=BigInt(4);function $n(r,e){let{BYTES:t}=r,n;if(typeof e=="bigint")n=e;else{let i=we("private key",e);try{n=r.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!r.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function y_(r,e={}){let t=Yi("weierstrass",r,e),{Fp:n,Fn:i}=t,o=t.CURVE,{h:s,n:u}=o;Fr(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:f}=e;if(f&&(!n.is0(o.a)||typeof f.beta!="bigint"||!Array.isArray(f.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');let _=wl(n,i);function S(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function A(N,p,a){let{x:c,y:l}=p.toAffine(),d=n.toBytes(c);if(yr(a,"isCompressed"),a){S();let g=!n.isOdd(l);return Bt(_l(g),d)}else return Bt(Uint8Array.of(4),d,n.toBytes(l))}function I(N){zt(N,void 0,"Point");let{publicKey:p,publicKeyUncompressed:a}=_,c=N.length,l=N[0],d=N.subarray(1);if(c===p&&(l===2||l===3)){let g=n.fromBytes(d);if(!n.isValid(g))throw new Error("bad point: is not on curve, wrong x");let y=T(g),R;try{R=n.sqrt(y)}catch(E){let K=E instanceof Error?": "+E.message:"";throw new Error("bad point: is not on curve, sqrt error"+K)}S();let m=n.isOdd(R);return(l&1)===1!==m&&(R=n.neg(R)),{x:g,y:R}}else if(c===a&&l===4){let g=n.BYTES,y=n.fromBytes(d.subarray(0,g)),R=n.fromBytes(d.subarray(g,g*2));if(!P(y,R))throw new Error("bad point: is not on curve");return{x:y,y:R}}else throw new Error(`bad point: got length ${c}, expected compressed=${p} or uncompressed=${a}`)}let v=e.toBytes||A,B=e.fromBytes||I;function T(N){let p=n.sqr(N),a=n.mul(p,N);return n.add(n.add(a,n.mul(N,o.a)),o.b)}function P(N,p){let a=n.sqr(p),c=T(N);return n.eql(a,c)}if(!P(o.Gx,o.Gy))throw new Error("bad curve params: generator point");let M=n.mul(n.pow(o.a,Mo),m_),L=n.mul(n.sqr(o.b),BigInt(27));if(n.is0(n.add(M,L)))throw new Error("bad curve params: a or b");function F(N,p,a=!1){if(!n.isValid(p)||a&&n.is0(p))throw new Error(`bad point coordinate ${N}`);return p}function $(N){if(!(N instanceof w))throw new Error("ProjectivePoint expected")}function Q(N){if(!f||!f.basises)throw new Error("no endo");return g_(N,f.basises,i.ORDER)}let X=Cn((N,p)=>{let{X:a,Y:c,Z:l}=N;if(n.eql(l,n.ONE))return{x:a,y:c};let d=N.is0();p==null&&(p=d?n.ONE:n.inv(l));let g=n.mul(a,p),y=n.mul(c,p),R=n.mul(l,p);if(d)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:g,y}}),te=Cn(N=>{if(N.is0()){if(e.allowInfinityPoint&&!n.is0(N.Y))return;throw new Error("bad point: ZERO")}let{x:p,y:a}=N.toAffine();if(!n.isValid(p)||!n.isValid(a))throw new Error("bad point: x or y not field elements");if(!P(p,a))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function b(N,p,a,c,l){return a=new w(n.mul(a.X,N),a.Y,a.Z),p=li(c,p),a=li(l,a),p.add(a)}class w{constructor(p,a,c){this.X=F("x",p),this.Y=F("y",a,!0),this.Z=F("z",c),Object.freeze(this)}static CURVE(){return o}static fromAffine(p){let{x:a,y:c}=p||{};if(!p||!n.isValid(a)||!n.isValid(c))throw new Error("invalid affine point");if(p instanceof w)throw new Error("projective point not allowed");return n.is0(a)&&n.is0(c)?w.ZERO:new w(a,c,n.ONE)}static fromBytes(p){let a=w.fromAffine(B(zt(p,void 0,"point")));return a.assertValidity(),a}static fromHex(p){return w.fromBytes(we("pointHex",p))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(p=8,a=!0){return k.createCache(this,p),a||this.multiply(Mo),this}assertValidity(){te(this)}hasEvenY(){let{y:p}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(p)}equals(p){$(p);let{X:a,Y:c,Z:l}=this,{X:d,Y:g,Z:y}=p,R=n.eql(n.mul(a,y),n.mul(d,l)),m=n.eql(n.mul(c,y),n.mul(g,l));return R&&m}negate(){return new w(this.X,n.neg(this.Y),this.Z)}double(){let{a:p,b:a}=o,c=n.mul(a,Mo),{X:l,Y:d,Z:g}=this,y=n.ZERO,R=n.ZERO,m=n.ZERO,h=n.mul(l,l),E=n.mul(d,d),K=n.mul(g,g),z=n.mul(l,d);return z=n.add(z,z),m=n.mul(l,g),m=n.add(m,m),y=n.mul(p,m),R=n.mul(c,K),R=n.add(y,R),y=n.sub(E,R),R=n.add(E,R),R=n.mul(y,R),y=n.mul(z,y),m=n.mul(c,m),K=n.mul(p,K),z=n.sub(h,K),z=n.mul(p,z),z=n.add(z,m),m=n.add(h,h),h=n.add(m,h),h=n.add(h,K),h=n.mul(h,z),R=n.add(R,h),K=n.mul(d,g),K=n.add(K,K),h=n.mul(K,z),y=n.sub(y,h),m=n.mul(K,E),m=n.add(m,m),m=n.add(m,m),new w(y,R,m)}add(p){$(p);let{X:a,Y:c,Z:l}=this,{X:d,Y:g,Z:y}=p,R=n.ZERO,m=n.ZERO,h=n.ZERO,E=o.a,K=n.mul(o.b,Mo),z=n.mul(a,d),q=n.mul(c,g),G=n.mul(l,y),ne=n.add(a,c),re=n.add(d,g);ne=n.mul(ne,re),re=n.add(z,q),ne=n.sub(ne,re),re=n.add(a,l);let _e=n.add(d,y);return re=n.mul(re,_e),_e=n.add(z,G),re=n.sub(re,_e),_e=n.add(c,l),R=n.add(g,y),_e=n.mul(_e,R),R=n.add(q,G),_e=n.sub(_e,R),h=n.mul(E,re),R=n.mul(K,G),h=n.add(R,h),R=n.sub(q,h),h=n.add(q,h),m=n.mul(R,h),q=n.add(z,z),q=n.add(q,z),G=n.mul(E,G),re=n.mul(K,re),q=n.add(q,G),G=n.sub(z,G),G=n.mul(E,G),re=n.add(re,G),z=n.mul(q,re),m=n.add(m,z),z=n.mul(_e,re),R=n.mul(ne,R),R=n.sub(R,z),z=n.mul(ne,q),h=n.mul(_e,h),h=n.add(h,z),new w(R,m,h)}subtract(p){return this.add(p.negate())}is0(){return this.equals(w.ZERO)}multiply(p){let{endo:a}=e;if(!i.isValidNot0(p))throw new Error("invalid scalar: out of range");let c,l,d=g=>k.cached(this,g,y=>br(w,y));if(a){let{k1neg:g,k1:y,k2neg:R,k2:m}=Q(p),{p:h,f:E}=d(y),{p:K,f:z}=d(m);l=E.add(z),c=b(a.beta,h,K,g,R)}else{let{p:g,f:y}=d(p);c=g,l=y}return br(w,[c,l])[0]}multiplyUnsafe(p){let{endo:a}=e,c=this;if(!i.isValid(p))throw new Error("invalid scalar: out of range");if(p===vr||c.is0())return w.ZERO;if(p===Wn)return c;if(k.hasCache(this))return this.multiply(p);if(a){let{k1neg:l,k1:d,k2neg:g,k2:y}=Q(p),{p1:R,p2:m}=Zu(w,c,d,y);return b(a.beta,R,m,l,g)}else return k.unsafe(c,p)}multiplyAndAddUnsafe(p,a,c){let l=this.multiplyUnsafe(a).add(p.multiplyUnsafe(c));return l.is0()?void 0:l}toAffine(p){return X(this,p)}isTorsionFree(){let{isTorsionFree:p}=e;return s===Wn?!0:p?p(w,this):k.unsafe(this,u).is0()}clearCofactor(){let{clearCofactor:p}=e;return s===Wn?this:p?p(w,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(p=!0){return yr(p,"isCompressed"),this.assertValidity(),v(w,this,p)}toHex(p=!0){return Ht(this.toBytes(p))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(p=!0){return this.toBytes(p)}_setWindowSize(p){this.precompute(p)}static normalizeZ(p){return br(w,p)}static msm(p,a){return Un(w,i,p,a)}static fromPrivateKey(p){return w.BASE.multiply($n(i,p))}}w.BASE=new w(o.Gx,o.Gy,n.ONE),w.ZERO=new w(n.ZERO,n.ONE,n.ZERO),w.Fp=n,w.Fn=i;let x=i.BITS,k=new Pn(w,e.endo?Math.ceil(x/2):x);return w.BASE.precompute(8),w}function _l(r){return Uint8Array.of(r?2:3)}function wl(r,e){return{secretKey:e.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function __(r,e={}){let{Fn:t}=r,n=e.randomBytes||Tn,i=Object.assign(wl(r.Fp,t),{seed:Js(t.ORDER)});function o(v){try{return!!$n(t,v)}catch{return!1}}function s(v,B){let{publicKey:T,publicKeyUncompressed:P}=i;try{let M=v.length;return B===!0&&M!==T||B===!1&&M!==P?!1:!!r.fromBytes(v)}catch{return!1}}function u(v=n(i.seed)){return Qs(zt(v,i.seed,"seed"),t.ORDER)}function f(v,B=!0){return r.BASE.multiply($n(t,v)).toBytes(B)}function _(v){let B=u(v);return{secretKey:B,publicKey:f(B)}}function S(v){if(typeof v=="bigint")return!1;if(v instanceof r)return!0;let{secretKey:B,publicKey:T,publicKeyUncompressed:P}=i;if(t.allowedLengths||B===T)return;let M=we("key",v).length;return M===T||M===P}function A(v,B,T=!0){if(S(v)===!0)throw new Error("first arg must be private key");if(S(B)===!1)throw new Error("second arg must be public key");let P=$n(t,v);return r.fromHex(B).multiply(P).toBytes(T)}return Object.freeze({getPublicKey:f,getSharedSecret:A,keygen:_,Point:r,utils:{isValidSecretKey:o,isValidPublicKey:s,randomSecretKey:u,isValidPrivateKey:o,randomPrivateKey:u,normPrivateKeyToScalar:v=>$n(t,v),precompute(v=8,B=r.BASE){return B.precompute(v,!1)}},lengths:i})}function w_(r,e,t={}){Di(e),Fr(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let n=t.randomBytes||Tn,i=t.hmac||((a,...c)=>Va(e,a,Bt(...c))),{Fp:o,Fn:s}=r,{ORDER:u,BITS:f}=s,{keygen:_,getPublicKey:S,getSharedSecret:A,utils:I,lengths:v}=__(r,t),B={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},T="compact";function P(a){let c=u>>Wn;return a>c}function M(a,c){if(!s.isValidNot0(c))throw new Error(`invalid signature ${a}: out of range 1..Point.Fn.ORDER`);return c}function L(a,c){$a(c);let l=v.signature,d=c==="compact"?l:c==="recovered"?l+1:void 0;return zt(a,d,`${c} signature`)}class F{constructor(c,l,d){this.r=M("r",c),this.s=M("s",l),d!=null&&(this.recovery=d),Object.freeze(this)}static fromBytes(c,l=T){L(c,l);let d;if(l==="der"){let{r:m,s:h}=xr.toSig(zt(c));return new F(m,h)}l==="recovered"&&(d=c[0],l="compact",c=c.subarray(1));let g=s.BYTES,y=c.subarray(0,g),R=c.subarray(g,g*2);return new F(s.fromBytes(y),s.fromBytes(R),d)}static fromHex(c,l){return this.fromBytes(cn(c),l)}addRecoveryBit(c){return new F(this.r,this.s,c)}recoverPublicKey(c){let l=o.ORDER,{r:d,s:g,recovery:y}=this;if(y==null||![0,1,2,3].includes(y))throw new Error("recovery id invalid");if(u*yl<l&&y>1)throw new Error("recovery id is ambiguous for h>1 curve");let m=y===2||y===3?d+u:d;if(!o.isValid(m))throw new Error("recovery id 2 or 3 invalid");let h=o.toBytes(m),E=r.fromBytes(Bt(_l((y&1)===0),h)),K=s.inv(m),z=Q(we("msgHash",c)),q=s.create(-z*K),G=s.create(g*K),ne=r.BASE.multiplyUnsafe(q).add(E.multiplyUnsafe(G));if(ne.is0())throw new Error("point at infinify");return ne.assertValidity(),ne}hasHighS(){return P(this.s)}toBytes(c=T){if($a(c),c==="der")return cn(xr.hexFromSig(this));let l=s.toBytes(this.r),d=s.toBytes(this.s);if(c==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Bt(Uint8Array.of(this.recovery),l,d)}return Bt(l,d)}toHex(c){return Ht(this.toBytes(c))}assertValidity(){}static fromCompact(c){return F.fromBytes(we("sig",c),"compact")}static fromDER(c){return F.fromBytes(we("sig",c),"der")}normalizeS(){return this.hasHighS()?new F(this.r,s.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ht(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ht(this.toBytes("compact"))}}let $=t.bits2int||function(c){if(c.length>8192)throw new Error("input is too large");let l=Ln(c),d=c.length*8-f;return d>0?l>>BigInt(d):l},Q=t.bits2int_modN||function(c){return s.create($(c))},X=zr(f);function te(a){return ui("num < 2^"+f,a,vr,X),s.toBytes(a)}function b(a,c){return zt(a,void 0,"message"),c?zt(e(a),void 0,"prehashed message"):a}function w(a,c,l){if(["recovered","canonical"].some(q=>q in l))throw new Error("sign() legacy options not supported");let{lowS:d,prehash:g,extraEntropy:y}=Ha(l,B);a=b(a,g);let R=Q(a),m=$n(s,c),h=[te(m),te(R)];if(y!=null&&y!==!1){let q=y===!0?n(v.secretKey):y;h.push(we("extraEntropy",q))}let E=Bt(...h),K=R;function z(q){let G=$(q);if(!s.isValidNot0(G))return;let ne=s.inv(G),re=r.BASE.multiply(G).toAffine(),_e=s.create(re.x);if(_e===vr)return;let ae=s.create(ne*s.create(K+_e*m));if(ae===vr)return;let de=(re.x===_e?0:2)|Number(re.y&Wn),lt=ae;return d&&P(ae)&&(lt=s.neg(ae),de^=1),new F(_e,lt,de)}return{seed:E,k2sig:z}}function x(a,c,l={}){a=we("message",a);let{seed:d,k2sig:g}=w(a,c,l);return Mu(e.outputLen,s.BYTES,i)(d,g)}function k(a){let c,l=typeof a=="string"||pr(a),d=!l&&a!==null&&typeof a=="object"&&typeof a.r=="bigint"&&typeof a.s=="bigint";if(!l&&!d)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(d)c=new F(a.r,a.s);else if(l){try{c=F.fromBytes(we("sig",a),"der")}catch(g){if(!(g instanceof xr.Err))throw g}if(!c)try{c=F.fromBytes(we("sig",a),"compact")}catch{return!1}}return c||!1}function N(a,c,l,d={}){let{lowS:g,prehash:y,format:R}=Ha(d,B);if(l=we("publicKey",l),c=b(we("message",c),y),"strict"in d)throw new Error("options.strict was renamed to lowS");let m=R===void 0?k(a):F.fromBytes(we("sig",a),R);if(m===!1)return!1;try{let h=r.fromBytes(l);if(g&&m.hasHighS())return!1;let{r:E,s:K}=m,z=Q(c),q=s.inv(K),G=s.create(z*q),ne=s.create(E*q),re=r.BASE.multiplyUnsafe(G).add(h.multiplyUnsafe(ne));return re.is0()?!1:s.create(re.x)===E}catch{return!1}}function p(a,c,l={}){let{prehash:d}=Ha(l,B);return c=b(c,d),F.fromBytes(a,"recovered").recoverPublicKey(c).toBytes()}return Object.freeze({keygen:_,getPublicKey:S,getSharedSecret:A,utils:I,lengths:v,Point:r,sign:x,verify:N,recoverPublicKey:p,Signature:F,hash:e})}function b_(r){let e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(s=>Math.ceil(s/2)))):void 0,i=Ft(e.n,{BITS:r.nBitLength,allowedLengths:n,modFromBytes:r.wrapPrivateKey}),o={Fp:t,Fn:i,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:o}}function E_(r){let{CURVE:e,curveOpts:t}=b_(r),n={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,hash:r.hash,ecdsaOpts:n}}function R_(r,e){let t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},r,Gi(t.Fn.ORDER,t.Fn.BITS))})}function bl(r){let{CURVE:e,curveOpts:t,hash:n,ecdsaOpts:i}=E_(r),o=y_(e,t),s=w_(o,n,i);return R_(r,s)}function El(r,e){let t=n=>bl({...r,hash:n});return{...t(e),create:t}}var Ya={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},S_={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]};var Rl=BigInt(2);function A_(r){let e=Ya.p,t=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),u=BigInt(44),f=BigInt(88),_=r*r*r%e,S=_*_*r%e,A=Se(S,t,e)*S%e,I=Se(A,t,e)*S%e,v=Se(I,Rl,e)*_%e,B=Se(v,i,e)*v%e,T=Se(B,o,e)*B%e,P=Se(T,u,e)*T%e,M=Se(P,f,e)*P%e,L=Se(M,u,e)*T%e,F=Se(L,t,e)*S%e,$=Se(F,s,e)*B%e,Q=Se($,n,e)*_%e,X=Se(Q,Rl,e);if(!Ga.eql(Ga.sqr(X),r))throw new Error("Cannot find square root");return X}var Ga=Ft(Ya.p,{sqrt:A_}),Po=El({...Ya,Fp:Ga,lowS:!0,endo:S_},Hi);var nR=Pt.utils.randomPrivateKey,Sl=()=>{let r=Pt.utils.randomPrivateKey(),e=ic(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},ic=Pt.getPublicKey;function Al(r){try{return Pt.ExtendedPoint.fromHex(r),!0}catch{return!1}}var Vl=(r,e)=>Pt.sign(r,e.slice(0,32)),x_=Pt.verify,le=r=>ie.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ie.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ie.Buffer.from(r),oc=class{constructor(e){Object.assign(this,e)}encode(){return ie.Buffer.from((0,Xn.serialize)(zo,this))}static decode(e){return(0,Xn.deserialize)(zo,this,e)}static decodeUnchecked(e){return(0,Xn.deserializeUnchecked)(zo,this,e)}};var zo=new Map,Hl,v_=32,Zr=32;function I_(r){return r._bn!==void 0}var xl=1,Z=class r extends oc{constructor(e){if(super({}),this._bn=void 0,I_(e))this._bn=e._bn;else{if(typeof e=="string"){let t=mt.default.decode(e);if(t.length!=Zr)throw new Error("Invalid public key input");this._bn=new nc.default(t)}else this._bn=new nc.default(e);if(this._bn.byteLength()>Zr)throw new Error("Invalid public key input")}}static unique(){let e=new r(xl);return xl+=1,new r(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return mt.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){let e=this._bn.toArrayLike(ie.Buffer);if(e.length===Zr)return e;let t=ie.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){let i=ie.Buffer.concat([e.toBuffer(),ie.Buffer.from(t),n.toBuffer()]),o=ha(i);return new r(o)}static createProgramAddressSync(e,t){let n=ie.Buffer.alloc(0);e.forEach(function(o){if(o.length>v_)throw new TypeError("Max seed length exceeded");n=ie.Buffer.concat([n,le(o)])}),n=ie.Buffer.concat([n,t.toBuffer(),ie.Buffer.from("ProgramDerivedAddress")]);let i=ha(n);if(Al(i))throw new Error("Invalid seeds, address must fall off the curve");return new r(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{let o=e.concat(ie.Buffer.from([n]));i=this.createProgramAddressSync(o,t)}catch(o){if(o instanceof TypeError)throw o;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){let t=new r(e);return Al(t.toBytes())}};Hl=Z;Z.default=new Hl("11111111111111111111111111111111");zo.set(Z,{kind:"struct",fields:[["_bn","u256"]]});var iR=new Z("BPFLoader1111111111111111111111111111111111"),En=1232,$l=127,Wl=64,Fo=class extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}};Object.defineProperty(Fo.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var Ko=class extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}};Object.defineProperty(Ko.prototype,"name",{value:"TransactionExpiredTimeoutError"});var bn=class extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}};Object.defineProperty(bn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var Yn=class{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){let e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(let t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");let n=new Map;this.keySegments().flat().forEach((o,s)=>{n.set(o.toBase58(),s)});let i=o=>{let s=n.get(o.toBase58());if(s===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return s};return e.map(o=>({programIdIndex:i(o.programId),accountKeyIndexes:o.keys.map(s=>i(s.pubkey)),data:o.data}))}},ue=(r="publicKey")=>O.blob(32,r);var Gn=(r="string")=>{let e=O.struct([O.u32("length"),O.u32("lengthPadding"),O.blob(O.offset(O.u32(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(o,s)=>t(o,s).chars.toString(),i.encode=(o,s,u)=>{let f={chars:ie.Buffer.from(o,"utf8")};return n(f,s,u)},i.alloc=o=>O.u32().span+O.u32().span+ie.Buffer.from(o,"utf8").length,i},O_=(r="authorized")=>O.struct([ue("staker"),ue("withdrawer")],r),N_=(r="lockup")=>O.struct([O.ns64("unixTimestamp"),O.ns64("epoch"),ue("custodian")],r),k_=(r="voteInit")=>O.struct([ue("nodePubkey"),ue("authorizedVoter"),ue("authorizedWithdrawer"),O.u8("commission")],r),B_=(r="voteAuthorizeWithSeedArgs")=>O.struct([O.u32("voteAuthorizationType"),ue("currentAuthorityDerivedKeyOwnerPubkey"),Gn("currentAuthorityDerivedKeySeed"),ue("newAuthorized")],r);function Gl(r,e){let t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){let o=e[i.property];if(Array.isArray(o))return o.length*t(i.elementLayout)}else if("fields"in i)return Gl({layout:i},e[i.property]);return 0},n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function Gt(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,!(n&128))break}return e}function Yt(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function Re(r,e){if(!r)throw new Error(e||"Assertion failed")}var qo=class r{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){let n=new Map,i=s=>{let u=s.toBase58(),f=n.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,f)),f},o=i(t);o.isSigner=!0,o.isWritable=!0;for(let s of e){i(s.programId).isInvoked=!0;for(let u of s.keys){let f=i(u.pubkey);f.isSigner||(f.isSigner=u.isSigner),f.isWritable||(f.isWritable=u.isWritable)}}return new r(t,n)}getMessageComponents(){let e=[...this.keyMetaMap.entries()];Re(e.length<=256,"Max static account keys length exceeded");let t=e.filter(([,f])=>f.isSigner&&f.isWritable),n=e.filter(([,f])=>f.isSigner&&!f.isWritable),i=e.filter(([,f])=>!f.isSigner&&f.isWritable),o=e.filter(([,f])=>!f.isSigner&&!f.isWritable),s={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:o.length};{Re(t.length>0,"Expected at least one writable signer key");let[f]=t[0];Re(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let u=[...t.map(([f])=>new Z(f)),...n.map(([f])=>new Z(f)),...i.map(([f])=>new Z(f)),...o.map(([f])=>new Z(f))];return[s,u]}extractTableLookup(e){let[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,s=>!s.isSigner&&!s.isInvoked&&s.isWritable),[i,o]=this.drainKeysFoundInLookupTable(e.state.addresses,s=>!s.isSigner&&!s.isInvoked&&!s.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:o}]}drainKeysFoundInLookupTable(e,t){let n=new Array,i=new Array;for(let[o,s]of this.keyMetaMap.entries())if(t(s)){let u=new Z(o),f=e.findIndex(_=>_.equals(u));f>=0&&(Re(f<256,"Max lookup table index exceeded"),n.push(f),i.push(u),this.keyMetaMap.delete(o))}return[n,i]}},Yl="Reached end of buffer unexpectedly";function Or(r){if(r.length===0)throw new Error(Yl);return r.shift()}function jt(r,...e){let[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error(Yl);return r.splice(...e)}var Rn=class r{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new Z(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:mt.default.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Yn(this.staticAccountKeys)}static compile(e){let t=qo.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),s=new Yn(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:mt.default.encode(u.data)}));return new r({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:s})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){let n=e-t,o=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<o}else{let n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){let e=this.accountKeys.length,t=[];Yt(t,e);let n=this.instructions.map(A=>{let{accounts:I,programIdIndex:v}=A,B=Array.from(mt.default.decode(A.data)),T=[];Yt(T,I.length);let P=[];return Yt(P,B.length),{programIdIndex:v,keyIndicesCount:ie.Buffer.from(T),keyIndices:I,dataLength:ie.Buffer.from(P),data:B}}),i=[];Yt(i,n.length);let o=ie.Buffer.alloc(En);ie.Buffer.from(i).copy(o);let s=i.length;n.forEach(A=>{let v=O.struct([O.u8("programIdIndex"),O.blob(A.keyIndicesCount.length,"keyIndicesCount"),O.seq(O.u8("keyIndex"),A.keyIndices.length,"keyIndices"),O.blob(A.dataLength.length,"dataLength"),O.seq(O.u8("userdatum"),A.data.length,"data")]).encode(A,o,s);s+=v}),o=o.slice(0,s);let u=O.struct([O.blob(1,"numRequiredSignatures"),O.blob(1,"numReadonlySignedAccounts"),O.blob(1,"numReadonlyUnsignedAccounts"),O.blob(t.length,"keyCount"),O.seq(ue("key"),e,"keys"),ue("recentBlockhash")]),f={numRequiredSignatures:ie.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ie.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ie.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ie.Buffer.from(t),keys:this.accountKeys.map(A=>le(A.toBytes())),recentBlockhash:mt.default.decode(this.recentBlockhash)},_=ie.Buffer.alloc(2048),S=u.encode(f,_);return o.copy(_,S),_.slice(0,S+o.length)}static from(e){let t=[...e],n=Or(t);if(n!==(n&$l))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let i=Or(t),o=Or(t),s=Gt(t),u=[];for(let I=0;I<s;I++){let v=jt(t,0,Zr);u.push(new Z(ie.Buffer.from(v)))}let f=jt(t,0,Zr),_=Gt(t),S=[];for(let I=0;I<_;I++){let v=Or(t),B=Gt(t),T=jt(t,0,B),P=Gt(t),M=jt(t,0,P),L=mt.default.encode(ie.Buffer.from(M));S.push({programIdIndex:v,accounts:T,data:L})}let A={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:o},recentBlockhash:mt.default.encode(ie.Buffer.from(f)),accountKeys:u,instructions:S};return new r(A)}},sc=class r{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(let t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Yn(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){let i=e-n,o=this.addressTableLookups.reduce((s,u)=>s+u.writableIndexes.length,0);return i<o}else if(e>=this.header.numRequiredSignatures){let i=e-t,s=n-t-this.header.numReadonlyUnsignedAccounts;return i<s}else{let i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){let t={writable:[],readonly:[]};for(let n of this.addressTableLookups){let i=e.find(o=>o.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(let o of n.writableIndexes)if(o<i.state.addresses.length)t.writable.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`);for(let o of n.readonlyIndexes)if(o<i.state.addresses.length)t.readonly.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){let t=qo.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},o=e.addressLookupTableAccounts||[];for(let S of o){let A=t.extractTableLookup(S);if(A!==void 0){let[I,{writable:v,readonly:B}]=A;n.push(I),i.writable.push(...v),i.readonly.push(...B)}}let[s,u]=t.getMessageComponents(),_=new Yn(u,i).compileInstructions(e.instructions);return new r({header:s,staticAccountKeys:u,recentBlockhash:e.recentBlockhash,compiledInstructions:_,addressTableLookups:n})}serialize(){let e=Array();Yt(e,this.staticAccountKeys.length);let t=this.serializeInstructions(),n=Array();Yt(n,this.compiledInstructions.length);let i=this.serializeAddressTableLookups(),o=Array();Yt(o,this.addressTableLookups.length);let s=O.struct([O.u8("prefix"),O.struct([O.u8("numRequiredSignatures"),O.u8("numReadonlySignedAccounts"),O.u8("numReadonlyUnsignedAccounts")],"header"),O.blob(e.length,"staticAccountKeysLength"),O.seq(ue(),this.staticAccountKeys.length,"staticAccountKeys"),ue("recentBlockhash"),O.blob(n.length,"instructionsLength"),O.blob(t.length,"serializedInstructions"),O.blob(o.length,"addressTableLookupsLength"),O.blob(i.length,"serializedAddressTableLookups")]),u=new Uint8Array(En),_=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(S=>S.toBytes()),recentBlockhash:mt.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:i},u);return u.slice(0,_)}serializeInstructions(){let e=0,t=new Uint8Array(En);for(let n of this.compiledInstructions){let i=Array();Yt(i,n.accountKeyIndexes.length);let o=Array();Yt(o,n.data.length);let s=O.struct([O.u8("programIdIndex"),O.blob(i.length,"encodedAccountKeyIndexesLength"),O.seq(O.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),O.blob(o.length,"encodedDataLength"),O.blob(n.data.length,"data")]);e+=s.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0,t=new Uint8Array(En);for(let n of this.addressTableLookups){let i=Array();Yt(i,n.writableIndexes.length);let o=Array();Yt(o,n.readonlyIndexes.length);let s=O.struct([ue("accountKey"),O.blob(i.length,"encodedWritableIndexesLength"),O.seq(O.u8(),n.writableIndexes.length,"writableIndexes"),O.blob(o.length,"encodedReadonlyIndexesLength"),O.seq(O.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=s.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e],n=Or(t),i=n&$l;Re(n!==i,"Expected versioned message but received legacy message");let o=i;Re(o===0,`Expected versioned message with version 0 but found version ${o}`);let s={numRequiredSignatures:Or(t),numReadonlySignedAccounts:Or(t),numReadonlyUnsignedAccounts:Or(t)},u=[],f=Gt(t);for(let B=0;B<f;B++)u.push(new Z(jt(t,0,Zr)));let _=mt.default.encode(jt(t,0,Zr)),S=Gt(t),A=[];for(let B=0;B<S;B++){let T=Or(t),P=Gt(t),M=jt(t,0,P),L=Gt(t),F=new Uint8Array(jt(t,0,L));A.push({programIdIndex:T,accountKeyIndexes:M,data:F})}let I=Gt(t),v=[];for(let B=0;B<I;B++){let T=new Z(jt(t,0,Zr)),P=Gt(t),M=jt(t,0,P),L=Gt(t),F=jt(t,0,L);v.push({accountKey:T,writableIndexes:M,readonlyIndexes:F})}return new r({header:s,staticAccountKeys:u,recentBlockhash:_,compiledInstructions:A,addressTableLookups:v})}};var jr=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({}),T_=ie.Buffer.alloc(Wl).fill(0),ye=class{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ie.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}},me=class r{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){let{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){let{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{let{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new ye(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let T=0;T<t.length;T++)if(t[T].programId===void 0)throw new Error(`Transaction instruction index ${T} has undefined program id`);let i=[],o=[];t.forEach(T=>{T.keys.forEach(M=>{o.push({...M})});let P=T.programId.toString();i.includes(P)||i.push(P)}),i.forEach(T=>{o.push({pubkey:new Z(T),isSigner:!1,isWritable:!1})});let s=[];o.forEach(T=>{let P=T.pubkey.toString(),M=s.findIndex(L=>L.pubkey.toString()===P);M>-1?(s[M].isWritable=s[M].isWritable||T.isWritable,s[M].isSigner=s[M].isSigner||T.isSigner):s.push(T)}),s.sort(function(T,P){if(T.isSigner!==P.isSigner)return T.isSigner?-1:1;if(T.isWritable!==P.isWritable)return T.isWritable?-1:1;let M={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return T.pubkey.toBase58().localeCompare(P.pubkey.toBase58(),"en",M)});let u=s.findIndex(T=>T.pubkey.equals(n));if(u>-1){let[T]=s.splice(u,1);T.isSigner=!0,T.isWritable=!0,s.unshift(T)}else s.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(let T of this.signatures){let P=s.findIndex(M=>M.pubkey.equals(T.publicKey));if(P>-1)s[P].isSigner||(s[P].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${T.publicKey.toString()}`)}let f=0,_=0,S=0,A=[],I=[];s.forEach(({pubkey:T,isSigner:P,isWritable:M})=>{P?(A.push(T.toString()),f+=1,M||(_+=1)):(I.push(T.toString()),M||(S+=1))});let v=A.concat(I),B=t.map(T=>{let{data:P,programId:M}=T;return{programIdIndex:v.indexOf(M.toString()),accounts:T.keys.map(L=>v.indexOf(L.pubkey.toString())),data:mt.default.encode(P)}});return B.forEach(T=>{Re(T.programIdIndex>=0),T.accounts.forEach(P=>Re(P>=0))}),new Rn({header:{numRequiredSignatures:f,numReadonlySignedAccounts:_,numReadonlyUnsignedAccounts:S},accountKeys:v,recentBlockhash:e,instructions:B})}_compile(){let e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,o)=>t[o].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");let t=new Set;this.signatures=e.filter(n=>{let i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");let t=new Set,n=[];for(let o of e){let s=o.publicKey.toString();t.has(s)||(t.add(s),n.push(o))}this.signatures=n.map(o=>({signature:null,publicKey:o.publicKey}));let i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");let t=new Set,n=[];for(let o of e){let s=o.publicKey.toString();t.has(s)||(t.add(s),n.push(o))}let i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){let n=e.serialize();t.forEach(i=>{let o=Vl(n,i.secretKey);this._addSignature(i.publicKey,le(o))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Re(t.length===64);let n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ie.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){let n={};for(let{signature:i,publicKey:o}of this.signatures)i===null?t&&(n.missing||(n.missing=[])).push(o):x_(i,e,o.toBytes())||(n.invalid||(n.invalid=[])).push(o);return n.invalid||n.missing?n:void 0}serialize(e){let{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n){let o=this._getMessageSignednessErrors(i,t);if(o){let s="Signature verification failed.";throw o.invalid&&(s+=`
Invalid signature for public key${o.invalid.length===1?"":"(s)"} [\`${o.invalid.map(u=>u.toBase58()).join("`, `")}\`].`),o.missing&&(s+=`
Missing signature for public key${o.missing.length===1?"":"(s)"} [\`${o.missing.map(u=>u.toBase58()).join("`, `")}\`].`),new Error(s)}}return this._serialize(i)}_serialize(e){let{signatures:t}=this,n=[];Yt(n,t.length);let i=n.length+t.length*64+e.length,o=ie.Buffer.alloc(i);return Re(t.length<256),ie.Buffer.from(n).copy(o,0),t.forEach(({signature:s},u)=>{s!==null&&(Re(s.length===64,"signature has invalid length"),ie.Buffer.from(s).copy(o,n.length+u*64))}),e.copy(o,n.length+t.length*64),Re(o.length<=En,`Transaction too large: ${o.length} > ${En}`),o}get keys(){return Re(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Re(this.instructions.length===1),this.instructions[0].programId}get data(){return Re(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e],n=Gt(t),i=[];for(let o=0;o<n;o++){let s=jt(t,0,Wl);i.push(mt.default.encode(ie.Buffer.from(s)))}return r.populate(Rn.from(t),i)}static populate(e,t=[]){let n=new r;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,o)=>{let s={signature:i==mt.default.encode(T_)?null:mt.default.decode(i),publicKey:e.accountKeys[o]};n.signatures.push(s)}),e.instructions.forEach(i=>{let o=i.accounts.map(s=>{let u=e.accountKeys[s];return{pubkey:u,isSigner:n.signatures.some(f=>f.publicKey.toString()===u.toString())||e.isAccountSigner(s),isWritable:e.isAccountWritable(s)}});n.instructions.push(new ye({keys:o,programId:e.accountKeys[i.programIdIndex],data:mt.default.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}};var L_=160,C_=64,M_=L_/C_,jl=1e3/M_,Ir=new Z("SysvarC1ock11111111111111111111111111111111"),oR=new Z("SysvarEpochSchedu1e111111111111111111111111"),sR=new Z("Sysvar1nstructions1111111111111111111111111"),ja=new Z("SysvarRecentB1ockHashes11111111111111111111"),Ni=new Z("SysvarRent111111111111111111111111111111111"),aR=new Z("SysvarRewards111111111111111111111111111111"),cR=new Z("SysvarS1otHashes111111111111111111111111111"),uR=new Z("SysvarS1otHistory11111111111111111111111111"),Xa=new Z("SysvarStakeHistory1111111111111111111111111"),ki=class extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:i}){let o=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",s="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.",u;switch(e){case"send":u=`Transaction ${t} resulted in an error. 
${n}. `+o+s;break;case"simulate":u=`Simulation failed. 
Message: ${n}. 
`+o+s;break;default:u=`Unknown action '${(f=>f)(e)}'`}super(u),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){let o=i.meta.logMessages;this.transactionLogs=o,t(o)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}};var J=class extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}};async function vl(r,e,t,n){let i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},o=await r.sendTransaction(e,t,i),s;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)s=(await r.confirmTransaction({abortSignal:n?.abortSignal,signature:o,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){let{nonceInstruction:u}=e.nonceInfo,f=u.keys[0].pubkey;s=(await r.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:o},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(await r.confirmTransaction(o,n&&n.commitment)).value;if(s.err)throw o!=null?new ki({action:"send",signature:o,transactionMessage:`Status: (${JSON.stringify(s)})`}):new Error(`Transaction ${o} failed (${JSON.stringify(s)})`);return o}function wn(r){return new Promise(e=>setTimeout(e,r))}function he(r,e){let t=r.layout.span>=0?r.layout.span:Gl(r,e),n=ie.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}var P_=O.nu64("lamportsPerSignature"),Xl=O.struct([O.u32("version"),O.u32("state"),ue("authorizedPubkey"),ue("nonce"),O.struct([P_],"feeCalculator")]),Il=Xl.span,ac=class r{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){let t=Xl.decode(le(e),0);return new r({authorizedPubkey:new Z(t.authorizedPubkey),nonce:new Z(t.nonce).toString(),feeCalculator:t.feeCalculator})}};function jn(r){let e=(0,Kl.blob)(8,r),t=e.decode.bind(e),n=e.encode.bind(e),i=e,o=kf();return i.decode=(s,u)=>{let f=t(s,u);return o.decode(f)},i.encode=(s,u,f)=>{let _=o.encode(s);return n(_,u,f)},i}var Wt=Object.freeze({Create:{index:0,layout:O.struct([O.u32("instruction"),O.ns64("lamports"),O.ns64("space"),ue("programId")])},Assign:{index:1,layout:O.struct([O.u32("instruction"),ue("programId")])},Transfer:{index:2,layout:O.struct([O.u32("instruction"),jn("lamports")])},CreateWithSeed:{index:3,layout:O.struct([O.u32("instruction"),ue("base"),Gn("seed"),O.ns64("lamports"),O.ns64("space"),ue("programId")])},AdvanceNonceAccount:{index:4,layout:O.struct([O.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:O.struct([O.u32("instruction"),O.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:O.struct([O.u32("instruction"),ue("authorized")])},AuthorizeNonceAccount:{index:7,layout:O.struct([O.u32("instruction"),ue("authorized")])},Allocate:{index:8,layout:O.struct([O.u32("instruction"),O.ns64("space")])},AllocateWithSeed:{index:9,layout:O.struct([O.u32("instruction"),ue("base"),Gn("seed"),O.ns64("space"),ue("programId")])},AssignWithSeed:{index:10,layout:O.struct([O.u32("instruction"),ue("base"),Gn("seed"),ue("programId")])},TransferWithSeed:{index:11,layout:O.struct([O.u32("instruction"),jn("lamports"),Gn("seed"),ue("programId")])},UpgradeNonceAccount:{index:12,layout:O.struct([O.u32("instruction")])}}),ut=class r{constructor(){}static createAccount(e){let t=Wt.Create,n=he(t,{lamports:e.lamports,space:e.space,programId:le(e.programId.toBuffer())});return new ye({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){let i=Wt.TransferWithSeed;t=he(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:le(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{let i=Wt.Transfer;t=he(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new ye({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){let i=Wt.AssignWithSeed;t=he(i,{base:le(e.basePubkey.toBuffer()),seed:e.seed,programId:le(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=Wt.Assign;t=he(i,{programId:le(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new ye({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){let t=Wt.CreateWithSeed,n=he(t,{base:le(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:le(e.programId.toBuffer())}),i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new ye({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){let t=new me;"basePubkey"in e&&"seed"in e?t.add(r.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Il,programId:this.programId})):t.add(r.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Il,programId:this.programId}));let n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){let t=Wt.InitializeNonceAccount,n=he(t,{authorized:le(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:ja,isSigner:!1,isWritable:!1},{pubkey:Ni,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new ye(i)}static nonceAdvance(e){let t=Wt.AdvanceNonceAccount,n=he(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:ja,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new ye(i)}static nonceWithdraw(e){let t=Wt.WithdrawNonceAccount,n=he(t,{lamports:e.lamports});return new ye({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:ja,isSigner:!1,isWritable:!1},{pubkey:Ni,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){let t=Wt.AuthorizeNonceAccount,n=he(t,{authorized:le(e.newAuthorizedPubkey.toBuffer())});return new ye({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){let i=Wt.AllocateWithSeed;t=he(i,{base:le(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:le(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=Wt.Allocate;t=he(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new ye({keys:n,programId:this.programId,data:t})}};ut.programId=new Z("11111111111111111111111111111111");var U_=En-300,cc=class r{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/r.chunkSize)+1+1)}static async load(e,t,n,i,o){{let A=await e.getMinimumBalanceForRentExemption(o.length),I=await e.getAccountInfo(n.publicKey,"confirmed"),v=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==o.length&&(v=v||new me,v.add(ut.allocate({accountPubkey:n.publicKey,space:o.length}))),I.owner.equals(i)||(v=v||new me,v.add(ut.assign({accountPubkey:n.publicKey,programId:i}))),I.lamports<A&&(v=v||new me,v.add(ut.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:A-I.lamports})))}else v=new me().add(ut.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:A>0?A:1,space:o.length,programId:i}));v!==null&&await vl(e,v,[t,n],{commitment:"confirmed"})}let s=O.struct([O.u32("instruction"),O.u32("offset"),O.u32("bytesLength"),O.u32("bytesLengthPadding"),O.seq(O.u8("byte"),O.offset(O.u32(),-8),"bytes")]),u=r.chunkSize,f=0,_=o,S=[];for(;_.length>0;){let A=_.slice(0,u),I=ie.Buffer.alloc(u+16);s.encode({instruction:0,offset:f,bytes:A,bytesLength:0,bytesLengthPadding:0},I);let v=new me().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:I});S.push(vl(e,v,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await wn(1e3/4),f+=u,_=_.slice(u)}await Promise.all(S);{let A=O.struct([O.u32("instruction")]),I=ie.Buffer.alloc(A.span);A.encode({instruction:1},I);let v=new me().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Ni,isSigner:!1,isWritable:!1}],programId:i,data:I}),B="processed",T=await e.sendTransaction(v,[t,n],{preflightCommitment:B}),{context:P,value:M}=await e.confirmTransaction({signature:T,lastValidBlockHeight:v.lastValidBlockHeight,blockhash:v.recentBlockhash},B);if(M.err)throw new Error(`Transaction ${T} failed (${JSON.stringify(M)})`);for(;;){try{if(await e.getSlot({commitment:B})>P.slot)break}catch{}await new Promise(L=>setTimeout(L,Math.round(jl/2)))}}return!0}};cc.chunkSize=U_;var fR=new Z("BPFLoader2111111111111111111111111111111111");function D_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Za,Ol;function z_(){if(Ol)return Za;Ol=1;var r=Object.prototype.toString,e=Object.keys||function(n){var i=[];for(var o in n)i.push(o);return i};function t(n,i){var o,s,u,f,_,S,A;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),i);if(A=r.call(n),A==="[object Array]"){for(u="[",s=n.length-1,o=0;o<s;o++)u+=t(n[o],!0)+",";return s>-1&&(u+=t(n[o],!0)),u+"]"}else if(A==="[object Object]"){for(f=e(n).sort(),s=f.length,u="",o=0;o<s;)_=f[o],S=t(n[_],!1),S!==void 0&&(u&&(u+=","),u+=JSON.stringify(_)+":"+S),o++;return"{"+u+"}"}else return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Za=function(n){var i=t(n,!1);if(i!==void 0)return""+i},Za}var F_=z_(),Nl=D_(F_),vi=32;function Ja(r){let e=0;for(;r>1;)r/=2,e++;return e}function K_(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}var uc=class{constructor(e,t,n,i,o){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=o}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){let t=Ja(K_(e+vi+1))-Ja(vi)-1,n=this.getSlotsInEpoch(t),i=e-(n-vi);return[t,i]}else{let t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,o=t%this.slotsPerEpoch;return[i,o]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*vi:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Ja(vi)):this.slotsPerEpoch}},q_=globalThis.fetch,fc=class extends ul{constructor(e,t,n){let i=o=>{let s=cl(o,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in s?this.underlyingSocket=s.socket:this.underlyingSocket=s,s};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){let t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){let t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}};function V_(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}var kl=56,Vo=class{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){let e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){let t=V_(H_,e),n=e.length-kl;Re(n>=0,"lookup table is invalid"),Re(n%32===0,"lookup table is invalid");let i=n/32,{addresses:o}=O.struct([O.seq(ue(),i,"addresses")]).decode(e.slice(kl));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new Z(t.authority[0]):void 0,addresses:o.map(s=>new Z(s))}}},H_={index:1,layout:O.struct([O.u32("typeIndex"),jn("deactivationSlot"),O.nu64("lastExtendedSlot"),O.u8("lastExtendedStartIndex"),O.u8(),O.seq(ue(),O.offset(O.u8(),-1),"authority")])},$_=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function W_(r){let e=r.match($_);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);let[t,n,i,o]=e,s=r.startsWith("https:")?"wss:":"ws:",u=i==null?null:parseInt(i.slice(1),10),f=u==null?"":`:${u+1}`;return`${s}//${n}${f}${o}`}var xe=Hn(xo(Z),H(),r=>new Z(r)),Zl=vo([H(),Ae("base64")]),wc=Hn(xo(ie.Buffer),Zl,r=>ie.Buffer.from(r[0],"base64")),G_=30*1e3;function Y_(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Ee(r){let e,t;if(typeof r=="string")e=r;else if(r){let{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function Bl(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Jl(r){return St([V({jsonrpc:Ae("2.0"),id:H(),result:r}),V({jsonrpc:Ae("2.0"),id:H(),error:V({code:_n(),message:H(),data:ee(Cf())})})])}var j_=Jl(_n());function ce(r){return Hn(Jl(r),j_,e=>"error"in e?e:{...e,result:W(e.result,r)})}function Ne(r){return ce(V({context:V({slot:C()}),value:r}))}function Yo(r){return V({context:V({slot:C()}),value:r})}function Qa(r,e){return r===0?new sc({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Z(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:mt.default.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Rn(e)}var X_=V({foundation:C(),foundationTerm:C(),initial:C(),taper:C(),terminal:C()}),Z_=ce(Y(j(V({epoch:C(),effectiveSlot:C(),amount:C(),postBalance:C(),commission:ee(j(C()))})))),J_=Y(V({slot:C(),prioritizationFee:C()})),Q_=V({total:C(),validator:C(),foundation:C(),epoch:C()}),e1=V({epoch:C(),slotIndex:C(),slotsInEpoch:C(),absoluteSlot:C(),blockHeight:ee(C()),transactionCount:ee(C())}),t1=V({slotsPerEpoch:C(),leaderScheduleSlotOffset:C(),warmup:rr(),firstNormalEpoch:C(),firstNormalSlot:C()}),r1=ka(H(),Y(C())),Sn=j(St([V({}),H()])),n1=V({err:Sn}),i1=Ae("receivedSignature"),o1=V({"solana-core":H(),"feature-set":ee(C())}),s1=V({program:H(),programId:xe,parsed:_n()}),a1=V({programId:xe,accounts:Y(xe),data:H()}),Tl=Ne(V({err:j(St([V({}),H()])),logs:j(Y(H())),accounts:ee(j(Y(j(V({executable:rr(),owner:H(),lamports:C(),data:Y(H()),rentEpoch:ee(C())}))))),unitsConsumed:ee(C()),returnData:ee(j(V({programId:H(),data:vo([H(),Ae("base64")])}))),innerInstructions:ee(j(Y(V({index:C(),instructions:Y(St([s1,a1]))}))))})),c1=Ne(V({byIdentity:ka(H(),Y(C())),range:V({firstSlot:C(),lastSlot:C()})}));function u1(r,e,t,n,i,o){let s=t||q_,u;o!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return n&&(f=async(S,A)=>{let I=await new Promise((v,B)=>{try{n(S,A,(T,P)=>v([T,P]))}catch(T){B(T)}});return await s(...I)}),new ql.default(async(S,A)=>{let I={method:"POST",body:S,agent:u,headers:Object.assign({"Content-Type":"application/json"},e||{},uw)};try{let v=5,B,T=500;for(;f?B=await f(r,I):B=await s(r,I),!(B.status!==429||i===!0||(v-=1,v===0));)console.error(`Server responded with ${B.status} ${B.statusText}.  Retrying after ${T}ms delay...`),await wn(T),T*=2;let P=await B.text();B.ok?A(null,P):A(new Error(`${B.status} ${B.statusText}: ${P}`))}catch(v){v instanceof Error&&A(v)}},{})}function f1(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(o,s)=>{if(o){i(o);return}n(s)})})}function l1(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);let i=e.map(o=>r.request(o.methodName,o.args));r.request(i,(o,s)=>{if(o){n(o);return}t(s)})})}var h1=ce(X_),d1=ce(Q_),p1=ce(J_),g1=ce(e1),m1=ce(t1),y1=ce(r1),_1=ce(C()),w1=Ne(V({total:C(),circulating:C(),nonCirculating:C(),nonCirculatingAccounts:Y(xe)})),lc=V({amount:H(),uiAmount:j(C()),decimals:C(),uiAmountString:ee(H())}),b1=Ne(Y(V({address:xe,amount:H(),uiAmount:j(C()),decimals:C(),uiAmountString:ee(H())}))),E1=Ne(Y(V({pubkey:xe,account:V({executable:rr(),owner:xe,lamports:C(),data:wc,rentEpoch:C()})}))),hc=V({program:H(),parsed:_n(),space:C()}),R1=Ne(Y(V({pubkey:xe,account:V({executable:rr(),owner:xe,lamports:C(),data:hc,rentEpoch:C()})}))),S1=Ne(Y(V({lamports:C(),address:xe}))),Bi=V({executable:rr(),owner:xe,lamports:C(),data:wc,rentEpoch:C()}),A1=V({pubkey:xe,account:Bi}),x1=Hn(St([xo(ie.Buffer),hc]),St([Zl,hc]),r=>Array.isArray(r)?W(r,wc):r),dc=V({executable:rr(),owner:xe,lamports:C(),data:x1,rentEpoch:C()}),v1=V({pubkey:xe,account:dc}),I1=V({state:St([Ae("active"),Ae("inactive"),Ae("activating"),Ae("deactivating")]),active:C(),inactive:C()}),O1=ce(Y(V({signature:H(),slot:C(),err:Sn,memo:j(H()),blockTime:ee(j(C()))}))),N1=ce(Y(V({signature:H(),slot:C(),err:Sn,memo:j(H()),blockTime:ee(j(C()))}))),k1=V({subscription:C(),result:Yo(Bi)}),B1=V({pubkey:xe,account:Bi}),T1=V({subscription:C(),result:Yo(B1)}),L1=V({parent:C(),slot:C(),root:C()}),C1=V({subscription:C(),result:L1}),M1=St([V({type:St([Ae("firstShredReceived"),Ae("completed"),Ae("optimisticConfirmation"),Ae("root")]),slot:C(),timestamp:C()}),V({type:Ae("createdBank"),parent:C(),slot:C(),timestamp:C()}),V({type:Ae("frozen"),slot:C(),timestamp:C(),stats:V({numTransactionEntries:C(),numSuccessfulTransactions:C(),numFailedTransactions:C(),maxTransactionsPerEntry:C()})}),V({type:Ae("dead"),slot:C(),timestamp:C(),err:H()})]),P1=V({subscription:C(),result:M1}),U1=V({subscription:C(),result:Yo(St([n1,i1]))}),D1=V({subscription:C(),result:C()}),z1=V({pubkey:H(),gossip:j(H()),tpu:j(H()),rpc:j(H()),version:j(H())}),Ll=V({votePubkey:H(),nodePubkey:H(),activatedStake:C(),epochVoteAccount:rr(),epochCredits:Y(vo([C(),C(),C()])),commission:C(),lastVote:C(),rootSlot:j(C())}),F1=ce(V({current:Y(Ll),delinquent:Y(Ll)})),K1=St([Ae("processed"),Ae("confirmed"),Ae("finalized")]),q1=V({slot:C(),confirmations:j(C()),err:Sn,confirmationStatus:ee(K1)}),V1=Ne(Y(j(q1))),H1=ce(C()),Ql=V({accountKey:xe,writableIndexes:Y(C()),readonlyIndexes:Y(C())}),bc=V({signatures:Y(H()),message:V({accountKeys:Y(H()),header:V({numRequiredSignatures:C(),numReadonlySignedAccounts:C(),numReadonlyUnsignedAccounts:C()}),instructions:Y(V({accounts:Y(C()),data:H(),programIdIndex:C()})),recentBlockhash:H(),addressTableLookups:ee(Y(Ql))})}),eh=V({pubkey:xe,signer:rr(),writable:rr(),source:ee(St([Ae("transaction"),Ae("lookupTable")]))}),th=V({accountKeys:Y(eh),signatures:Y(H())}),rh=V({parsed:_n(),program:H(),programId:xe}),nh=V({accounts:Y(xe),data:H(),programId:xe}),$1=St([nh,rh]),W1=St([V({parsed:_n(),program:H(),programId:H()}),V({accounts:Y(H()),data:H(),programId:H()})]),ih=Hn($1,W1,r=>"accounts"in r?W(r,nh):W(r,rh)),oh=V({signatures:Y(H()),message:V({accountKeys:Y(eh),instructions:Y(ih),recentBlockhash:H(),addressTableLookups:ee(j(Y(Ql)))})}),Ho=V({accountIndex:C(),mint:H(),owner:ee(H()),programId:ee(H()),uiTokenAmount:lc}),sh=V({writable:Y(xe),readonly:Y(xe)}),jo=V({err:Sn,fee:C(),innerInstructions:ee(j(Y(V({index:C(),instructions:Y(V({accounts:Y(C()),data:H(),programIdIndex:C()}))})))),preBalances:Y(C()),postBalances:Y(C()),logMessages:ee(j(Y(H()))),preTokenBalances:ee(j(Y(Ho))),postTokenBalances:ee(j(Y(Ho))),loadedAddresses:ee(sh),computeUnitsConsumed:ee(C()),costUnits:ee(C())}),Ec=V({err:Sn,fee:C(),innerInstructions:ee(j(Y(V({index:C(),instructions:Y(ih)})))),preBalances:Y(C()),postBalances:Y(C()),logMessages:ee(j(Y(H()))),preTokenBalances:ee(j(Y(Ho))),postTokenBalances:ee(j(Y(Ho))),loadedAddresses:ee(sh),computeUnitsConsumed:ee(C()),costUnits:ee(C())}),Zn=St([Ae(0),Ae("legacy")]),An=V({pubkey:H(),lamports:C(),postBalance:j(C()),rewardType:j(H()),commission:ee(j(C()))}),G1=ce(j(V({blockhash:H(),previousBlockhash:H(),parentSlot:C(),transactions:Y(V({transaction:bc,meta:j(jo),version:ee(Zn)})),rewards:ee(Y(An)),blockTime:j(C()),blockHeight:j(C())}))),Y1=ce(j(V({blockhash:H(),previousBlockhash:H(),parentSlot:C(),rewards:ee(Y(An)),blockTime:j(C()),blockHeight:j(C())}))),j1=ce(j(V({blockhash:H(),previousBlockhash:H(),parentSlot:C(),transactions:Y(V({transaction:th,meta:j(jo),version:ee(Zn)})),rewards:ee(Y(An)),blockTime:j(C()),blockHeight:j(C())}))),X1=ce(j(V({blockhash:H(),previousBlockhash:H(),parentSlot:C(),transactions:Y(V({transaction:oh,meta:j(Ec),version:ee(Zn)})),rewards:ee(Y(An)),blockTime:j(C()),blockHeight:j(C())}))),Z1=ce(j(V({blockhash:H(),previousBlockhash:H(),parentSlot:C(),transactions:Y(V({transaction:th,meta:j(Ec),version:ee(Zn)})),rewards:ee(Y(An)),blockTime:j(C()),blockHeight:j(C())}))),J1=ce(j(V({blockhash:H(),previousBlockhash:H(),parentSlot:C(),rewards:ee(Y(An)),blockTime:j(C()),blockHeight:j(C())}))),Q1=ce(j(V({blockhash:H(),previousBlockhash:H(),parentSlot:C(),transactions:Y(V({transaction:bc,meta:j(jo)})),rewards:ee(Y(An)),blockTime:j(C())}))),Cl=ce(j(V({blockhash:H(),previousBlockhash:H(),parentSlot:C(),signatures:Y(H()),blockTime:j(C())}))),ec=ce(j(V({slot:C(),meta:j(jo),blockTime:ee(j(C())),transaction:bc,version:ee(Zn)}))),Uo=ce(j(V({slot:C(),transaction:oh,meta:j(Ec),blockTime:ee(j(C())),version:ee(Zn)}))),ew=Ne(V({blockhash:H(),lastValidBlockHeight:C()})),tw=Ne(rr()),rw=V({slot:C(),numTransactions:C(),numSlots:C(),samplePeriodSecs:C()}),nw=ce(Y(rw)),iw=Ne(j(V({feeCalculator:V({lamportsPerSignature:C()})}))),ow=ce(H()),sw=ce(H()),aw=V({err:Sn,logs:Y(H()),signature:H()}),cw=V({result:Yo(aw),subscription:C()}),uw={"solana-client":"js/1.0.0-maintenance"},$o=class{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{let _={};return async S=>{let{commitment:A,config:I}=Ee(S),v=this._buildArgs([],A,void 0,I),B=Nl(v);return _[B]=_[B]??(async()=>{try{let T=await this._rpcRequest("getBlockHeight",v),P=W(T,ce(C()));if("error"in P)throw new J(P.error,"failed to get block height information");return P.result}finally{delete _[B]}})(),await _[B]}})();let n,i,o,s,u,f;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,o=t.fetch,s=t.fetchMiddleware,u=t.disableRetryOnRateLimit,f=t.httpAgent),this._rpcEndpoint=Y_(e),this._rpcWsEndpoint=n||W_(e),this._rpcClient=u1(e,i,o,s,u,f),this._rpcRequest=f1(this._rpcClient),this._rpcBatchRequest=l1(this._rpcClient),this._rpcWebSocket=new fc(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){let{commitment:n,config:i}=Ee(t),o=this._buildArgs([e.toBase58()],n,void 0,i),s=await this._rpcRequest("getBalance",o),u=W(s,Ne(C()));if("error"in u)throw new J(u.error,`failed to get balance for ${e.toBase58()}`);return u.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){let t=await this._rpcRequest("getBlockTime",[e]),n=W(t,ce(j(C())));if("error"in n)throw new J(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){let e=await this._rpcRequest("minimumLedgerSlot",[]),t=W(e,ce(C()));if("error"in t)throw new J(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){let e=await this._rpcRequest("getFirstAvailableBlock",[]),t=W(e,_1);if("error"in t)throw new J(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};let n=await this._rpcRequest("getSupply",[t]),i=W(n,w1);if("error"in i)throw new J(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){let n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),o=W(i,Ne(lc));if("error"in o)throw new J(o.error,"failed to get token supply");return o.result}async getTokenAccountBalance(e,t){let n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),o=W(i,Ne(lc));if("error"in o)throw new J(o.error,"failed to get token account balance");return o.result}async getTokenAccountsByOwner(e,t,n){let{commitment:i,config:o}=Ee(n),s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});let u=this._buildArgs(s,i,"base64",o),f=await this._rpcRequest("getTokenAccountsByOwner",u),_=W(f,E1);if("error"in _)throw new J(_.error,`failed to get token accounts owned by account ${e.toBase58()}`);return _.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});let o=this._buildArgs(i,n,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",o),u=W(s,R1);if("error"in u)throw new J(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getLargestAccounts(e){let t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),o=W(i,S1);if("error"in o)throw new J(o.error,"failed to get largest accounts");return o.result}async getTokenLargestAccounts(e,t){let n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),o=W(i,b1);if("error"in o)throw new J(o.error,"failed to get token largest accounts");return o.result}async getAccountInfoAndContext(e,t){let{commitment:n,config:i}=Ee(t),o=this._buildArgs([e.toBase58()],n,"base64",i),s=await this._rpcRequest("getAccountInfo",o),u=W(s,Ne(j(Bi)));if("error"in u)throw new J(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getParsedAccountInfo(e,t){let{commitment:n,config:i}=Ee(t),o=this._buildArgs([e.toBase58()],n,"jsonParsed",i),s=await this._rpcRequest("getAccountInfo",o),u=W(s,Ne(j(dc)));if("error"in u)throw new J(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){let{commitment:n,config:i}=Ee(t),o=e.map(_=>_.toBase58()),s=this._buildArgs([o],n,"jsonParsed",i),u=await this._rpcRequest("getMultipleAccounts",s),f=W(u,Ne(Y(j(dc))));if("error"in f)throw new J(f.error,`failed to get info for accounts ${o}`);return f.result}async getMultipleAccountsInfoAndContext(e,t){let{commitment:n,config:i}=Ee(t),o=e.map(_=>_.toBase58()),s=this._buildArgs([o],n,"base64",i),u=await this._rpcRequest("getMultipleAccounts",s),f=W(u,Ne(Y(j(Bi))));if("error"in f)throw new J(f.error,`failed to get info for accounts ${o}`);return f.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){let{commitment:i,config:o}=Ee(t),s=this._buildArgs([e.toBase58()],i,void 0,{...o,epoch:n??o?.epoch}),u=await this._rpcRequest("getStakeActivation",s),f=W(u,ce(I1));if("error"in f)throw new J(f.error,`failed to get Stake Activation ${e.toBase58()}`);return f.result}async getProgramAccounts(e,t){let{commitment:n,config:i}=Ee(t),{encoding:o,...s}=i||{},u=this._buildArgs([e.toBase58()],n,o||"base64",{...s,...s.filters?{filters:Bl(s.filters)}:null}),f=await this._rpcRequest("getProgramAccounts",u),_=Y(A1),S=s.withContext===!0?W(f,Ne(_)):W(f,ce(_));if("error"in S)throw new J(S.error,`failed to get accounts owned by program ${e.toBase58()}`);return S.result}async getParsedProgramAccounts(e,t){let{commitment:n,config:i}=Ee(t),o=this._buildArgs([e.toBase58()],n,"jsonParsed",i),s=await this._rpcRequest("getProgramAccounts",o),u=W(s,ce(Y(v1)));if("error"in u)throw new J(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async confirmTransaction(e,t){let n;if(typeof e=="string")n=e;else{let o=e;if(o.abortSignal?.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=mt.default.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Re(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,o=!1,s=new Promise((f,_)=>{try{n=this.onSignature(t,(A,I)=>{n=void 0;let v={context:I,value:A};f({__type:jr.PROCESSED,response:v})},e);let S=new Promise(A=>{n==null?A():i=this._onSubscriptionStateChange(n,I=>{I==="subscribed"&&A()})});(async()=>{if(await S,o)return;let A=await this.getSignatureStatus(t);if(o||A==null)return;let{context:I,value:v}=A;if(v!=null)if(v?.err)_(v.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(v.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(v.confirmationStatus==="processed"||v.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}o=!0,f({__type:jr.PROCESSED,response:{context:I,value:v}})}})()}catch(S){_(S)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let o=!1,s=new Promise(A=>{let I=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let v=await I();if(!o){for(;v<=n;)if(await wn(1e3),o||(v=await I(),o))return;A({__type:jr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),_=this.getCancellationPromise(t),S;try{let A=await Promise.race([_,f,s]);if(A.__type===jr.PROCESSED)S=A.response;else throw new Fo(i)}finally{o=!0,u()}return S}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:o,signature:s}}){let u=!1,f=new Promise(v=>{let B=o,T=null,P=async()=>{try{let{context:M,value:L}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return T=M.slot,L?.nonce}catch{return B}};(async()=>{if(B=await P(),!u)for(;;){if(o!==B){v({__type:jr.NONCE_INVALID,slotInWhichNonceDidAdvance:T});return}if(await wn(2e3),u||(B=await P(),u))return}})()}),{abortConfirmation:_,confirmationPromise:S}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),A=this.getCancellationPromise(t),I;try{let v=await Promise.race([A,S,f]);if(v.__type===jr.PROCESSED)I=v.response;else{let B;for(;;){let T=await this.getSignatureStatus(s);if(T==null)break;if(T.context.slot<(v.slotInWhichNonceDidAdvance??n)){await wn(400);continue}B=T;break}if(B?.value){let T=e||"finalized",{confirmationStatus:P}=B.value;switch(T){case"processed":case"recent":if(P!=="processed"&&P!=="confirmed"&&P!=="finalized")throw new bn(s);break;case"confirmed":case"single":case"singleGossip":if(P!=="confirmed"&&P!=="finalized")throw new bn(s);break;case"finalized":case"max":case"root":if(P!=="finalized")throw new bn(s);break;default:}I={context:B.context,value:{err:B.value.err}}}else throw new bn(s)}}finally{u=!0,_()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n,i=new Promise(f=>{let _=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{_=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>f({__type:jr.TIMED_OUT,timeoutMs:_}),_)}),{abortConfirmation:o,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:e,signature:t}),u;try{let f=await Promise.race([s,i]);if(f.__type===jr.PROCESSED)u=f.response;else throw new Ko(t,f.timeoutMs/1e3)}finally{clearTimeout(n),o()}return u}async getClusterNodes(){let e=await this._rpcRequest("getClusterNodes",[]),t=W(e,ce(Y(z1)));if("error"in t)throw new J(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){let t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=W(n,F1);if("error"in i)throw new J(i.error,"failed to get vote accounts");return i.result}async getSlot(e){let{commitment:t,config:n}=Ee(e),i=this._buildArgs([],t,void 0,n),o=await this._rpcRequest("getSlot",i),s=W(o,ce(C()));if("error"in s)throw new J(s.error,"failed to get slot");return s.result}async getSlotLeader(e){let{commitment:t,config:n}=Ee(e),i=this._buildArgs([],t,void 0,n),o=await this._rpcRequest("getSlotLeader",i),s=W(o,ce(H()));if("error"in s)throw new J(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(e,t){let n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),o=W(i,ce(Y(xe)));if("error"in o)throw new J(o.error,"failed to get slot leaders");return o.result}async getSignatureStatus(e,t){let{context:n,value:i}=await this.getSignatureStatuses([e],t);Re(i.length===1);let o=i[0];return{context:n,value:o}}async getSignatureStatuses(e,t){let n=[e];t&&n.push(t);let i=await this._rpcRequest("getSignatureStatuses",n),o=W(i,V1);if("error"in o)throw new J(o.error,"failed to get signature status");return o.result}async getTransactionCount(e){let{commitment:t,config:n}=Ee(e),i=this._buildArgs([],t,void 0,n),o=await this._rpcRequest("getTransactionCount",i),s=W(o,ce(C()));if("error"in s)throw new J(s.error,"failed to get transaction count");return s.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){let t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=W(n,h1);if("error"in i)throw new J(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){let{commitment:i,config:o}=Ee(n),s=this._buildArgs([e.map(_=>_.toBase58())],i,void 0,{...o,epoch:t??o?.epoch}),u=await this._rpcRequest("getInflationReward",s),f=W(u,Z_);if("error"in f)throw new J(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){let e=await this._rpcRequest("getInflationRate",[]),t=W(e,d1);if("error"in t)throw new J(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){let{commitment:t,config:n}=Ee(e),i=this._buildArgs([],t,void 0,n),o=await this._rpcRequest("getEpochInfo",i),s=W(o,g1);if("error"in s)throw new J(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){let e=await this._rpcRequest("getEpochSchedule",[]),t=W(e,m1);if("error"in t)throw new J(t.error,"failed to get epoch schedule");let n=t.result;return new uc(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){let e=await this._rpcRequest("getLeaderSchedule",[]),t=W(e,y1);if("error"in t)throw new J(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){let n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),o=W(i,H1);return"error"in o?(console.warn("Unable to fetch minimum balance for rent exemption"),0):o.result}async getRecentBlockhashAndContext(e){let{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){let t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=W(t,nw);if("error"in n)throw new J(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){let n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),o=W(i,iw);if("error"in o)throw new J(o.error,"failed to get fee calculator");let{context:s,value:u}=o.result;return{context:s,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(e,t){let n=le(e.serialize()).toString("base64"),i=this._buildArgs([n],t),o=await this._rpcRequest("getFeeForMessage",i),s=W(o,Ne(j(C())));if("error"in s)throw new J(s.error,"failed to get fee for message");if(s.result===null)throw new Error("invalid blockhash");return s.result}async getRecentPrioritizationFees(e){let t=e?.lockedWritableAccounts?.map(s=>s.toBase58()),n=t?.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),o=W(i,p1);if("error"in o)throw new J(o.error,"failed to get recent prioritization fees");return o.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){let{commitment:t,config:n}=Ee(e),i=this._buildArgs([],t,void 0,n),o=await this._rpcRequest("getLatestBlockhash",i),s=W(o,ew);if("error"in s)throw new J(s.error,"failed to get latest blockhash");return s.result}async isBlockhashValid(e,t){let{commitment:n,config:i}=Ee(t),o=this._buildArgs([e],n,void 0,i),s=await this._rpcRequest("isBlockhashValid",o),u=W(s,tw);if("error"in u)throw new J(u.error,"failed to determine if the blockhash `"+e+"`is valid");return u.result}async getVersion(){let e=await this._rpcRequest("getVersion",[]),t=W(e,ce(o1));if("error"in t)throw new J(t.error,"failed to get version");return t.result}async getGenesisHash(){let e=await this._rpcRequest("getGenesisHash",[]),t=W(e,ce(H()));if("error"in t)throw new J(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){let{commitment:n,config:i}=Ee(t),o=this._buildArgsAtLeastConfirmed([e],n,void 0,i),s=await this._rpcRequest("getBlock",o);try{switch(i?.transactionDetails){case"accounts":{let u=W(s,j1);if("error"in u)throw u.error;return u.result}case"none":{let u=W(s,Y1);if("error"in u)throw u.error;return u.result}default:{let u=W(s,G1);if("error"in u)throw u.error;let{result:f}=u;return f?{...f,transactions:f.transactions.map(({transaction:_,meta:S,version:A})=>({meta:S,transaction:{..._,message:Qa(A,_.message)},version:A}))}:null}}}catch(u){throw new J(u,"failed to get confirmed block")}}async getParsedBlock(e,t){let{commitment:n,config:i}=Ee(t),o=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),s=await this._rpcRequest("getBlock",o);try{switch(i?.transactionDetails){case"accounts":{let u=W(s,Z1);if("error"in u)throw u.error;return u.result}case"none":{let u=W(s,J1);if("error"in u)throw u.error;return u.result}default:{let u=W(s,X1);if("error"in u)throw u.error;return u.result}}}catch(u){throw new J(u,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){let{commitment:u,...f}=e;n=u,t=f}let i=this._buildArgs([],n,"base64",t),o=await this._rpcRequest("getBlockProduction",i),s=W(o,c1);if("error"in s)throw new J(s.error,"failed to get block production information");return s.result}async getTransaction(e,t){let{commitment:n,config:i}=Ee(t),o=this._buildArgsAtLeastConfirmed([e],n,void 0,i),s=await this._rpcRequest("getTransaction",o),u=W(s,ec);if("error"in u)throw new J(u.error,"failed to get transaction");let f=u.result;return f&&{...f,transaction:{...f.transaction,message:Qa(f.version,f.transaction.message)}}}async getParsedTransaction(e,t){let{commitment:n,config:i}=Ee(t),o=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),s=await this._rpcRequest("getTransaction",o),u=W(s,Uo);if("error"in u)throw new J(u.error,"failed to get transaction");return u.result}async getParsedTransactions(e,t){let{commitment:n,config:i}=Ee(t),o=e.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(o)).map(f=>{let _=W(f,Uo);if("error"in _)throw new J(_.error,"failed to get transactions");return _.result})}async getTransactions(e,t){let{commitment:n,config:i}=Ee(t),o=e.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],n,void 0,i)}));return(await this._rpcBatchRequest(o)).map(f=>{let _=W(f,ec);if("error"in _)throw new J(_.error,"failed to get transactions");let S=_.result;return S&&{...S,transaction:{...S.transaction,message:Qa(S.version,S.transaction.message)}}})}async getConfirmedBlock(e,t){let n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getBlock",n),o=W(i,Q1);if("error"in o)throw new J(o.error,"failed to get confirmed block");let s=o.result;if(!s)throw new Error("Confirmed block "+e+" not found");let u={...s,transactions:s.transactions.map(({transaction:f,meta:_})=>{let S=new Rn(f.message);return{meta:_,transaction:{...f,message:S}}})};return{...u,transactions:u.transactions.map(({transaction:f,meta:_})=>({meta:_,transaction:me.populate(f.message,f.signatures)}))}}async getBlocks(e,t,n){let i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),o=await this._rpcRequest("getBlocks",i),s=W(o,ce(Y(C())));if("error"in s)throw new J(s.error,"failed to get blocks");return s.result}async getBlockSignatures(e,t){let n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),o=W(i,Cl);if("error"in o)throw new J(o.error,"failed to get block");let s=o.result;if(!s)throw new Error("Block "+e+" not found");return s}async getConfirmedBlockSignatures(e,t){let n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),o=W(i,Cl);if("error"in o)throw new J(o.error,"failed to get confirmed block");let s=o.result;if(!s)throw new Error("Confirmed block "+e+" not found");return s}async getConfirmedTransaction(e,t){let n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getTransaction",n),o=W(i,ec);if("error"in o)throw new J(o.error,"failed to get transaction");let s=o.result;if(!s)return s;let u=new Rn(s.transaction.message),f=s.transaction.signatures;return{...s,transaction:me.populate(u,f)}}async getParsedConfirmedTransaction(e,t){let n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getTransaction",n),o=W(i,Uo);if("error"in o)throw new J(o.error,"failed to get confirmed transaction");return o.result}async getParsedConfirmedTransactions(e,t){let n=e.map(s=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([s],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(s=>{let u=W(s,Uo);if("error"in u)throw new J(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},o=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<o));)try{let f=await this.getConfirmedBlockSignatures(t,"finalized");f.signatures.length>0&&(i.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let s=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>s));)try{let f=await this.getConfirmedBlockSignatures(n);f.signatures.length>0&&(i.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(e,t,n){let i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),o=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),s=W(o,O1);if("error"in s)throw new J(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(e,t,n){let i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),o=await this._rpcRequest("getSignaturesForAddress",i),s=W(o,N1);if("error"in s)throw new J(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(e,t){let{context:n,value:i}=await this.getAccountInfoAndContext(e,t),o=null;return i!==null&&(o=new Vo({key:e,state:Vo.deserialize(i.data)})),{context:n,value:o}}async getNonceAndContext(e,t){let{context:n,value:i}=await this.getAccountInfoAndContext(e,t),o=null;return i!==null&&(o=ac.fromAccountData(i.data)),{context:n,value:o}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){let n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=W(n,ow);if("error"in i)throw new J(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await wn(100);let n=Date.now()-this._blockhashInfo.lastFetch>=G_;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){let o=await this.getLatestBlockhash("finalized");if(n!==o.blockhash)return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},o;await wn(jl/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){let{commitment:t,config:n}=Ee(e),i=this._buildArgs([],t,"base64",n),o=await this._rpcRequest("getStakeMinimumDelegation",i),s=W(o,Ne(C()));if("error"in s)throw new J(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(e,t,n){if("message"in e){let T=e.serialize(),P=ie.Buffer.from(T).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");let M=t||{};M.encoding="base64","commitment"in M||(M.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(M.innerInstructions=t.innerInstructions);let L=[P,M],F=await this._rpcRequest("simulateTransaction",L),$=W(F,Tl);if("error"in $)throw new Error("failed to simulate transaction: "+$.error.message);return $.result}let i;if(e instanceof me){let B=e;i=new me,i.feePayer=B.feePayer,i.instructions=e.instructions,i.nonceInfo=B.nonceInfo,i.signatures=B.signatures}else i=me.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");let o=t;if(i.nonceInfo&&o)i.sign(...o);else{let B=this._disableBlockhashCaching;for(;;){let T=await this._blockhashWithExpiryBlockHeight(B);if(i.lastValidBlockHeight=T.lastValidBlockHeight,i.recentBlockhash=T.blockhash,!o)break;if(i.sign(...o),!i.signature)throw new Error("!signature");let P=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(P)&&!this._blockhashInfo.transactionSignatures.includes(P)){this._blockhashInfo.simulatedSignatures.push(P);break}else B=!0}}let s=i._compile(),u=s.serialize(),_=i._serialize(u).toString("base64"),S={encoding:"base64",commitment:this.commitment};if(n){let B=(Array.isArray(n)?n:s.nonProgramIds()).map(T=>T.toBase58());S.accounts={encoding:"base64",addresses:B}}o&&(S.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(S.innerInstructions=t.innerInstructions);let A=[_,S],I=await this._rpcRequest("simulateTransaction",A),v=W(I,Tl);if("error"in v){let B;if("data"in v.error&&(B=v.error.data.logs,B&&Array.isArray(B))){let T=`
    `,P=T+B.join(T);console.error(v.error.message,P)}throw new ki({action:"simulate",signature:"",transactionMessage:v.error.message,logs:B})}return v.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");let s=e.serialize();return await this.sendRawTransaction(s,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");let i=t;if(e.nonceInfo)e.sign(...i);else{let s=this._disableBlockhashCaching;for(;;){let u=await this._blockhashWithExpiryBlockHeight(s);if(e.lastValidBlockHeight=u.lastValidBlockHeight,e.recentBlockhash=u.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");let f=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))s=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}let o=e.serialize();return await this.sendRawTransaction(o,n)}async sendRawTransaction(e,t){let n=le(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){let n={encoding:"base64"},i=t&&t.skipPreflight,o=i===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),o&&(n.preflightCommitment=o);let s=[e,n],u=await this._rpcRequest("sendTransaction",s),f=W(u,sw);if("error"in f){let _;throw"data"in f.error&&(_=f.error.data.logs),new ki({action:i?"send":"simulate",signature:"",transactionMessage:f.error.message,logs:_})}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){let n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,n!==t.state){let i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var o;let n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};let i=(o=this._subscriptionStateChangeCallbacksByHash)[n]||(o[n]=new Set);return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{let i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{let{args:o,method:s}=i;try{this._setSubscription(n,{...i,state:"subscribing"});let u=await this._rpcWebSocket.call(s,o);this._setSubscription(n,{...i,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=i.callbacks,await this._updateSubscriptions()}catch(u){if(console.error(`Received ${u instanceof Error?"":"JSON-RPC "}error calling \`${s}\``,{args:o,error:u}),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{let{serverSubscriptionId:o,unsubscribeMethod:s}=i;if(this._subscriptionsAutoDisposedByRpc.has(o))this._subscriptionsAutoDisposedByRpc.delete(o);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(s,[o])}catch(u){if(u instanceof Error&&console.error(`${s} error:`,u.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){let n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(o){console.error(o)}})}_wsOnAccountNotification(e){let{result:t,subscription:n}=W(e,k1);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){let n=this._nextClientSubscriptionId++,i=Nl([e.method,t]),o=this._subscriptionsByHash[i];return o===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:o.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];let s=this._subscriptionsByHash[i];Re(s!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),s.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){let{commitment:i,config:o}=Ee(n),s=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){let{result:t,subscription:n}=W(e,T1);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){let{commitment:o,config:s}=Ee(n),u=this._buildArgs([e.toBase58()],o||this._commitment||"finalized","base64",s||(i?{filters:Bl(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},u)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){let i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){let{result:t,subscription:n}=W(e,cw);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){let{result:t,subscription:n}=W(e,C1);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){let{result:t,subscription:n}=W(e,P1);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){let n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){let o=t||this._commitment;if(o||n||i){let s={};n&&(s.encoding=n),o&&(s.commitment=o),i&&(s=Object.assign(s,i)),e.push(s)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){let o=t||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){let{result:t,subscription:n}=W(e,U1);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){let i=this._buildArgs([e],n||this._commitment||"finalized"),o=this._makeSubscription({callback:(s,u)=>{if(s.type==="status"){t(s.result,u);try{this.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return o}onSignatureWithOptions(e,t,n){let{commitment:i,...o}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},s=this._buildArgs([e],i,void 0,o),u=this._makeSubscription({callback:(f,_)=>{t(f,_);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return u}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){let{result:t,subscription:n}=W(e,D1);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}},pc=class r{constructor(e){this._keypair=void 0,this._keypair=e??Sl()}static generate(){return new r(Sl())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");let n=e.slice(32,64);if(!t||!t.skipValidation){let i=e.slice(0,32),o=ic(i);for(let s=0;s<32;s++)if(n[s]!==o[s])throw new Error("provided secretKey is invalid")}return new r({publicKey:n,secretKey:e})}static fromSeed(e){let t=ic(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new r({publicKey:t,secretKey:n})}get publicKey(){return new Z(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},Ii=Object.freeze({CreateLookupTable:{index:0,layout:O.struct([O.u32("instruction"),jn("recentSlot"),O.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:O.struct([O.u32("instruction")])},ExtendLookupTable:{index:2,layout:O.struct([O.u32("instruction"),jn(),O.seq(ue(),O.offset(O.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:O.struct([O.u32("instruction")])},CloseLookupTable:{index:4,layout:O.struct([O.u32("instruction")])}});var gc=class{constructor(){}static createLookupTable(e){let[t,n]=Z.findProgramAddressSync([e.authority.toBuffer(),Ia().encode(e.recentSlot)],this.programId),i=Ii.CreateLookupTable,o=he(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:ut.programId,isSigner:!1,isWritable:!1}];return[new ye({programId:this.programId,keys:s,data:o}),t]}static freezeLookupTable(e){let t=Ii.FreezeLookupTable,n=he(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new ye({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){let t=Ii.ExtendLookupTable,n=he(t,{addresses:e.addresses.map(o=>o.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:ut.programId,isSigner:!1,isWritable:!1}),new ye({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){let t=Ii.DeactivateLookupTable,n=he(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new ye({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){let t=Ii.CloseLookupTable,n=he(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new ye({programId:this.programId,keys:i,data:n})}};gc.programId=new Z("AddressLookupTab1e1111111111111111111111111");var Do=Object.freeze({RequestUnits:{index:0,layout:O.struct([O.u8("instruction"),O.u32("units"),O.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:O.struct([O.u8("instruction"),O.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:O.struct([O.u8("instruction"),O.u32("units")])},SetComputeUnitPrice:{index:3,layout:O.struct([O.u8("instruction"),jn("microLamports")])}}),mc=class{constructor(){}static requestUnits(e){let t=Do.RequestUnits,n=he(t,e);return new ye({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){let t=Do.RequestHeapFrame,n=he(t,e);return new ye({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){let t=Do.SetComputeUnitLimit,n=he(t,e);return new ye({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){let t=Do.SetComputeUnitPrice,n=he(t,{microLamports:BigInt(e.microLamports)});return new ye({keys:[],programId:this.programId,data:n})}};mc.programId=new Z("ComputeBudget111111111111111111111111111111");var Ml=64,Pl=32,Ul=64,Dl=O.struct([O.u8("numSignatures"),O.u8("padding"),O.u16("signatureOffset"),O.u16("signatureInstructionIndex"),O.u16("publicKeyOffset"),O.u16("publicKeyInstructionIndex"),O.u16("messageDataOffset"),O.u16("messageDataSize"),O.u16("messageInstructionIndex")]),yc=class r{constructor(){}static createInstructionWithPublicKey(e){let{publicKey:t,message:n,signature:i,instructionIndex:o}=e;Re(t.length===Pl,`Public Key must be ${Pl} bytes but received ${t.length} bytes`),Re(i.length===Ul,`Signature must be ${Ul} bytes but received ${i.length} bytes`);let s=Dl.span,u=s+t.length,f=u+i.length,_=1,S=ie.Buffer.alloc(f+n.length),A=o??65535;return Dl.encode({numSignatures:_,padding:0,signatureOffset:u,signatureInstructionIndex:A,publicKeyOffset:s,publicKeyInstructionIndex:A,messageDataOffset:f,messageDataSize:n.length,messageInstructionIndex:A},S),S.fill(t,s),S.fill(i,u),S.fill(n,f),new ye({keys:[],programId:r.programId,data:S})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:n,instructionIndex:i}=e;Re(t.length===Ml,`Private key must be ${Ml} bytes but received ${t.length} bytes`);try{let o=pc.fromSecretKey(t),s=o.publicKey.toBytes(),u=Vl(n,o.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:u,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};yc.programId=new Z("Ed25519SigVerify111111111111111111111111111");var fw=(r,e)=>{let t=Po.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};Po.utils.isValidPrivateKey;var lw=Po.getPublicKey,zl=32,tc=20,Fl=64,hw=11,rc=O.struct([O.u8("numSignatures"),O.u16("signatureOffset"),O.u8("signatureInstructionIndex"),O.u16("ethAddressOffset"),O.u8("ethAddressInstructionIndex"),O.u16("messageDataOffset"),O.u16("messageDataSize"),O.u8("messageInstructionIndex"),O.blob(20,"ethAddress"),O.blob(64,"signature"),O.u8("recoveryId")]),_c=class r{constructor(){}static publicKeyToEthAddress(e){Re(e.length===Fl,`Public key must be ${Fl} bytes but received ${e.length} bytes`);try{return ie.Buffer.from(qa(le(e))).slice(-tc)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){let{publicKey:t,message:n,signature:i,recoveryId:o,instructionIndex:s}=e;return r.createInstructionWithEthAddress({ethAddress:r.publicKeyToEthAddress(t),message:n,signature:i,recoveryId:o,instructionIndex:s})}static createInstructionWithEthAddress(e){let{ethAddress:t,message:n,signature:i,recoveryId:o,instructionIndex:s=0}=e,u;typeof t=="string"?t.startsWith("0x")?u=ie.Buffer.from(t.substr(2),"hex"):u=ie.Buffer.from(t,"hex"):u=t,Re(u.length===tc,`Address must be ${tc} bytes but received ${u.length} bytes`);let f=1+hw,_=f,S=f+u.length,A=S+i.length+1,I=1,v=ie.Buffer.alloc(rc.span+n.length);return rc.encode({numSignatures:I,signatureOffset:S,signatureInstructionIndex:s,ethAddressOffset:_,ethAddressInstructionIndex:s,messageDataOffset:A,messageDataSize:n.length,messageInstructionIndex:s,signature:le(i),ethAddress:le(u),recoveryId:o},v),v.fill(le(n),rc.span),new ye({keys:[],programId:r.programId,data:v})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:n,instructionIndex:i}=e;Re(t.length===zl,`Private key must be ${zl} bytes but received ${t.length} bytes`);try{let o=le(t),s=lw(o,!1).slice(1),u=ie.Buffer.from(qa(le(n))),[f,_]=fw(u,o);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:f,recoveryId:_,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};_c.programId=new Z("KeccakSecp256k11111111111111111111111111111");var ah,dw=new Z("StakeConfig11111111111111111111111111111111");var Ti=class{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}};ah=Ti;Ti.default=new ah(0,0,Z.default);var Xr=Object.freeze({Initialize:{index:0,layout:O.struct([O.u32("instruction"),O_(),N_()])},Authorize:{index:1,layout:O.struct([O.u32("instruction"),ue("newAuthorized"),O.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:O.struct([O.u32("instruction")])},Split:{index:3,layout:O.struct([O.u32("instruction"),O.ns64("lamports")])},Withdraw:{index:4,layout:O.struct([O.u32("instruction"),O.ns64("lamports")])},Deactivate:{index:5,layout:O.struct([O.u32("instruction")])},Merge:{index:7,layout:O.struct([O.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:O.struct([O.u32("instruction"),ue("newAuthorized"),O.u32("stakeAuthorizationType"),Gn("authoritySeed"),ue("authorityOwner")])}}),lR=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),Wo=class{constructor(){}static initialize(e){let{stakePubkey:t,authorized:n,lockup:i}=e,o=i||Ti.default,s=Xr.Initialize,u=he(s,{authorized:{staker:le(n.staker.toBuffer()),withdrawer:le(n.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:le(o.custodian.toBuffer())}}),f={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ni,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new ye(f)}static createAccountWithSeed(e){let t=new me;t.add(ut.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:i,lockup:o}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:o}))}static createAccount(e){let t=new me;t.add(ut.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:i,lockup:o}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:o}))}static delegate(e){let{stakePubkey:t,authorizedPubkey:n,votePubkey:i}=e,o=Xr.Delegate,s=he(o);return new me().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:Ir,isSigner:!1,isWritable:!1},{pubkey:Xa,isSigner:!1,isWritable:!1},{pubkey:dw,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(e){let{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:o,custodianPubkey:s}=e,u=Xr.Authorize,f=he(u,{newAuthorized:le(i.toBuffer()),stakeAuthorizationType:o.index}),_=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ir,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&_.push({pubkey:s,isSigner:!0,isWritable:!1}),new me().add({keys:_,programId:this.programId,data:f})}static authorizeWithSeed(e){let{stakePubkey:t,authorityBase:n,authoritySeed:i,authorityOwner:o,newAuthorizedPubkey:s,stakeAuthorizationType:u,custodianPubkey:f}=e,_=Xr.AuthorizeWithSeed,S=he(_,{newAuthorized:le(s.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:i,authorityOwner:le(o.toBuffer())}),A=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:Ir,isSigner:!1,isWritable:!1}];return f&&A.push({pubkey:f,isSigner:!0,isWritable:!1}),new me().add({keys:A,programId:this.programId,data:S})}static splitInstruction(e){let{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:o}=e,s=Xr.Split,u=he(s,{lamports:o});return new ye({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(e,t){let n=new me;return n.add(ut.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),n.add(this.splitInstruction(e))}static splitWithSeed(e,t){let{stakePubkey:n,authorizedPubkey:i,splitStakePubkey:o,basePubkey:s,seed:u,lamports:f}=e,_=new me;return _.add(ut.allocate({accountPubkey:o,basePubkey:s,seed:u,space:this.space,programId:this.programId})),t&&t>0&&_.add(ut.transfer({fromPubkey:e.authorizedPubkey,toPubkey:o,lamports:t})),_.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:i,splitStakePubkey:o,lamports:f}))}static merge(e){let{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:i}=e,o=Xr.Merge,s=he(o);return new me().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Ir,isSigner:!1,isWritable:!1},{pubkey:Xa,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(e){let{stakePubkey:t,authorizedPubkey:n,toPubkey:i,lamports:o,custodianPubkey:s}=e,u=Xr.Withdraw,f=he(u,{lamports:o}),_=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:Ir,isSigner:!1,isWritable:!1},{pubkey:Xa,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&_.push({pubkey:s,isSigner:!0,isWritable:!1}),new me().add({keys:_,programId:this.programId,data:f})}static deactivate(e){let{stakePubkey:t,authorizedPubkey:n}=e,i=Xr.Deactivate,o=he(i);return new me().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ir,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}};Wo.programId=new Z("Stake11111111111111111111111111111111111111");Wo.space=200;var Oi=Object.freeze({InitializeAccount:{index:0,layout:O.struct([O.u32("instruction"),k_()])},Authorize:{index:1,layout:O.struct([O.u32("instruction"),ue("newAuthorized"),O.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:O.struct([O.u32("instruction"),O.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:O.struct([O.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:O.struct([O.u32("instruction"),B_()])}}),hR=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),Go=class r{constructor(){}static initializeAccount(e){let{votePubkey:t,nodePubkey:n,voteInit:i}=e,o=Oi.InitializeAccount,s=he(o,{voteInit:{nodePubkey:le(i.nodePubkey.toBuffer()),authorizedVoter:le(i.authorizedVoter.toBuffer()),authorizedWithdrawer:le(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),u={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ni,isSigner:!1,isWritable:!1},{pubkey:Ir,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new ye(u)}static createAccount(e){let t=new me;return t.add(ut.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){let{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:o}=e,s=Oi.Authorize,u=he(s,{newAuthorized:le(i.toBuffer()),voteAuthorizationType:o.index}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ir,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new me().add({keys:f,programId:this.programId,data:u})}static authorizeWithSeed(e){let{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:o,voteAuthorizationType:s,votePubkey:u}=e,f=Oi.AuthorizeWithSeed,_=he(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:le(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:le(o.toBuffer()),voteAuthorizationType:s.index}}),S=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:Ir,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new me().add({keys:S,programId:this.programId,data:_})}static withdraw(e){let{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:o}=e,s=Oi.Withdraw,u=he(s,{lamports:i}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new me().add({keys:f,programId:this.programId,data:u})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return r.withdraw(e)}static updateValidatorIdentity(e){let{votePubkey:t,authorizedWithdrawerPubkey:n,nodePubkey:i}=e,o=Oi.UpdateValidatorIdentity,s=he(o),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new me().add({keys:u,programId:this.programId,data:s})}};Go.programId=new Z("Vote111111111111111111111111111111111111111");Go.space=3762;var dR=new Z("Va1idator1nfo111111111111111111111111111111"),pR=V({name:H(),website:ee(H()),details:ee(H()),iconUrl:ee(H()),keybaseUsername:ee(H())});var gR=new Z("Vote111111111111111111111111111111111111111"),mR=O.struct([ue("nodePubkey"),ue("authorizedWithdrawer"),O.u8("commission"),O.nu64(),O.seq(O.struct([O.nu64("slot"),O.u32("confirmationCount")]),O.offset(O.u32(),-8),"votes"),O.u8("rootSlotValid"),O.nu64("rootSlot"),O.nu64(),O.seq(O.struct([O.nu64("epoch"),ue("authorizedVoter")]),O.offset(O.u32(),-8),"authorizedVoters"),O.struct([O.seq(O.struct([ue("authorizedPubkey"),O.nu64("epochOfLastAuthorizedSwitch"),O.nu64("targetEpoch")]),32,"buf"),O.nu64("idx"),O.u8("isEmpty")],"priorVoters"),O.nu64(),O.seq(O.struct([O.nu64("epoch"),O.nu64("credits"),O.nu64("prevCredits")]),O.offset(O.u32(),-8),"epochCredits"),O.struct([O.nu64("slot"),O.nu64("timestamp")],"lastTimestamp")]);var ch=1e9;var pw=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Rc=Math.ceil,Zt=Math.floor,Dt="[BigNumber Error] ",uh=Dt+"Number primitive has more than 15 significant digits: ",nr=1e14,se=14,Sc=9007199254740991,Ac=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Jr=1e7,yt=1e9;function fh(r){var e,t,n,i=L.prototype={constructor:L,toString:null,valueOf:null},o=new L(1),s=20,u=4,f=-7,_=21,S=-1e7,A=1e7,I=!1,v=1,B=0,T={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},P="0123456789abcdefghijklmnopqrstuvwxyz",M=!0;function L(b,w){var x,k,N,p,a,c,l,d,g=this;if(!(g instanceof L))return new L(b,w);if(w==null){if(b&&b._isBigNumber===!0){g.s=b.s,!b.c||b.e>A?g.c=g.e=null:b.e<S?g.c=[g.e=0]:(g.e=b.e,g.c=b.c.slice());return}if((c=typeof b=="number")&&b*0==0){if(g.s=1/b<0?(b=-b,-1):1,b===~~b){for(p=0,a=b;a>=10;a/=10,p++);p>A?g.c=g.e=null:(g.e=p,g.c=[b]);return}d=String(b)}else{if(!pw.test(d=String(b)))return n(g,d,c);g.s=d.charCodeAt(0)==45?(d=d.slice(1),-1):1}(p=d.indexOf("."))>-1&&(d=d.replace(".","")),(a=d.search(/e/i))>0?(p<0&&(p=a),p+=+d.slice(a+1),d=d.substring(0,a)):p<0&&(p=d.length)}else{if(ve(w,2,P.length,"Base"),w==10&&M)return g=new L(b),X(g,s+g.e+1,u);if(d=String(b),c=typeof b=="number"){if(b*0!=0)return n(g,d,c,w);if(g.s=1/b<0?(d=d.slice(1),-1):1,L.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(uh+b)}else g.s=d.charCodeAt(0)===45?(d=d.slice(1),-1):1;for(x=P.slice(0,w),p=a=0,l=d.length;a<l;a++)if(x.indexOf(k=d.charAt(a))<0){if(k=="."){if(a>p){p=l;continue}}else if(!N&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){N=!0,a=-1,p=0;continue}return n(g,String(b),c,w)}c=!1,d=t(d,w,10,g.s),(p=d.indexOf("."))>-1?d=d.replace(".",""):p=d.length}for(a=0;d.charCodeAt(a)===48;a++);for(l=d.length;d.charCodeAt(--l)===48;);if(d=d.slice(a,++l)){if(l-=a,c&&L.DEBUG&&l>15&&(b>Sc||b!==Zt(b)))throw Error(uh+g.s*b);if((p=p-a-1)>A)g.c=g.e=null;else if(p<S)g.c=[g.e=0];else{if(g.e=p,g.c=[],a=(p+1)%se,p<0&&(a+=se),a<l){for(a&&g.c.push(+d.slice(0,a)),l-=se;a<l;)g.c.push(+d.slice(a,a+=se));a=se-(d=d.slice(a)).length}else a-=l;for(;a--;d+="0");g.c.push(+d)}}else g.c=[g.e=0]}L.clone=fh,L.ROUND_UP=0,L.ROUND_DOWN=1,L.ROUND_CEIL=2,L.ROUND_FLOOR=3,L.ROUND_HALF_UP=4,L.ROUND_HALF_DOWN=5,L.ROUND_HALF_EVEN=6,L.ROUND_HALF_CEIL=7,L.ROUND_HALF_FLOOR=8,L.EUCLID=9,L.config=L.set=function(b){var w,x;if(b!=null)if(typeof b=="object"){if(b.hasOwnProperty(w="DECIMAL_PLACES")&&(x=b[w],ve(x,0,yt,w),s=x),b.hasOwnProperty(w="ROUNDING_MODE")&&(x=b[w],ve(x,0,8,w),u=x),b.hasOwnProperty(w="EXPONENTIAL_AT")&&(x=b[w],x&&x.pop?(ve(x[0],-yt,0,w),ve(x[1],0,yt,w),f=x[0],_=x[1]):(ve(x,-yt,yt,w),f=-(_=x<0?-x:x))),b.hasOwnProperty(w="RANGE"))if(x=b[w],x&&x.pop)ve(x[0],-yt,-1,w),ve(x[1],1,yt,w),S=x[0],A=x[1];else if(ve(x,-yt,yt,w),x)S=-(A=x<0?-x:x);else throw Error(Dt+w+" cannot be zero: "+x);if(b.hasOwnProperty(w="CRYPTO"))if(x=b[w],x===!!x)if(x)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))I=x;else throw I=!x,Error(Dt+"crypto unavailable");else I=x;else throw Error(Dt+w+" not true or false: "+x);if(b.hasOwnProperty(w="MODULO_MODE")&&(x=b[w],ve(x,0,9,w),v=x),b.hasOwnProperty(w="POW_PRECISION")&&(x=b[w],ve(x,0,yt,w),B=x),b.hasOwnProperty(w="FORMAT"))if(x=b[w],typeof x=="object")T=x;else throw Error(Dt+w+" not an object: "+x);if(b.hasOwnProperty(w="ALPHABET"))if(x=b[w],typeof x=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(x))M=x.slice(0,10)=="0123456789",P=x;else throw Error(Dt+w+" invalid: "+x)}else throw Error(Dt+"Object expected: "+b);return{DECIMAL_PLACES:s,ROUNDING_MODE:u,EXPONENTIAL_AT:[f,_],RANGE:[S,A],CRYPTO:I,MODULO_MODE:v,POW_PRECISION:B,FORMAT:T,ALPHABET:P}},L.isBigNumber=function(b){if(!b||b._isBigNumber!==!0)return!1;if(!L.DEBUG)return!0;var w,x,k=b.c,N=b.e,p=b.s;e:if({}.toString.call(k)=="[object Array]"){if((p===1||p===-1)&&N>=-yt&&N<=yt&&N===Zt(N)){if(k[0]===0){if(N===0&&k.length===1)return!0;break e}if(w=(N+1)%se,w<1&&(w+=se),String(k[0]).length==w){for(w=0;w<k.length;w++)if(x=k[w],x<0||x>=nr||x!==Zt(x))break e;if(x!==0)return!0}}}else if(k===null&&N===null&&(p===null||p===1||p===-1))return!0;throw Error(Dt+"Invalid BigNumber: "+b)},L.maximum=L.max=function(){return $(arguments,-1)},L.minimum=L.min=function(){return $(arguments,1)},L.random=function(){var b=9007199254740992,w=Math.random()*b&2097151?function(){return Zt(Math.random()*b)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(x){var k,N,p,a,c,l=0,d=[],g=new L(o);if(x==null?x=s:ve(x,0,yt),a=Rc(x/se),I)if(crypto.getRandomValues){for(k=crypto.getRandomValues(new Uint32Array(a*=2));l<a;)c=k[l]*131072+(k[l+1]>>>11),c>=9e15?(N=crypto.getRandomValues(new Uint32Array(2)),k[l]=N[0],k[l+1]=N[1]):(d.push(c%1e14),l+=2);l=a/2}else if(crypto.randomBytes){for(k=crypto.randomBytes(a*=7);l<a;)c=(k[l]&31)*281474976710656+k[l+1]*1099511627776+k[l+2]*4294967296+k[l+3]*16777216+(k[l+4]<<16)+(k[l+5]<<8)+k[l+6],c>=9e15?crypto.randomBytes(7).copy(k,l):(d.push(c%1e14),l+=7);l=a/7}else throw I=!1,Error(Dt+"crypto unavailable");if(!I)for(;l<a;)c=w(),c<9e15&&(d[l++]=c%1e14);for(a=d[--l],x%=se,a&&x&&(c=Ac[se-x],d[l]=Zt(a/c)*c);d[l]===0;d.pop(),l--);if(l<0)d=[p=0];else{for(p=-1;d[0]===0;d.splice(0,1),p-=se);for(l=1,c=d[0];c>=10;c/=10,l++);l<se&&(p-=se-l)}return g.e=p,g.c=d,g}}(),L.sum=function(){for(var b=1,w=arguments,x=new L(w[0]);b<w.length;)x=x.plus(w[b++]);return x},t=function(){var b="0123456789";function w(x,k,N,p){for(var a,c=[0],l,d=0,g=x.length;d<g;){for(l=c.length;l--;c[l]*=k);for(c[0]+=p.indexOf(x.charAt(d++)),a=0;a<c.length;a++)c[a]>N-1&&(c[a+1]==null&&(c[a+1]=0),c[a+1]+=c[a]/N|0,c[a]%=N)}return c.reverse()}return function(x,k,N,p,a){var c,l,d,g,y,R,m,h,E=x.indexOf("."),K=s,z=u;for(E>=0&&(g=B,B=0,x=x.replace(".",""),h=new L(k),R=h.pow(x.length-E),B=g,h.c=w(Nr(Xt(R.c),R.e,"0"),10,N,b),h.e=h.c.length),m=w(x,k,N,a?(c=P,b):(c=b,P)),d=g=m.length;m[--g]==0;m.pop());if(!m[0])return c.charAt(0);if(E<0?--d:(R.c=m,R.e=d,R.s=p,R=e(R,h,K,z,N),m=R.c,y=R.r,d=R.e),l=d+K+1,E=m[l],g=N/2,y=y||l<0||m[l+1]!=null,y=z<4?(E!=null||y)&&(z==0||z==(R.s<0?3:2)):E>g||E==g&&(z==4||y||z==6&&m[l-1]&1||z==(R.s<0?8:7)),l<1||!m[0])x=y?Nr(c.charAt(1),-K,c.charAt(0)):c.charAt(0);else{if(m.length=l,y)for(--N;++m[--l]>N;)m[l]=0,l||(++d,m=[1].concat(m));for(g=m.length;!m[--g];);for(E=0,x="";E<=g;x+=c.charAt(m[E++]));x=Nr(x,d,c.charAt(0))}return x}}(),e=function(){function b(k,N,p){var a,c,l,d,g=0,y=k.length,R=N%Jr,m=N/Jr|0;for(k=k.slice();y--;)l=k[y]%Jr,d=k[y]/Jr|0,a=m*l+d*R,c=R*l+a%Jr*Jr+g,g=(c/p|0)+(a/Jr|0)+m*d,k[y]=c%p;return g&&(k=[g].concat(k)),k}function w(k,N,p,a){var c,l;if(p!=a)l=p>a?1:-1;else for(c=l=0;c<p;c++)if(k[c]!=N[c]){l=k[c]>N[c]?1:-1;break}return l}function x(k,N,p,a){for(var c=0;p--;)k[p]-=c,c=k[p]<N[p]?1:0,k[p]=c*a+k[p]-N[p];for(;!k[0]&&k.length>1;k.splice(0,1));}return function(k,N,p,a,c){var l,d,g,y,R,m,h,E,K,z,q,G,ne,re,_e,ae,de,lt=k.s==N.s?1:-1,fe=k.c,oe=N.c;if(!fe||!fe[0]||!oe||!oe[0])return new L(!k.s||!N.s||(fe?oe&&fe[0]==oe[0]:!oe)?NaN:fe&&fe[0]==0||!oe?lt*0:lt/0);for(E=new L(lt),K=E.c=[],d=k.e-N.e,lt=p+d+1,c||(c=nr,d=Jt(k.e/se)-Jt(N.e/se),lt=lt/se|0),g=0;oe[g]==(fe[g]||0);g++);if(oe[g]>(fe[g]||0)&&d--,lt<0)K.push(1),y=!0;else{for(re=fe.length,ae=oe.length,g=0,lt+=2,R=Zt(c/(oe[0]+1)),R>1&&(oe=b(oe,R,c),fe=b(fe,R,c),ae=oe.length,re=fe.length),ne=ae,z=fe.slice(0,ae),q=z.length;q<ae;z[q++]=0);de=oe.slice(),de=[0].concat(de),_e=oe[0],oe[1]>=c/2&&_e++;do{if(R=0,l=w(oe,z,ae,q),l<0){if(G=z[0],ae!=q&&(G=G*c+(z[1]||0)),R=Zt(G/_e),R>1)for(R>=c&&(R=c-1),m=b(oe,R,c),h=m.length,q=z.length;w(m,z,h,q)==1;)R--,x(m,ae<h?de:oe,h,c),h=m.length,l=1;else R==0&&(l=R=1),m=oe.slice(),h=m.length;if(h<q&&(m=[0].concat(m)),x(z,m,q,c),q=z.length,l==-1)for(;w(oe,z,ae,q)<1;)R++,x(z,ae<q?de:oe,q,c),q=z.length}else l===0&&(R++,z=[0]);K[g++]=R,z[0]?z[q++]=fe[ne]||0:(z=[fe[ne]],q=1)}while((ne++<re||z[0]!=null)&&lt--);y=z[0]!=null,K[0]||K.splice(0,1)}if(c==nr){for(g=1,lt=K[0];lt>=10;lt/=10,g++);X(E,p+(E.e=g+d*se-1)+1,a,y)}else E.e=d,E.r=+y;return E}}();function F(b,w,x,k){var N,p,a,c,l;if(x==null?x=u:ve(x,0,8),!b.c)return b.toString();if(N=b.c[0],a=b.e,w==null)l=Xt(b.c),l=k==1||k==2&&(a<=f||a>=_)?Zo(l,a):Nr(l,a,"0");else if(b=X(new L(b),w,x),p=b.e,l=Xt(b.c),c=l.length,k==1||k==2&&(w<=p||p<=f)){for(;c<w;l+="0",c++);l=Zo(l,p)}else if(w-=a+(k===2&&p>a),l=Nr(l,p,"0"),p+1>c){if(--w>0)for(l+=".";w--;l+="0");}else if(w+=p-c,w>0)for(p+1==c&&(l+=".");w--;l+="0");return b.s<0&&N?"-"+l:l}function $(b,w){for(var x,k,N=1,p=new L(b[0]);N<b.length;N++)k=new L(b[N]),(!k.s||(x=xn(p,k))===w||x===0&&p.s===w)&&(p=k);return p}function Q(b,w,x){for(var k=1,N=w.length;!w[--N];w.pop());for(N=w[0];N>=10;N/=10,k++);return(x=k+x*se-1)>A?b.c=b.e=null:x<S?b.c=[b.e=0]:(b.e=x,b.c=w),b}n=function(){var b=/^(-?)0([xbo])(?=\w[\w.]*$)/i,w=/^([^.]+)\.$/,x=/^\.([^.]+)$/,k=/^-?(Infinity|NaN)$/,N=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(p,a,c,l){var d,g=c?a:a.replace(N,"");if(k.test(g))p.s=isNaN(g)?null:g<0?-1:1;else{if(!c&&(g=g.replace(b,function(y,R,m){return d=(m=m.toLowerCase())=="x"?16:m=="b"?2:8,!l||l==d?R:y}),l&&(d=l,g=g.replace(w,"$1").replace(x,"0.$1")),a!=g))return new L(g,d);if(L.DEBUG)throw Error(Dt+"Not a"+(l?" base "+l:"")+" number: "+a);p.s=null}p.c=p.e=null}}();function X(b,w,x,k){var N,p,a,c,l,d,g,y=b.c,R=Ac;if(y){e:{for(N=1,c=y[0];c>=10;c/=10,N++);if(p=w-N,p<0)p+=se,a=w,l=y[d=0],g=Zt(l/R[N-a-1]%10);else if(d=Rc((p+1)/se),d>=y.length)if(k){for(;y.length<=d;y.push(0));l=g=0,N=1,p%=se,a=p-se+1}else break e;else{for(l=c=y[d],N=1;c>=10;c/=10,N++);p%=se,a=p-se+N,g=a<0?0:Zt(l/R[N-a-1]%10)}if(k=k||w<0||y[d+1]!=null||(a<0?l:l%R[N-a-1]),k=x<4?(g||k)&&(x==0||x==(b.s<0?3:2)):g>5||g==5&&(x==4||k||x==6&&(p>0?a>0?l/R[N-a]:0:y[d-1])%10&1||x==(b.s<0?8:7)),w<1||!y[0])return y.length=0,k?(w-=b.e+1,y[0]=R[(se-w%se)%se],b.e=-w||0):y[0]=b.e=0,b;if(p==0?(y.length=d,c=1,d--):(y.length=d+1,c=R[se-p],y[d]=a>0?Zt(l/R[N-a]%R[a])*c:0),k)for(;;)if(d==0){for(p=1,a=y[0];a>=10;a/=10,p++);for(a=y[0]+=c,c=1;a>=10;a/=10,c++);p!=c&&(b.e++,y[0]==nr&&(y[0]=1));break}else{if(y[d]+=c,y[d]!=nr)break;y[d--]=0,c=1}for(p=y.length;y[--p]===0;y.pop());}b.e>A?b.c=b.e=null:b.e<S&&(b.c=[b.e=0])}return b}function te(b){var w,x=b.e;return x===null?b.toString():(w=Xt(b.c),w=x<=f||x>=_?Zo(w,x):Nr(w,x,"0"),b.s<0?"-"+w:w)}return i.absoluteValue=i.abs=function(){var b=new L(this);return b.s<0&&(b.s=1),b},i.comparedTo=function(b,w){return xn(this,new L(b,w))},i.decimalPlaces=i.dp=function(b,w){var x,k,N,p=this;if(b!=null)return ve(b,0,yt),w==null?w=u:ve(w,0,8),X(new L(p),b+p.e+1,w);if(!(x=p.c))return null;if(k=((N=x.length-1)-Jt(this.e/se))*se,N=x[N])for(;N%10==0;N/=10,k--);return k<0&&(k=0),k},i.dividedBy=i.div=function(b,w){return e(this,new L(b,w),s,u)},i.dividedToIntegerBy=i.idiv=function(b,w){return e(this,new L(b,w),0,1)},i.exponentiatedBy=i.pow=function(b,w){var x,k,N,p,a,c,l,d,g,y=this;if(b=new L(b),b.c&&!b.isInteger())throw Error(Dt+"Exponent not an integer: "+te(b));if(w!=null&&(w=new L(w)),c=b.e>14,!y.c||!y.c[0]||y.c[0]==1&&!y.e&&y.c.length==1||!b.c||!b.c[0])return g=new L(Math.pow(+te(y),c?b.s*(2-Xo(b)):+te(b))),w?g.mod(w):g;if(l=b.s<0,w){if(w.c?!w.c[0]:!w.s)return new L(NaN);k=!l&&y.isInteger()&&w.isInteger(),k&&(y=y.mod(w))}else{if(b.e>9&&(y.e>0||y.e<-1||(y.e==0?y.c[0]>1||c&&y.c[1]>=24e7:y.c[0]<8e13||c&&y.c[0]<=9999975e7)))return p=y.s<0&&Xo(b)?-0:0,y.e>-1&&(p=1/p),new L(l?1/p:p);B&&(p=Rc(B/se+2))}for(c?(x=new L(.5),l&&(b.s=1),d=Xo(b)):(N=Math.abs(+te(b)),d=N%2),g=new L(o);;){if(d){if(g=g.times(y),!g.c)break;p?g.c.length>p&&(g.c.length=p):k&&(g=g.mod(w))}if(N){if(N=Zt(N/2),N===0)break;d=N%2}else if(b=b.times(x),X(b,b.e+1,1),b.e>14)d=Xo(b);else{if(N=+te(b),N===0)break;d=N%2}y=y.times(y),p?y.c&&y.c.length>p&&(y.c.length=p):k&&(y=y.mod(w))}return k?g:(l&&(g=o.div(g)),w?g.mod(w):p?X(g,B,u,a):g)},i.integerValue=function(b){var w=new L(this);return b==null?b=u:ve(b,0,8),X(w,w.e+1,b)},i.isEqualTo=i.eq=function(b,w){return xn(this,new L(b,w))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(b,w){return xn(this,new L(b,w))>0},i.isGreaterThanOrEqualTo=i.gte=function(b,w){return(w=xn(this,new L(b,w)))===1||w===0},i.isInteger=function(){return!!this.c&&Jt(this.e/se)>this.c.length-2},i.isLessThan=i.lt=function(b,w){return xn(this,new L(b,w))<0},i.isLessThanOrEqualTo=i.lte=function(b,w){return(w=xn(this,new L(b,w)))===-1||w===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(b,w){var x,k,N,p,a=this,c=a.s;if(b=new L(b,w),w=b.s,!c||!w)return new L(NaN);if(c!=w)return b.s=-w,a.plus(b);var l=a.e/se,d=b.e/se,g=a.c,y=b.c;if(!l||!d){if(!g||!y)return g?(b.s=-w,b):new L(y?a:NaN);if(!g[0]||!y[0])return y[0]?(b.s=-w,b):new L(g[0]?a:u==3?-0:0)}if(l=Jt(l),d=Jt(d),g=g.slice(),c=l-d){for((p=c<0)?(c=-c,N=g):(d=l,N=y),N.reverse(),w=c;w--;N.push(0));N.reverse()}else for(k=(p=(c=g.length)<(w=y.length))?c:w,c=w=0;w<k;w++)if(g[w]!=y[w]){p=g[w]<y[w];break}if(p&&(N=g,g=y,y=N,b.s=-b.s),w=(k=y.length)-(x=g.length),w>0)for(;w--;g[x++]=0);for(w=nr-1;k>c;){if(g[--k]<y[k]){for(x=k;x&&!g[--x];g[x]=w);--g[x],g[k]+=nr}g[k]-=y[k]}for(;g[0]==0;g.splice(0,1),--d);return g[0]?Q(b,g,d):(b.s=u==3?-1:1,b.c=[b.e=0],b)},i.modulo=i.mod=function(b,w){var x,k,N=this;return b=new L(b,w),!N.c||!b.s||b.c&&!b.c[0]?new L(NaN):!b.c||N.c&&!N.c[0]?new L(N):(v==9?(k=b.s,b.s=1,x=e(N,b,0,3),b.s=k,x.s*=k):x=e(N,b,0,v),b=N.minus(x.times(b)),!b.c[0]&&v==1&&(b.s=N.s),b)},i.multipliedBy=i.times=function(b,w){var x,k,N,p,a,c,l,d,g,y,R,m,h,E,K,z=this,q=z.c,G=(b=new L(b,w)).c;if(!q||!G||!q[0]||!G[0])return!z.s||!b.s||q&&!q[0]&&!G||G&&!G[0]&&!q?b.c=b.e=b.s=null:(b.s*=z.s,!q||!G?b.c=b.e=null:(b.c=[0],b.e=0)),b;for(k=Jt(z.e/se)+Jt(b.e/se),b.s*=z.s,l=q.length,y=G.length,l<y&&(h=q,q=G,G=h,N=l,l=y,y=N),N=l+y,h=[];N--;h.push(0));for(E=nr,K=Jr,N=y;--N>=0;){for(x=0,R=G[N]%K,m=G[N]/K|0,a=l,p=N+a;p>N;)d=q[--a]%K,g=q[a]/K|0,c=m*d+g*R,d=R*d+c%K*K+h[p]+x,x=(d/E|0)+(c/K|0)+m*g,h[p--]=d%E;h[p]=x}return x?++k:h.splice(0,1),Q(b,h,k)},i.negated=function(){var b=new L(this);return b.s=-b.s||null,b},i.plus=function(b,w){var x,k=this,N=k.s;if(b=new L(b,w),w=b.s,!N||!w)return new L(NaN);if(N!=w)return b.s=-w,k.minus(b);var p=k.e/se,a=b.e/se,c=k.c,l=b.c;if(!p||!a){if(!c||!l)return new L(N/0);if(!c[0]||!l[0])return l[0]?b:new L(c[0]?k:N*0)}if(p=Jt(p),a=Jt(a),c=c.slice(),N=p-a){for(N>0?(a=p,x=l):(N=-N,x=c),x.reverse();N--;x.push(0));x.reverse()}for(N=c.length,w=l.length,N-w<0&&(x=l,l=c,c=x,w=N),N=0;w;)N=(c[--w]=c[w]+l[w]+N)/nr|0,c[w]=nr===c[w]?0:c[w]%nr;return N&&(c=[N].concat(c),++a),Q(b,c,a)},i.precision=i.sd=function(b,w){var x,k,N,p=this;if(b!=null&&b!==!!b)return ve(b,1,yt),w==null?w=u:ve(w,0,8),X(new L(p),b,w);if(!(x=p.c))return null;if(N=x.length-1,k=N*se+1,N=x[N]){for(;N%10==0;N/=10,k--);for(N=x[0];N>=10;N/=10,k++);}return b&&p.e+1>k&&(k=p.e+1),k},i.shiftedBy=function(b){return ve(b,-Sc,Sc),this.times("1e"+b)},i.squareRoot=i.sqrt=function(){var b,w,x,k,N,p=this,a=p.c,c=p.s,l=p.e,d=s+4,g=new L("0.5");if(c!==1||!a||!a[0])return new L(!c||c<0&&(!a||a[0])?NaN:a?p:1/0);if(c=Math.sqrt(+te(p)),c==0||c==1/0?(w=Xt(a),(w.length+l)%2==0&&(w+="0"),c=Math.sqrt(+w),l=Jt((l+1)/2)-(l<0||l%2),c==1/0?w="5e"+l:(w=c.toExponential(),w=w.slice(0,w.indexOf("e")+1)+l),x=new L(w)):x=new L(c+""),x.c[0]){for(l=x.e,c=l+d,c<3&&(c=0);;)if(N=x,x=g.times(N.plus(e(p,N,d,1))),Xt(N.c).slice(0,c)===(w=Xt(x.c)).slice(0,c))if(x.e<l&&--c,w=w.slice(c-3,c+1),w=="9999"||!k&&w=="4999"){if(!k&&(X(N,N.e+s+2,0),N.times(N).eq(p))){x=N;break}d+=4,c+=4,k=1}else{(!+w||!+w.slice(1)&&w.charAt(0)=="5")&&(X(x,x.e+s+2,1),b=!x.times(x).eq(p));break}}return X(x,x.e+s+1,u,b)},i.toExponential=function(b,w){return b!=null&&(ve(b,0,yt),b++),F(this,b,w,1)},i.toFixed=function(b,w){return b!=null&&(ve(b,0,yt),b=b+this.e+1),F(this,b,w)},i.toFormat=function(b,w,x){var k,N=this;if(x==null)b!=null&&w&&typeof w=="object"?(x=w,w=null):b&&typeof b=="object"?(x=b,b=w=null):x=T;else if(typeof x!="object")throw Error(Dt+"Argument not an object: "+x);if(k=N.toFixed(b,w),N.c){var p,a=k.split("."),c=+x.groupSize,l=+x.secondaryGroupSize,d=x.groupSeparator||"",g=a[0],y=a[1],R=N.s<0,m=R?g.slice(1):g,h=m.length;if(l&&(p=c,c=l,l=p,h-=p),c>0&&h>0){for(p=h%c||c,g=m.substr(0,p);p<h;p+=c)g+=d+m.substr(p,c);l>0&&(g+=d+m.slice(p)),R&&(g="-"+g)}k=y?g+(x.decimalSeparator||"")+((l=+x.fractionGroupSize)?y.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(x.fractionGroupSeparator||"")):y):g}return(x.prefix||"")+k+(x.suffix||"")},i.toFraction=function(b){var w,x,k,N,p,a,c,l,d,g,y,R,m=this,h=m.c;if(b!=null&&(c=new L(b),!c.isInteger()&&(c.c||c.s!==1)||c.lt(o)))throw Error(Dt+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+te(c));if(!h)return new L(m);for(w=new L(o),d=x=new L(o),k=l=new L(o),R=Xt(h),p=w.e=R.length-m.e-1,w.c[0]=Ac[(a=p%se)<0?se+a:a],b=!b||c.comparedTo(w)>0?p>0?w:d:c,a=A,A=1/0,c=new L(R),l.c[0]=0;g=e(c,w,0,1),N=x.plus(g.times(k)),N.comparedTo(b)!=1;)x=k,k=N,d=l.plus(g.times(N=d)),l=N,w=c.minus(g.times(N=w)),c=N;return N=e(b.minus(x),k,0,1),l=l.plus(N.times(d)),x=x.plus(N.times(k)),l.s=d.s=m.s,p=p*2,y=e(d,k,p,u).minus(m).abs().comparedTo(e(l,x,p,u).minus(m).abs())<1?[d,k]:[l,x],A=a,y},i.toNumber=function(){return+te(this)},i.toPrecision=function(b,w){return b!=null&&ve(b,1,yt),F(this,b,w,2)},i.toString=function(b){var w,x=this,k=x.s,N=x.e;return N===null?k?(w="Infinity",k<0&&(w="-"+w)):w="NaN":(b==null?w=N<=f||N>=_?Zo(Xt(x.c),N):Nr(Xt(x.c),N,"0"):b===10&&M?(x=X(new L(x),s+N+1,u),w=Nr(Xt(x.c),x.e,"0")):(ve(b,2,P.length,"Base"),w=t(Nr(Xt(x.c),N,"0"),10,b,k,!0)),k<0&&x.c[0]&&(w="-"+w)),w},i.valueOf=i.toJSON=function(){return te(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,r!=null&&L.set(r),L}function Jt(r){var e=r|0;return r>0||r===e?e:e-1}function Xt(r){for(var e,t,n=1,i=r.length,o=r[0]+"";n<i;){for(e=r[n++]+"",t=se-e.length;t--;e="0"+e);o+=e}for(i=o.length;o.charCodeAt(--i)===48;);return o.slice(0,i+1||1)}function xn(r,e){var t,n,i=r.c,o=e.c,s=r.s,u=e.s,f=r.e,_=e.e;if(!s||!u)return null;if(t=i&&!i[0],n=o&&!o[0],t||n)return t?n?0:-u:s;if(s!=u)return s;if(t=s<0,n=f==_,!i||!o)return n?0:!i^t?1:-1;if(!n)return f>_^t?1:-1;for(u=(f=i.length)<(_=o.length)?f:_,s=0;s<u;s++)if(i[s]!=o[s])return i[s]>o[s]^t?1:-1;return f==_?0:f>_^t?1:-1}function ve(r,e,t,n){if(r<e||r>t||r!==Zt(r))throw Error(Dt+(n||"Argument")+(typeof r=="number"?r<e||r>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(r))}function Xo(r){var e=r.c.length-1;return Jt(r.e/se)==e&&r.c[e]%2!=0}function Zo(r,e){return(r.length>1?r.charAt(0)+"."+r.slice(1):r)+(e<0?"e":"e+")+e}function Nr(r,e,t){var n,i;if(e<0){for(i=t+".";++e;i+=t);r=i+r}else if(n=r.length,++e>n){for(i=t,e-=n;--e;i+=t);r+=i}else e<n&&(r=r.slice(0,e)+"."+r.slice(e));return r}var gw=fh(),kr=gw;var lh="solana:",hh="https:",dh=new Z("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),ph=9,gh=new kr(10);var ir=new Z("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),xc=new Z("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),mh=new Z("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),SR=new Z("So11111111111111111111111111111111111111112"),AR=new Z("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");var Qr=r=>{let e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}};var vc=ht(lr(),1),en=ht(yh(),1);var Qo=r=>e=>{let t=(0,vc.blob)(r,e),{encode:n,decode:i}=Qr(t),o=t;return o.decode=(s,u)=>{let f=i(s,u);return(0,en.toBigIntLE)(Buffer.from(f))},o.encode=(s,u,f)=>{let _=(0,en.toBufferLE)(s,r);return n(_,u,f)},o},es=r=>e=>{let t=(0,vc.blob)(r,e),{encode:n,decode:i}=Qr(t),o=t;return o.decode=(s,u)=>{let f=i(s,u);return(0,en.toBigIntBE)(Buffer.from(f))},o.encode=(s,u,f)=>{let _=(0,en.toBufferBE)(s,r);return n(_,u,f)},o},tn=Qo(8),NR=es(8),bw=Qo(16),kR=es(16),BR=Qo(24),TR=es(24),LR=Qo(32),CR=es(32);var zR=new kr("1e+18");var _h=ht(lr(),1);var ts=r=>{let e=(0,_h.u8)(r),{encode:t,decode:n}=Qr(e),i=e;return i.decode=(o,s)=>!!n(o,s),i.encode=(o,s,u)=>{let f=Number(o);return t(f,s,u)},i};var wh=ht(lr(),1);var ct=r=>{let e=(0,wh.blob)(32,r),{encode:t,decode:n}=Qr(e),i=e;return i.decode=(o,s)=>{let u=n(o,s);return new Z(u)},i.encode=(o,s,u)=>{let f=o.toBuffer();return t(f,s,u)},i};var rn=class extends Error{constructor(e){super(e)}},Qn=class extends rn{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}},rs=class extends rn{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}};var ei=class extends rn{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}},Br=class extends rn{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}},ns=class extends rn{constructor(){super(...arguments),this.name="TokenInvalidMintError"}};var is=class extends rn{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}};var os;(function(r){r[r.InitializeMint=0]="InitializeMint",r[r.InitializeAccount=1]="InitializeAccount",r[r.InitializeMultisig=2]="InitializeMultisig",r[r.Transfer=3]="Transfer",r[r.Approve=4]="Approve",r[r.Revoke=5]="Revoke",r[r.SetAuthority=6]="SetAuthority",r[r.MintTo=7]="MintTo",r[r.Burn=8]="Burn",r[r.CloseAccount=9]="CloseAccount",r[r.FreezeAccount=10]="FreezeAccount",r[r.ThawAccount=11]="ThawAccount",r[r.TransferChecked=12]="TransferChecked",r[r.ApproveChecked=13]="ApproveChecked",r[r.MintToChecked=14]="MintToChecked",r[r.BurnChecked=15]="BurnChecked",r[r.InitializeAccount2=16]="InitializeAccount2",r[r.SyncNative=17]="SyncNative",r[r.InitializeAccount3=18]="InitializeAccount3",r[r.InitializeMultisig2=19]="InitializeMultisig2",r[r.InitializeMint2=20]="InitializeMint2",r[r.GetAccountDataSize=21]="GetAccountDataSize",r[r.InitializeImmutableOwner=22]="InitializeImmutableOwner",r[r.AmountToUiAmount=23]="AmountToUiAmount",r[r.UiAmountToAmount=24]="UiAmountToAmount",r[r.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",r[r.TransferFeeExtension=26]="TransferFeeExtension",r[r.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",r[r.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",r[r.Reallocate=29]="Reallocate",r[r.MemoTransferExtension=30]="MemoTransferExtension",r[r.CreateNativeMint=31]="CreateNativeMint",r[r.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",r[r.InterestBearingMintExtension=33]="InterestBearingMintExtension",r[r.CpiGuardExtension=34]="CpiGuardExtension",r[r.InitializePermanentDelegate=35]="InitializePermanentDelegate",r[r.TransferHookExtension=36]="TransferHookExtension",r[r.MetadataPointerExtension=39]="MetadataPointerExtension",r[r.GroupPointerExtension=40]="GroupPointerExtension",r[r.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",r[r.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",r[r.PausableExtension=44]="PausableExtension"})(os||(os={}));var vn=ht(lr(),1);var ti;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Mint=1]="Mint",r[r.Account=2]="Account"})(ti||(ti={}));var ss=1;var nn=ht(lr(),1);var Li=ht(lr(),1);var Ew=(0,Li.struct)([(0,Li.u8)("m"),(0,Li.u8)("n"),ts("isInitialized"),ct("signer1"),ct("signer2"),ct("signer3"),ct("signer4"),ct("signer5"),ct("signer6"),ct("signer7"),ct("signer8"),ct("signer9"),ct("signer10"),ct("signer11")]),as=Ew.span;var cs;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initialized=1]="Initialized",r[r.Frozen=2]="Frozen"})(cs||(cs={}));var bh=(0,nn.struct)([ct("mint"),ct("owner"),tn("amount"),(0,nn.u32)("delegateOption"),ct("delegate"),(0,nn.u8)("state"),(0,nn.u32)("isNativeOption"),tn("isNative"),tn("delegatedAmount"),(0,nn.u32)("closeAuthorityOption"),ct("closeAuthority")]),Tr=bh.span;async function Ic(r,e,t,n=ir){let i=await r.getAccountInfo(e,t);return Rw(e,i,n)}function Rw(r,e,t=ir){if(!e)throw new Qn;if(!e.owner.equals(t))throw new ei;if(e.data.length<Tr)throw new Br;let n=bh.decode(e.data.slice(0,Tr)),i=Buffer.alloc(0);if(e.data.length>Tr){if(e.data.length===as)throw new Br;if(e.data[Tr]!=ti.Account)throw new rs;i=e.data.slice(Tr+ss)}return{address:r,mint:n.mint,owner:n.owner,amount:n.amount,delegate:n.delegateOption?n.delegate:null,delegatedAmount:n.delegatedAmount,isInitialized:n.state!==cs.Uninitialized,isFrozen:n.state===cs.Frozen,isNative:!!n.isNativeOption,rentExemptReserve:n.isNativeOption?n.isNative:null,closeAuthority:n.closeAuthorityOption?n.closeAuthority:null,tlvData:i}}function Eh(r,e,t){if(t.length){r.push({pubkey:e,isSigner:!1,isWritable:!1});for(let n of t)r.push({pubkey:n instanceof Z?n:n.publicKey,isSigner:!0,isWritable:!1})}else r.push({pubkey:e,isSigner:!0,isWritable:!1});return r}var Ci=ht(lr(),1);var Rh=(0,Ci.struct)([(0,Ci.u8)("instruction"),tn("amount"),(0,Ci.u8)("decimals")]);function Sh(r,e,t,n,i,o,s=[],u=ir){let f=Eh([{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0}],n,s),_=Buffer.alloc(Rh.span);return Rh.encode({instruction:os.TransferChecked,amount:BigInt(i),decimals:o},_),new ye({keys:f,programId:u,data:_})}var Ah=(0,vn.struct)([(0,vn.u32)("mintAuthorityOption"),ct("mintAuthority"),tn("supply"),(0,vn.u8)("decimals"),ts("isInitialized"),(0,vn.u32)("freezeAuthorityOption"),ct("freezeAuthority")]),Oc=Ah.span;async function xh(r,e,t,n=ir){let i=await r.getAccountInfo(e,t);return Sw(e,i,n)}function Sw(r,e,t=ir){if(!e)throw new Qn;if(!e.owner.equals(t))throw new ei;if(e.data.length<Oc)throw new Br;let n=Ah.decode(e.data.slice(0,Oc)),i=Buffer.alloc(0);if(e.data.length>Oc){if(e.data.length<=Tr)throw new Br;if(e.data.length===as)throw new Br;if(e.data[Tr]!=ti.Mint)throw new ns;i=e.data.slice(Tr+ss)}return{address:r,mintAuthority:n.mintAuthorityOption?n.mintAuthority:null,supply:n.supply,decimals:n.decimals,isInitialized:n.isInitialized,freezeAuthority:n.freezeAuthorityOption?n.freezeAuthority:null,tlvData:i}}async function Nc(r,e,t=!1,n=ir,i=mh){if(!t&&!Z.isOnCurve(e.toBuffer()))throw new is;let[o]=await Z.findProgramAddress([e.toBuffer(),n.toBuffer(),r.toBuffer()],i);return o}var ft=class extends Error{constructor(){super(...arguments),this.name="CreateTransferError"}};async function vh(r,e,{recipient:t,amount:n,splToken:i,reference:o,memo:s},{commitment:u}={}){if(!await r.getAccountInfo(e))throw new ft("sender not found");if(!await r.getAccountInfo(t))throw new ft("recipient not found");let S=i?await xw(t,n,i,e,r):await Aw(t,n,e,r);if(o){Array.isArray(o)||(o=[o]);for(let I of o)S.keys.push({pubkey:I,isWritable:!1,isSigner:!1})}let A=new me;return A.feePayer=e,A.recentBlockhash=(await r.getLatestBlockhash(u)).blockhash,s!=null&&A.add(new ye({programId:dh,keys:[],data:Buffer.from(s,"utf8")})),A.add(S),A}async function Aw(r,e,t,n){let i=await n.getAccountInfo(t);if(!i)throw new ft("sender not found");let o=await n.getAccountInfo(r);if(!o)throw new ft("recipient not found");if(!i.owner.equals(ut.programId))throw new ft("sender owner invalid");if(i.executable)throw new ft("sender executable");if(!o.owner.equals(ut.programId))throw new ft("recipient owner invalid");if(o.executable)throw new ft("recipient executable");if((e.decimalPlaces()??0)>ph)throw new ft("amount decimals invalid");e=e.times(ch).integerValue(kr.ROUND_FLOOR);let s=e.toNumber();if(s>i.lamports)throw new ft("insufficient funds");return ut.transfer({fromPubkey:t,toPubkey:r,lamports:s})}async function xw(r,e,t,n,i){let s=(await i.getParsedAccountInfo(t)).value?.owner,u=s&&s===xc?xc:ir,f=await xh(i,t,void 0,u);if(!f.isInitialized)throw new ft("mint not initialized");if((e.decimalPlaces()??0)>f.decimals)throw new ft("amount decimals invalid");e=e.times(gh.pow(f.decimals)).integerValue(kr.ROUND_FLOOR);let _=await Nc(t,n,void 0,u),S=await Ic(i,_,void 0,u);if(!S.isInitialized)throw new ft("sender not initialized");if(S.isFrozen)throw new ft("sender frozen");let A=await Nc(t,r,void 0,u),I=await Ic(i,A,void 0,u);if(!I.isInitialized)throw new ft("recipient not initialized");if(I.isFrozen)throw new ft("recipient frozen");let v=BigInt(String(e));if(v>S.amount)throw new ft("insufficient funds");return Sh(_,t,A,n,v,f.decimals,[],u)}var Qt=class extends Error{constructor(){super(...arguments),this.name="ParseURLError"}};function Ih(r){if(typeof r=="string"){if(r.length>2048)throw new Qt("length invalid");r=new URL(r)}if(r.protocol!==lh)throw new Qt("protocol invalid");if(!r.pathname)throw new Qt("pathname missing");return/[:%]/.test(r.pathname)?vw(r):Iw(r)}function vw({pathname:r,searchParams:e}){let t=new URL(decodeURIComponent(r));if(t.protocol!==hh)throw new Qt("link invalid");let n=e.get("label")||void 0,i=e.get("message")||void 0;return{link:t,label:n,message:i}}function Iw({pathname:r,searchParams:e}){let t;try{t=new Z(r)}catch{throw new Qt("recipient invalid")}let n,i=e.get("amount");if(i!=null){if(!/^\d+(\.\d+)?$/.test(i))throw new Qt("amount invalid");if(n=new kr(i),n.isNaN())throw new Qt("amount NaN");if(n.isNegative())throw new Qt("amount negative")}let o,s=e.get("spl-token");if(s!=null)try{o=new Z(s)}catch{throw new Qt("spl-token invalid")}let u,f=e.getAll("reference");if(f.length)try{u=f.map(I=>new Z(I))}catch{throw new Qt("reference invalid")}let _=e.get("label")||void 0,S=e.get("message")||void 0,A=e.get("memo")||void 0;return{recipient:t,amount:n,splToken:o,reference:u,label:_,message:S,memo:A}}var Nh=ht(Bn());typeof window<"u"&&!window.Buffer&&(window.Buffer=Nh.Buffer);var Oh=null;function Ow(r){Oh=r,console.log("Solana Pay initialized with config:",Oh)}function us(){return window.phantom?.solana?.isPhantom?window.phantom.solana:window.solflare?.isSolflare?window.solflare:window.backpack?.isBackpack?window.backpack:window.solana?window.solana:null}function Nw(){return us()!==null}async function kh(){let r=us();if(!r)throw new Error("No Solana wallet found. Please install Phantom, Solflare, or Backpack.");try{return(await r.connect()).publicKey}catch(e){throw e.code===4001?new Error("Wallet connection rejected by user"):e}}async function kw(){let r=us();if(!r)return null;try{return(await r.connect({onlyIfTrusted:!0})).publicKey}catch{return null}}async function Bw(r,e="https://api.mainnet-beta.solana.com"){let t=us();if(!t||!t.publicKey)throw new Error("Wallet not connected");let{recipient:n,amount:i,splToken:o,reference:s,memo:u}=Ih(r);console.log("Payment details:",{recipient:n.toString(),amount:i.toString(),splToken:o?.toString(),reference:s?.map(M=>M.toString()),memo:u});let f=new $o(e,"confirmed"),_=await vh(f,t.publicKey,{recipient:n,amount:i,splToken:o,reference:s,memo:u}),{blockhash:S,lastValidBlockHeight:A}=await f.getLatestBlockhash("confirmed");_.recentBlockhash=S,_.feePayer=t.publicKey,console.log("Transaction created, requesting signature...");let{signature:I}=await t.signAndSendTransaction(_);console.log("Transaction sent:",I);let v=!1,B=0,T=30;for(;!v&&B<T;){try{let M=await f.getSignatureStatus(I);if(M?.value?.confirmationStatus==="confirmed"||M?.value?.confirmationStatus==="finalized"){v=!0,console.log("Transaction confirmed via polling");break}}catch{console.log("Checking transaction status...",B)}await new Promise(M=>setTimeout(M,2e3)),B++}v||console.log("Transaction sent but confirmation timed out - backend will verify");let P={value:{err:null}};if(P.value.err)throw new Error("Transaction failed: "+JSON.stringify(P.value.err));return console.log("Transaction confirmed:",I),I}async function Bh(r,e){let t=await fetch("/api/payment-verify/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":Tw()},body:JSON.stringify({order_id:r,signature:e})});if(!t.ok){let i="";try{let o=await t.json();i=o.message||JSON.stringify(o)}catch{i=await t.text()}throw console.error("Backend verification error:",i),new Error(`HTTP ${t.status}: ${i||t.statusText}`)}let n=await t.json();if(!n.success)throw new Error(n.message||"Payment verification failed");return n}function Tw(){let r="csrftoken",e=document.cookie.split(";");for(let t of e)if(t=t.trim(),t.startsWith(r+"="))return t.substring(r.length+1);return""}async function Lw(r,e={}){let{onStatusChange:t=()=>{},onSuccess:n=()=>{},onError:i=()=>{}}=e;try{t("Connecting to wallet...","info");let o=await kh();console.log("Connected to wallet:",o.toString()),t("Creating payment transaction...","info");let s=await Bw(r.paymentUrl,r.rpcUrl||"https://api.mainnet-beta.solana.com");t("Verifying payment...","info");let u=await Bh(r.orderId,s);t(u.message||"Payment confirmed!","success"),n(u,s)}catch(o){console.error("Payment error:",o);let s=o.message||"Payment failed";o.message?.includes("rejected")?s="Transaction rejected by user":o.message?.includes("insufficient")?s="Insufficient funds in wallet":o.message?.includes("No Solana wallet")&&(s="No Solana wallet detected. Please install Phantom, Solflare, or Backpack."),t(s,"error"),i(o)}}window.SolanaPayment={initialize:Ow,isWalletInstalled:Nw,connectWallet:kh,connectWalletSilently:kw,processPayment:Lw,verifyPaymentWithBackend:Bh};console.log("Solana Payment module loaded");})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@solana/buffer-layout/lib/Layout.js:
  (**
   * Support for translating between Uint8Array instances and JavaScript
   * native types.
   *
   * {@link module:Layout~Layout|Layout} is the basis of a class
   * hierarchy that associates property names with sequences of encoded
   * bytes.
   *
   * Layouts are supported for these scalar (numeric) types:
   * * {@link module:Layout~UInt|Unsigned integers in little-endian
   *   format} with {@link module:Layout.u8|8-bit}, {@link
   *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
   *   {@link module:Layout.u32|32-bit}, {@link
   *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
   *   format} with {@link module:Layout.u16be|16-bit}, {@link
   *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
   *   {@link module:Layout.u40be|40-bit}, and {@link
   *   module:Layout.u48be|48-bit} representation ranges;
   * * {@link module:Layout~Int|Signed integers in little-endian
   *   format} with {@link module:Layout.s8|8-bit}, {@link
   *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
   *   {@link module:Layout.s32|32-bit}, {@link
   *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~IntBE|Signed integers in big-endian format}
   *   with {@link module:Layout.s16be|16-bit}, {@link
   *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
   *   {@link module:Layout.s40be|40-bit}, and {@link
   *   module:Layout.s48be|48-bit} representation ranges;
   * * 64-bit integral values that decode to an exact (if magnitude is
   *   less than 2^53) or nearby integral Number in {@link
   *   module:Layout.nu64|unsigned little-endian}, {@link
   *   module:Layout.nu64be|unsigned big-endian}, {@link
   *   module:Layout.ns64|signed little-endian}, and {@link
   *   module:Layout.ns64be|unsigned big-endian} encodings;
   * * 32-bit floating point values with {@link
   *   module:Layout.f32|little-endian} and {@link
   *   module:Layout.f32be|big-endian} representations;
   * * 64-bit floating point values with {@link
   *   module:Layout.f64|little-endian} and {@link
   *   module:Layout.f64be|big-endian} representations;
   * * {@link module:Layout.const|Constants} that take no space in the
   *   encoded expression.
   *
   * and for these aggregate types:
   * * {@link module:Layout.seq|Sequence}s of instances of a {@link
   *   module:Layout~Layout|Layout}, with JavaScript representation as
   *   an Array and constant or data-dependent {@link
   *   module:Layout~Sequence#count|length};
   * * {@link module:Layout.struct|Structure}s that aggregate a
   *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
   *   instances, with JavaScript representation as an Object;
   * * {@link module:Layout.union|Union}s that support multiple {@link
   *   module:Layout~VariantLayout|variant layouts} over a fixed
   *   (padded) or variable (not padded) span of bytes, using an
   *   unsigned integer at the start of the data or a separate {@link
   *   module:Layout.unionLayoutDiscriminator|layout element} to
   *   determine which layout to use when interpreting the buffer
   *   contents;
   * * {@link module:Layout.bits|BitStructure}s that contain a sequence
   *   of individual {@link
   *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
   *   16, 24, or 32-bit unsigned integer starting at the least- or
   *   most-significant bit;
   * * {@link module:Layout.cstr|C strings} of varying length;
   * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
   *   module:Layout~Blob#length|length} raw data.
   *
   * All {@link module:Layout~Layout|Layout} instances are immutable
   * after construction, to prevent internal state from becoming
   * inconsistent.
   *
   * @local Layout
   * @local ExternalLayout
   * @local GreedyCount
   * @local OffsetLayout
   * @local UInt
   * @local UIntBE
   * @local Int
   * @local IntBE
   * @local NearUInt64
   * @local NearUInt64BE
   * @local NearInt64
   * @local NearInt64BE
   * @local Float
   * @local FloatBE
   * @local Double
   * @local DoubleBE
   * @local Sequence
   * @local Structure
   * @local UnionDiscriminator
   * @local UnionLayoutDiscriminator
   * @local Union
   * @local VariantLayout
   * @local BitStructure
   * @local BitField
   * @local Boolean
   * @local Blob
   * @local CString
   * @local Constant
   * @local bindConstructorLayout
   * @module Layout
   * @license MIT
   * @author Peter A. Bigot
   * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
   *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
